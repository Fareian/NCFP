exports.id=99,exports.ids=[99],exports.modules={69812:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(s,{Analytics:()=>l}),e.exports=((e,s,a,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let c of n(s))i.call(e,c)||c===a||t(e,c,{get:()=>s[c],enumerable:!(o=r(s,c))||o.enumerable});return e})(t({},"__esModule",{value:!0}),s);var a=`
local key = KEYS[1]
local field = ARGV[1]

local data = redis.call("ZRANGE", key, 0, -1, "WITHSCORES")
local count = {}

for i = 1, #data, 2 do
  local json_str = data[i]
  local score = tonumber(data[i + 1])
  local obj = cjson.decode(json_str)

  local fieldValue = obj[field]

  if count[fieldValue] == nil then
    count[fieldValue] = score
  else
    count[fieldValue] = count[fieldValue] + score
  end
end

local result = {}
for k, v in pairs(count) do
  table.insert(result, {k, v})
end

return result
`,o=`
local prefix = KEYS[1]
local first_timestamp = tonumber(ARGV[1]) -- First timestamp to check
local increment = tonumber(ARGV[2])       -- Increment between each timestamp
local num_timestamps = tonumber(ARGV[3])  -- Number of timestampts to check (24 for a day and 24 * 7 for a week)
local num_elements = tonumber(ARGV[4])    -- Number of elements to fetch in each category
local check_at_most = tonumber(ARGV[5])   -- Number of elements to check at most.

local keys = {}
for i = 1, num_timestamps do
  local timestamp = first_timestamp - (i - 1) * increment
  table.insert(keys, prefix .. ":" .. timestamp)
end

-- get the union of the groups
local zunion_params = {"ZUNION", num_timestamps, unpack(keys)}
table.insert(zunion_params, "WITHSCORES")
local result = redis.call(unpack(zunion_params))

-- select num_elements many items
local true_group = {}
local false_group = {}
local denied_group = {}
local true_count = 0
local false_count = 0
local denied_count = 0
local i = #result - 1

-- index to stop at after going through "checkAtMost" many items:
local cutoff_index = #result - 2 * check_at_most

-- iterate over the results
while (true_count + false_count + denied_count) < (num_elements * 3) and 1 <= i and i >= cutoff_index do
  local score = tonumber(result[i + 1])
  if score > 0 then
    local element = result[i]
    if string.find(element, "success\\":true") and true_count < num_elements then
      table.insert(true_group, {score, element})
      true_count = true_count + 1
    elseif string.find(element, "success\\":false") and false_count < num_elements then
      table.insert(false_group, {score, element})
      false_count = false_count + 1
    elseif string.find(element, "success\\":\\"denied") and denied_count < num_elements then
      table.insert(denied_group, {score, element})
      denied_count = denied_count + 1
    end
  end
  i = i - 2
end

return {true_group, false_group, denied_group}
`,c=`
local prefix = KEYS[1]
local first_timestamp = tonumber(ARGV[1])
local increment = tonumber(ARGV[2])
local num_timestamps = tonumber(ARGV[3])

local keys = {}
for i = 1, num_timestamps do
  local timestamp = first_timestamp - (i - 1) * increment
  table.insert(keys, prefix .. ":" .. timestamp)
end

-- get the union of the groups
local zunion_params = {"ZUNION", num_timestamps, unpack(keys)}
table.insert(zunion_params, "WITHSCORES")
local result = redis.call(unpack(zunion_params))

return result
`,l=class{redis;prefix;bucketSize;constructor(e){this.redis=e.redis,this.prefix=e.prefix??"@upstash/analytics",this.bucketSize=this.parseWindow(e.window)}validateTableName(e){if(!/^[a-zA-Z0-9_-]+$/.test(e))throw Error(`Invalid table name: ${e}. Table names can only contain letters, numbers, dashes and underscores.`)}parseWindow(e){if("number"==typeof e){if(e<=0)throw Error(`Invalid window: ${e}`);return e}let t=/^(\d+)([smhd])$/;if(!t.test(e))throw Error(`Invalid window: ${e}`);let[,r,n]=e.match(t),i=parseInt(r);switch(n){case"s":return 1e3*i;case"m":return 6e4*i;case"h":return 36e5*i;case"d":return 864e5*i;default:throw Error(`Invalid window unit: ${n}`)}}getBucket(e){return Math.floor((e??Date.now())/this.bucketSize)*this.bucketSize}async ingest(e,...t){this.validateTableName(e),await Promise.all(t.map(async t=>{let r=this.getBucket(t.time),n=[this.prefix,e,r].join(":");await this.redis.zincrby(n,1,JSON.stringify({...t,time:void 0}))}))}formatBucketAggregate(e,t,r){let n={};return e.forEach(([e,r])=>{"success"==t&&(e=1===e?"true":null===e?"false":e),n[t]=n[t]||{},n[t][(e??"null").toString()]=r}),{time:r,...n}}async aggregateBucket(e,t,r){this.validateTableName(e);let n=this.getBucket(r),i=[this.prefix,e,n].join(":"),s=await this.redis.eval(a,[i],[t]);return this.formatBucketAggregate(s,t,n)}async aggregateBuckets(e,t,r,n){this.validateTableName(e);let i=this.getBucket(n),s=[];for(let n=0;n<r;n+=1)s.push(this.aggregateBucket(e,t,i)),i-=this.bucketSize;return Promise.all(s)}async aggregateBucketsWithPipeline(e,t,r,n,i){this.validateTableName(e),i=i??48;let s=this.getBucket(n),o=[],c=this.redis.pipeline(),l=[];for(let n=1;n<=r;n+=1){let u=[this.prefix,e,s].join(":");c.eval(a,[u],[t]),o.push(s),s-=this.bucketSize,(n%i==0||n==r)&&(l.push(c.exec()),c=this.redis.pipeline())}return(await Promise.all(l)).flat().map((e,r)=>this.formatBucketAggregate(e,t,o[r]))}async getAllowedBlocked(e,t,r){this.validateTableName(e);let n=[this.prefix,e].join(":"),i=this.getBucket(r),s=await this.redis.eval(c,[n],[i,this.bucketSize,t]),a={};for(let e=0;e<s.length;e+=2){let t=s[e],r=t.identifier,n=+s[e+1];a[r]||(a[r]={success:0,blocked:0}),a[r][t.success?"success":"blocked"]=n}return a}async getMostAllowedBlocked(e,t,r,n,i){this.validateTableName(e);let s=[this.prefix,e].join(":"),a=this.getBucket(n),[c,l,u]=await this.redis.eval(o,[s],[a,this.bucketSize,t,r,i??5*r]);return{allowed:this.toDicts(c),ratelimited:this.toDicts(l),denied:this.toDicts(u)}}toDicts(e){let t=[];for(let r=0;r<e.length;r+=1){let n=+e[r][0],i=e[r][1];t.push({identifier:i.identifier,count:n})}return t}}},93563:(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},c={};o(c,{Analytics:()=>u,IpDenyList:()=>x,MultiRegionRatelimit:()=>j,Ratelimit:()=>D}),e.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let c of s(t))a.call(e,c)||c===r||n(e,c,{get:()=>t[c],enumerable:!(o=i(t,c))||o.enumerable});return e})(n({},"__esModule",{value:!0}),c);var l=r(69812),u=class{analytics;table="events";constructor(e){this.analytics=new l.Analytics({redis:e.redis,window:"1h",prefix:e.prefix??"@upstash/ratelimit",retention:"90d"})}extractGeo(e){return void 0!==e.geo?e.geo:void 0!==e.cf?e.cf:{}}async record(e){await this.analytics.ingest(this.table,e)}async series(e,t){let r=Math.min((this.analytics.getBucket(Date.now())-this.analytics.getBucket(t))/36e5,256);return this.analytics.aggregateBucketsWithPipeline(this.table,e,r)}async getUsage(e=0){let t=Math.min((this.analytics.getBucket(Date.now())-this.analytics.getBucket(e))/36e5,256);return await this.analytics.getAllowedBlocked(this.table,t)}async getUsageOverTime(e,t){return await this.analytics.aggregateBucketsWithPipeline(this.table,t,e)}async getMostAllowedBlocked(e,t,r){return t=t??5,this.analytics.getMostAllowedBlocked(this.table,e,t,void 0,r)}},d=class{cache;constructor(e){this.cache=e}isBlocked(e){if(!this.cache.has(e))return{blocked:!1,reset:0};let t=this.cache.get(e);return t<Date.now()?(this.cache.delete(e),{blocked:!1,reset:0}):{blocked:!0,reset:t}}blockUntil(e,t){this.cache.set(e,t)}set(e,t){this.cache.set(e,t)}get(e){return this.cache.get(e)||null}incr(e){let t=this.cache.get(e)??0;return t+=1,this.cache.set(e,t),t}pop(e){this.cache.delete(e)}empty(){this.cache.clear()}size(){return this.cache.size}};function h(e){let t=e.match(/^(\d+)\s?(ms|s|m|h|d)$/);if(!t)throw Error(`Unable to parse window size: ${e}`);let r=Number.parseInt(t[1]);switch(t[2]){case"ms":return r;case"s":return 1e3*r;case"m":return 6e4*r;case"h":return 36e5*r;case"d":return 864e5*r;default:throw Error(`Unable to parse window size: ${e}`)}}var p=async(e,t,r,n)=>{try{return await e.redis.evalsha(t.hash,r,n)}catch(i){if(`${i}`.includes("NOSCRIPT")){let i=await e.redis.scriptLoad(t.script);return i!==t.hash&&console.warn("Upstash Ratelimit: Expected hash and the hash received from Redis are different. Ratelimit will work as usual but performance will be reduced."),await e.redis.evalsha(i,r,n)}throw i}},f={singleRegion:{fixedWindow:{limit:{script:`
  local key           = KEYS[1]
  local window        = ARGV[1]
  local incrementBy   = ARGV[2] -- increment rate per request at a given value, default is 1

  local r = redis.call("INCRBY", key, incrementBy)
  if r == tonumber(incrementBy) then
  -- The first time this key is set, the value will be equal to incrementBy.
  -- So we only need the expire command once
  redis.call("PEXPIRE", key, window)
  end

  return r
`,hash:"b13943e359636db027ad280f1def143f02158c13"},getRemaining:{script:`
      local key = KEYS[1]
      local tokens = 0

      local value = redis.call('GET', key)
      if value then
          tokens = value
      end
      return tokens
    `,hash:"8c4c341934502aee132643ffbe58ead3450e5208"}},slidingWindow:{limit:{script:`
  local currentKey  = KEYS[1]           -- identifier including prefixes
  local previousKey = KEYS[2]           -- key of the previous bucket
  local tokens      = tonumber(ARGV[1]) -- tokens per window
  local now         = ARGV[2]           -- current timestamp in milliseconds
  local window      = ARGV[3]           -- interval in milliseconds
  local incrementBy = ARGV[4]           -- increment rate per request at a given value, default is 1

  local requestsInCurrentWindow = redis.call("GET", currentKey)
  if requestsInCurrentWindow == false then
    requestsInCurrentWindow = 0
  end

  local requestsInPreviousWindow = redis.call("GET", previousKey)
  if requestsInPreviousWindow == false then
    requestsInPreviousWindow = 0
  end
  local percentageInCurrent = ( now % window ) / window
  -- weighted requests to consider from the previous window
  requestsInPreviousWindow = math.floor(( 1 - percentageInCurrent ) * requestsInPreviousWindow)
  if requestsInPreviousWindow + requestsInCurrentWindow >= tokens then
    return -1
  end

  local newValue = redis.call("INCRBY", currentKey, incrementBy)
  if newValue == tonumber(incrementBy) then
    -- The first time this key is set, the value will be equal to incrementBy.
    -- So we only need the expire command once
    redis.call("PEXPIRE", currentKey, window * 2 + 1000) -- Enough time to overlap with a new window + 1 second
  end
  return tokens - ( newValue + requestsInPreviousWindow )
`,hash:"e1391e429b699c780eb0480350cd5b7280fd9213"},getRemaining:{script:`
  local currentKey  = KEYS[1]           -- identifier including prefixes
  local previousKey = KEYS[2]           -- key of the previous bucket
  local now         = ARGV[1]           -- current timestamp in milliseconds
  local window      = ARGV[2]           -- interval in milliseconds

  local requestsInCurrentWindow = redis.call("GET", currentKey)
  if requestsInCurrentWindow == false then
    requestsInCurrentWindow = 0
  end

  local requestsInPreviousWindow = redis.call("GET", previousKey)
  if requestsInPreviousWindow == false then
    requestsInPreviousWindow = 0
  end

  local percentageInCurrent = ( now % window ) / window
  -- weighted requests to consider from the previous window
  requestsInPreviousWindow = math.floor(( 1 - percentageInCurrent ) * requestsInPreviousWindow)

  return requestsInPreviousWindow + requestsInCurrentWindow
`,hash:"65a73ac5a05bf9712903bc304b77268980c1c417"}},tokenBucket:{limit:{script:`
  local key         = KEYS[1]           -- identifier including prefixes
  local maxTokens   = tonumber(ARGV[1]) -- maximum number of tokens
  local interval    = tonumber(ARGV[2]) -- size of the window in milliseconds
  local refillRate  = tonumber(ARGV[3]) -- how many tokens are refilled after each interval
  local now         = tonumber(ARGV[4]) -- current timestamp in milliseconds
  local incrementBy = tonumber(ARGV[5]) -- how many tokens to consume, default is 1
        
  local bucket = redis.call("HMGET", key, "refilledAt", "tokens")
        
  local refilledAt
  local tokens

  if bucket[1] == false then
    refilledAt = now
    tokens = maxTokens
  else
    refilledAt = tonumber(bucket[1])
    tokens = tonumber(bucket[2])
  end
        
  if now >= refilledAt + interval then
    local numRefills = math.floor((now - refilledAt) / interval)
    tokens = math.min(maxTokens, tokens + numRefills * refillRate)

    refilledAt = refilledAt + numRefills * interval
  end

  if tokens == 0 then
    return {-1, refilledAt + interval}
  end

  local remaining = tokens - incrementBy
  local expireAt = math.ceil(((maxTokens - remaining) / refillRate)) * interval
        
  redis.call("HSET", key, "refilledAt", refilledAt, "tokens", remaining)
  redis.call("PEXPIRE", key, expireAt)
  return {remaining, refilledAt + interval}
`,hash:"5bece90aeef8189a8cfd28995b479529e270b3c6"},getRemaining:{script:`
  local key         = KEYS[1]
  local maxTokens   = tonumber(ARGV[1])
        
  local bucket = redis.call("HMGET", key, "refilledAt", "tokens")

  if bucket[1] == false then
    return {maxTokens, -1}
  end
        
  return {tonumber(bucket[2]), tonumber(bucket[1])}
`,hash:"a15be2bb1db2a15f7c82db06146f9d08983900d0"}},cachedFixedWindow:{limit:{script:`
  local key     = KEYS[1]
  local window  = ARGV[1]
  local incrementBy   = ARGV[2] -- increment rate per request at a given value, default is 1

  local r = redis.call("INCRBY", key, incrementBy)
  if r == incrementBy then
  -- The first time this key is set, the value will be equal to incrementBy.
  -- So we only need the expire command once
  redis.call("PEXPIRE", key, window)
  end
      
  return r
`,hash:"c26b12703dd137939b9a69a3a9b18e906a2d940f"},getRemaining:{script:`
  local key = KEYS[1]
  local tokens = 0

  local value = redis.call('GET', key)
  if value then
      tokens = value
  end
  return tokens
`,hash:"8e8f222ccae68b595ee6e3f3bf2199629a62b91a"}}},multiRegion:{fixedWindow:{limit:{script:`
	local key           = KEYS[1]
	local id            = ARGV[1]
	local window        = ARGV[2]
	local incrementBy   = tonumber(ARGV[3])

	redis.call("HSET", key, id, incrementBy)
	local fields = redis.call("HGETALL", key)
	if #fields == 2 and tonumber(fields[2])==incrementBy then
	-- The first time this key is set, and the value will be equal to incrementBy.
	-- So we only need the expire command once
	  redis.call("PEXPIRE", key, window)
	end

	return fields
`,hash:"a8c14f3835aa87bd70e5e2116081b81664abcf5c"},getRemaining:{script:`
      local key = KEYS[1]
      local tokens = 0

      local fields = redis.call("HGETALL", key)

      return fields
    `,hash:"8ab8322d0ed5fe5ac8eb08f0c2e4557f1b4816fd"}},slidingWindow:{limit:{script:`
	local currentKey    = KEYS[1]           -- identifier including prefixes
	local previousKey   = KEYS[2]           -- key of the previous bucket
	local tokens        = tonumber(ARGV[1]) -- tokens per window
	local now           = ARGV[2]           -- current timestamp in milliseconds
	local window        = ARGV[3]           -- interval in milliseconds
	local requestId     = ARGV[4]           -- uuid for this request
	local incrementBy   = tonumber(ARGV[5]) -- custom rate, default is  1

	local currentFields = redis.call("HGETALL", currentKey)
	local requestsInCurrentWindow = 0
	for i = 2, #currentFields, 2 do
	requestsInCurrentWindow = requestsInCurrentWindow + tonumber(currentFields[i])
	end

	local previousFields = redis.call("HGETALL", previousKey)
	local requestsInPreviousWindow = 0
	for i = 2, #previousFields, 2 do
	requestsInPreviousWindow = requestsInPreviousWindow + tonumber(previousFields[i])
	end

	local percentageInCurrent = ( now % window) / window
	if requestsInPreviousWindow * (1 - percentageInCurrent ) + requestsInCurrentWindow >= tokens then
	  return {currentFields, previousFields, false}
	end

	redis.call("HSET", currentKey, requestId, incrementBy)

	if requestsInCurrentWindow == 0 then 
	  -- The first time this key is set, the value will be equal to incrementBy.
	  -- So we only need the expire command once
	  redis.call("PEXPIRE", currentKey, window * 2 + 1000) -- Enough time to overlap with a new window + 1 second
	end
	return {currentFields, previousFields, true}
`,hash:"cb4fdc2575056df7c6d422764df0de3a08d6753b"},getRemaining:{script:`
	local currentKey    = KEYS[1]           -- identifier including prefixes
	local previousKey   = KEYS[2]           -- key of the previous bucket
	local now         	= ARGV[1]           -- current timestamp in milliseconds
  	local window      	= ARGV[2]           -- interval in milliseconds

	local currentFields = redis.call("HGETALL", currentKey)
	local requestsInCurrentWindow = 0
	for i = 2, #currentFields, 2 do
	requestsInCurrentWindow = requestsInCurrentWindow + tonumber(currentFields[i])
	end

	local previousFields = redis.call("HGETALL", previousKey)
	local requestsInPreviousWindow = 0
	for i = 2, #previousFields, 2 do
	requestsInPreviousWindow = requestsInPreviousWindow + tonumber(previousFields[i])
	end

	local percentageInCurrent = ( now % window) / window
  	requestsInPreviousWindow = math.floor(( 1 - percentageInCurrent ) * requestsInPreviousWindow)
	
	return requestsInCurrentWindow + requestsInPreviousWindow
`,hash:"558c9306b7ec54abb50747fe0b17e5d44bd24868"}}}},m={script:`
      local pattern = KEYS[1]

      -- Initialize cursor to start from 0
      local cursor = "0"

      repeat
          -- Scan for keys matching the pattern
          local scan_result = redis.call('SCAN', cursor, 'MATCH', pattern)

          -- Extract cursor for the next iteration
          cursor = scan_result[1]

          -- Extract keys from the scan result
          local keys = scan_result[2]

          for i=1, #keys do
          redis.call('DEL', keys[i])
          end

      -- Continue scanning until cursor is 0 (end of keyspace)
      until cursor == "0"
    `,hash:"54bd274ddc59fb3be0f42deee2f64322a10e2b50"},y="denyList",b="ipDenyList",w="ipDenyListStatus",g=`
  -- Checks if values provideed in ARGV are present in the deny lists.
  -- This is done using the allDenyListsKey below.

  -- Additionally, checks the status of the ip deny list using the
  -- ipDenyListStatusKey below. Here are the possible states of the
  -- ipDenyListStatusKey key:
  -- * status == -1: set to "disabled" with no TTL
  -- * status == -2: not set, meaning that is was set before but expired
  -- * status  >  0: set to "valid", with a TTL
  --
  -- In the case of status == -2, we set the status to "pending" with
  -- 30 second ttl. During this time, the process which got status == -2
  -- will update the ip deny list.

  local allDenyListsKey     = KEYS[1]
  local ipDenyListStatusKey = KEYS[2]

  local results = redis.call('SMISMEMBER', allDenyListsKey, unpack(ARGV))
  local status  = redis.call('TTL', ipDenyListStatusKey)
  if status == -2 then
    redis.call('SETEX', ipDenyListStatusKey, 30, "pending")
  end

  return { results, status }
`,x={};o(x,{ThresholdError:()=>_,disableIpDenyList:()=>A,updateIpDenyList:()=>S});var v=e=>864e5-((e||Date.now())-72e5)%864e5,_=class extends Error{constructor(e){super(`Allowed threshold values are from 1 to 8, 1 and 8 included. Received: ${e}`),this.name="ThresholdError"}},k=async e=>{if("number"!=typeof e||e<1||e>8)throw new _(e);try{let t=await fetch(`https://raw.githubusercontent.com/stamparm/ipsum/master/levels/${e}.txt`);if(!t.ok)throw Error(`Error fetching data: ${t.statusText}`);return(await t.text()).split("\n").filter(e=>e.length>0)}catch(e){throw Error(`Failed to fetch ip deny list: ${e}`)}},S=async(e,t,r,n)=>{let i=await k(r),s=[t,y,"all"].join(":"),a=[t,y,b].join(":"),o=[t,w].join(":"),c=e.multi();return c.sdiffstore(s,s,a),c.del(a),c.sadd(a,i.at(0),...i.slice(1)),c.sdiffstore(a,a,s),c.sunionstore(s,s,a),c.set(o,"valid",{px:n??v()}),await c.exec()},A=async(e,t)=>{let r=[t,y,"all"].join(":"),n=[t,y,b].join(":"),i=[t,w].join(":"),s=e.multi();return s.sdiffstore(r,r,n),s.del(n),s.set(i,"disabled"),await s.exec()},E=new d(new Map),R=e=>e.find(e=>E.isBlocked(e).blocked),T=e=>{E.size()>1e3&&E.empty(),E.blockUntil(e,Date.now()+6e4)},O=async(e,t,r)=>{let n;let[i,s]=await e.eval(g,[[t,y,"all"].join(":"),[t,w].join(":")],r);return i.map((e,t)=>{e&&(T(r[t]),n=r[t])}),{deniedValue:n,invalidIpDenyList:-2===s}},P=(e,t,[r,n],i)=>{if(n.deniedValue&&(r.success=!1,r.remaining=0,r.reason="denyList",r.deniedValue=n.deniedValue),n.invalidIpDenyList){let n=S(e,t,i);r.pending=Promise.all([r.pending,n])}return r},C=e=>({success:!1,limit:0,remaining:0,reset:0,pending:Promise.resolve(),reason:"denyList",deniedValue:e}),I=class{limiter;ctx;prefix;timeout;primaryRedis;analytics;enableProtection;denyListThreshold;constructor(e){this.ctx=e.ctx,this.limiter=e.limiter,this.timeout=e.timeout??5e3,this.prefix=e.prefix??"@upstash/ratelimit",this.enableProtection=e.enableProtection??!1,this.denyListThreshold=e.denyListThreshold??6,this.primaryRedis="redis"in this.ctx?this.ctx.redis:this.ctx.regionContexts[0].redis,this.analytics=e.analytics?new u({redis:this.primaryRedis,prefix:this.prefix}):void 0,e.ephemeralCache instanceof Map?this.ctx.cache=new d(e.ephemeralCache):void 0===e.ephemeralCache&&(this.ctx.cache=new d(new Map))}limit=async(e,t)=>{let r=null;try{let n=this.getRatelimitResponse(e,t),{responseArray:i,newTimeoutId:s}=this.applyTimeout(n);r=s;let a=await Promise.race(i);return this.submitAnalytics(a,e,t)}finally{r&&clearTimeout(r)}};blockUntilReady=async(e,t)=>{let r;if(t<=0)throw Error("timeout must be positive");let n=Date.now()+t;for(;!(r=await this.limit(e)).success;){if(0===r.reset)throw Error("This should not happen");let e=Math.min(r.reset,n)-Date.now();if(await new Promise(t=>setTimeout(t,e)),Date.now()>n)break}return r};resetUsedTokens=async e=>{let t=[this.prefix,e].join(":");await this.limiter().resetTokens(this.ctx,t)};getRemaining=async e=>{let t=[this.prefix,e].join(":");return await this.limiter().getRemaining(this.ctx,t)};getRatelimitResponse=async(e,t)=>{let r=this.getKey(e),n=this.getDefinedMembers(e,t),i=R(n),s=i?[C(i),{deniedValue:i,invalidIpDenyList:!1}]:await Promise.all([this.limiter().limit(this.ctx,r,t?.rate),this.enableProtection?O(this.primaryRedis,this.prefix,n):{deniedValue:void 0,invalidIpDenyList:!1}]);return P(this.primaryRedis,this.prefix,s,this.denyListThreshold)};applyTimeout=e=>{let t=null,r=[e];if(this.timeout>0){let e=new Promise(e=>{t=setTimeout(()=>{e({success:!0,limit:0,remaining:0,reset:0,pending:Promise.resolve(),reason:"timeout"})},this.timeout)});r.push(e)}return{responseArray:r,newTimeoutId:t}};submitAnalytics=(e,t,r)=>{if(this.analytics)try{let n=r?this.analytics.extractGeo(r):void 0,i=this.analytics.record({identifier:"denyList"===e.reason?e.deniedValue:t,time:Date.now(),success:"denyList"===e.reason?"denied":e.success,...n}).catch(e=>{let t="Failed to record analytics";`${e}`.includes("WRONGTYPE")&&(t=`
    Failed to record analytics. See the information below:

    This can occur when you uprade to Ratelimit version 1.1.2
    or later from an earlier version.

    This occurs simply because the way we store analytics data
    has changed. To avoid getting this error, disable analytics
    for *an hour*, then simply enable it back.

    `),console.warn(t,e)});e.pending=Promise.all([e.pending,i])}catch(e){console.warn("Failed to record analytics",e)}return e};getKey=e=>[this.prefix,e].join(":");getDefinedMembers=(e,t)=>[e,t?.ip,t?.userAgent,t?.country].filter(Boolean)};function U(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length;for(let n=0;n<16;n++)e+=t.charAt(Math.floor(Math.random()*r));return e}var j=class extends I{constructor(e){super({prefix:e.prefix,limiter:e.limiter,timeout:e.timeout,analytics:e.analytics,ctx:{regionContexts:e.redis.map(e=>({redis:e})),cache:e.ephemeralCache?new d(e.ephemeralCache):void 0}})}static fixedWindow(e,t){let r=h(t);return()=>({async limit(t,n,i){if(t.cache){let{blocked:r,reset:i}=t.cache.isBlocked(n);if(r)return{success:!1,limit:e,remaining:0,reset:i,pending:Promise.resolve(),reason:"cacheBlock"}}let s=U(),a=Math.floor(Date.now()/r),o=[n,a].join(":"),c=i?Math.max(1,i):1,l=t.regionContexts.map(e=>({redis:e.redis,request:p(e,f.multiRegion.fixedWindow.limit,[o],[s,r,c])})),u=e-(await Promise.any(l.map(e=>e.request))).reduce((e,t,r)=>{let n=0;return r%2&&(n=Number.parseInt(t)),e+n},0);async function d(){let t=[...new Set((await Promise.all(l.map(e=>e.request))).flat().reduce((e,t,r)=>(r%2==0&&e.push(t),e),[])).values()];for(let r of l){let n=(await r.request).reduce((e,t,r)=>{let n=0;return r%2&&(n=Number.parseInt(t)),e+n},0),i=(await r.request).reduce((e,t,r)=>(r%2==0&&e.push(t),e),[]);if(n>=e)continue;let s=t.filter(e=>!i.includes(e));if(0!==s.length)for(let e of s)await r.redis.hset(o,{[e]:c})}}let h=u>0,m=(a+1)*r;return t.cache&&!h&&t.cache.blockUntil(n,m),{success:h,limit:e,remaining:u,reset:m,pending:d()}},async getRemaining(t,n){let i=Math.floor(Date.now()/r),s=[n,i].join(":"),a=t.regionContexts.map(e=>({redis:e.redis,request:p(e,f.multiRegion.fixedWindow.getRemaining,[s],[null])}));return{remaining:Math.max(0,e-(await Promise.any(a.map(e=>e.request))).reduce((e,t,r)=>{let n=0;return r%2&&(n=Number.parseInt(t)),e+n},0)),reset:(i+1)*r}},async resetTokens(e,t){let r=[t,"*"].join(":");e.cache&&e.cache.pop(t),await Promise.all(e.regionContexts.map(e=>{p(e,m,[r],[null])}))}})}static slidingWindow(e,t){let r=h(t),n=h(t);return()=>({async limit(t,i,s){if(t.cache){let{blocked:r,reset:n}=t.cache.isBlocked(i);if(r)return{success:!1,limit:e,remaining:0,reset:n,pending:Promise.resolve(),reason:"cacheBlock"}}let a=U(),o=Date.now(),c=Math.floor(o/r),l=[i,c].join(":"),u=[i,c-1].join(":"),d=s?Math.max(1,s):1,h=t.regionContexts.map(t=>({redis:t.redis,request:p(t,f.multiRegion.slidingWindow.limit,[l,u],[e,o,n,a,d])})),m=o%n/n,[y,b,w]=await Promise.any(h.map(e=>e.request));w&&y.push(a,d.toString());let g=b.reduce((e,t,r)=>{let n=0;return r%2&&(n=Number.parseInt(t)),e+n},0),x=e-(Math.ceil(g*(1-m))+y.reduce((e,t,r)=>{let n=0;return r%2&&(n=Number.parseInt(t)),e+n},0));async function v(){let t=[...new Set((await Promise.all(h.map(e=>e.request))).flatMap(([e])=>e).reduce((e,t,r)=>(r%2==0&&e.push(t),e),[])).values()];for(let r of h){let[n,i,s]=await r.request,a=n.reduce((e,t,r)=>(r%2==0&&e.push(t),e),[]);if(n.reduce((e,t,r)=>{let n=0;return r%2&&(n=Number.parseInt(t)),e+n},0)>=e)continue;let o=t.filter(e=>!a.includes(e));if(0!==o.length)for(let e of o)await r.redis.hset(l,{[e]:d})}}let _=(c+1)*n;return t.cache&&!w&&t.cache.blockUntil(i,_),{success:!!w,limit:e,remaining:Math.max(0,x),reset:_,pending:v()}},async getRemaining(t,n){let i=Date.now(),s=Math.floor(i/r),a=[n,s].join(":"),o=[n,s-1].join(":"),c=t.regionContexts.map(e=>({redis:e.redis,request:p(e,f.multiRegion.slidingWindow.getRemaining,[a,o],[i,r])}));return{remaining:Math.max(0,e-await Promise.any(c.map(e=>e.request))),reset:(s+1)*r}},async resetTokens(e,t){let r=[t,"*"].join(":");e.cache&&e.cache.pop(t),await Promise.all(e.regionContexts.map(e=>{p(e,m,[r],[null])}))}})}},D=class extends I{constructor(e){super({prefix:e.prefix,limiter:e.limiter,timeout:e.timeout,analytics:e.analytics,ctx:{redis:e.redis},ephemeralCache:e.ephemeralCache,enableProtection:e.enableProtection,denyListThreshold:e.denyListThreshold})}static fixedWindow(e,t){let r=h(t);return()=>({async limit(t,n,i){let s=Math.floor(Date.now()/r),a=[n,s].join(":");if(t.cache){let{blocked:r,reset:i}=t.cache.isBlocked(n);if(r)return{success:!1,limit:e,remaining:0,reset:i,pending:Promise.resolve(),reason:"cacheBlock"}}let o=i?Math.max(1,i):1,c=await p(t,f.singleRegion.fixedWindow.limit,[a],[r,o]),l=c<=e,u=Math.max(0,e-c),d=(s+1)*r;return t.cache&&!l&&t.cache.blockUntil(n,d),{success:l,limit:e,remaining:u,reset:d,pending:Promise.resolve()}},async getRemaining(t,n){let i=Math.floor(Date.now()/r),s=[n,i].join(":");return{remaining:Math.max(0,e-await p(t,f.singleRegion.fixedWindow.getRemaining,[s],[null])),reset:(i+1)*r}},async resetTokens(e,t){let r=[t,"*"].join(":");e.cache&&e.cache.pop(t),await p(e,m,[r],[null])}})}static slidingWindow(e,t){let r=h(t);return()=>({async limit(t,n,i){let s=Date.now(),a=Math.floor(s/r),o=[n,a].join(":"),c=[n,a-1].join(":");if(t.cache){let{blocked:r,reset:i}=t.cache.isBlocked(n);if(r)return{success:!1,limit:e,remaining:0,reset:i,pending:Promise.resolve(),reason:"cacheBlock"}}let l=i?Math.max(1,i):1,u=await p(t,f.singleRegion.slidingWindow.limit,[o,c],[e,s,r,l]),d=u>=0,h=(a+1)*r;return t.cache&&!d&&t.cache.blockUntil(n,h),{success:d,limit:e,remaining:Math.max(0,u),reset:h,pending:Promise.resolve()}},async getRemaining(t,n){let i=Date.now(),s=Math.floor(i/r),a=[n,s].join(":"),o=[n,s-1].join(":");return{remaining:Math.max(0,e-await p(t,f.singleRegion.slidingWindow.getRemaining,[a,o],[i,r])),reset:(s+1)*r}},async resetTokens(e,t){let r=[t,"*"].join(":");e.cache&&e.cache.pop(t),await p(e,m,[r],[null])}})}static tokenBucket(e,t,r){let n=h(t);return()=>({async limit(t,i,s){if(t.cache){let{blocked:e,reset:n}=t.cache.isBlocked(i);if(e)return{success:!1,limit:r,remaining:0,reset:n,pending:Promise.resolve(),reason:"cacheBlock"}}let a=Date.now(),o=s?Math.max(1,s):1,[c,l]=await p(t,f.singleRegion.tokenBucket.limit,[i],[r,n,e,a,o]),u=c>=0;return t.cache&&!u&&t.cache.blockUntil(i,l),{success:u,limit:r,remaining:c,reset:l,pending:Promise.resolve()}},async getRemaining(e,t){let[i,s]=await p(e,f.singleRegion.tokenBucket.getRemaining,[t],[r]),a=Date.now()+n,o=s+n;return{remaining:i,reset:-1===s?a:o}},async resetTokens(e,t){e.cache&&e.cache.pop(t),await p(e,m,[t],[null])}})}static cachedFixedWindow(e,t){let r=h(t);return()=>({async limit(t,n,i){if(!t.cache)throw Error("This algorithm requires a cache");let s=Math.floor(Date.now()/r),a=[n,s].join(":"),o=(s+1)*r,c=i?Math.max(1,i):1;if("number"==typeof t.cache.get(a)){let n=t.cache.incr(a),i=n<e,s=i?p(t,f.singleRegion.cachedFixedWindow.limit,[a],[r,c]):Promise.resolve();return{success:i,limit:e,remaining:e-n,reset:o,pending:s}}let l=await p(t,f.singleRegion.cachedFixedWindow.limit,[a],[r,c]);t.cache.set(a,l);let u=e-l;return{success:u>=0,limit:e,remaining:u,reset:o,pending:Promise.resolve()}},async getRemaining(t,n){if(!t.cache)throw Error("This algorithm requires a cache");let i=Math.floor(Date.now()/r),s=[n,i].join(":");return"number"==typeof t.cache.get(s)?{remaining:Math.max(0,e-(t.cache.get(s)??0)),reset:(i+1)*r}:{remaining:Math.max(0,e-await p(t,f.singleRegion.cachedFixedWindow.getRemaining,[s],[null])),reset:(i+1)*r}},async resetTokens(e,t){if(!e.cache)throw Error("This algorithm requires a cache");let n=[t,Math.floor(Date.now()/r)].join(":");e.cache.pop(n);let i=[t,"*"].join(":");await p(e,m,[i],[null])}})}}},97748:function(e,t,r){var n,i,s;e=r.nmd(e),i=[],void 0!==(s="function"==typeof(n=function(){"use strict";var t,n={},i=null;function s(t){if(e&&e.exports)try{return r(55511).randomBytes(t)}catch(e){}try{var n;return(self.crypto||self.msCrypto).getRandomValues(n=new Uint32Array(t)),Array.prototype.slice.call(n)}catch(e){}if(!i)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return i(t)}try{s(1)}catch(e){}function a(e,t){for(var r=0,n=0,i=0,s=e.length;i<s;++i)e.charCodeAt(i)===t.charCodeAt(i)?++r:++n;return!(r<0)&&0===n}i=null,n.setRandomFallback=function(e){i=e},n.genSaltSync=function(e,t){if("number"!=typeof(e=e||m))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2a$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(d(s(f),f)),r.join("")},n.genSalt=function(e,t,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e&&(r=e,e=void 0),void 0===e)e=m;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function i(t){o(function(){try{t(null,n.genSaltSync(e))}catch(e){t(e)}})}if(!r)return new Promise(function(e,t){i(function(r,n){if(r){t(r);return}e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);i(r)},n.hashSync=function(e,t){if(void 0===t&&(t=m),"number"==typeof t&&(t=n.genSaltSync(t)),"string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return k(e,t)},n.hash=function(e,t,r,i){function s(r){"string"==typeof e&&"number"==typeof t?n.genSalt(t,function(t,n){k(e,n,r,i)}):"string"==typeof e&&"string"==typeof t?k(e,t,r,i):o(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!r)return new Promise(function(e,t){s(function(r,n){if(r){t(r);return}e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);s(r)},n.compareSync=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&a(n.hashSync(e,t.substr(0,t.length-31)),t)},n.compare=function(e,t,r,i){function s(r){if("string"!=typeof e||"string"!=typeof t){o(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(60!==t.length){o(r.bind(this,null,!1));return}n.hash(e,t.substr(0,29),function(e,n){e?r(e):r(null,a(n,t))},i)}if(!r)return new Promise(function(e,t){s(function(r,n){if(r){t(r);return}e(n)})});if("function"!=typeof r)throw Error("Illegal callback: "+typeof r);s(r)},n.getRounds=function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},n.getSalt=function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)};var o="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout,c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function d(e,t){var r,n,i=0,s=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(r=255&e[i++],s.push(c[r>>2&63]),r=(3&r)<<4,i>=t||(r|=(n=255&e[i++])>>4&15,s.push(c[63&r]),r=(15&n)<<2,i>=t)){s.push(c[63&r]);break}r|=(n=255&e[i++])>>6&3,s.push(c[63&r]),s.push(c[63&n])}return s.join("")}function h(e,t){var r,n,i,s,a,o=0,c=e.length,d=0,h=[];if(t<=0)throw Error("Illegal len: "+t);for(;o<c-1&&d<t&&(r=(a=e.charCodeAt(o++))<l.length?l[a]:-1,n=(a=e.charCodeAt(o++))<l.length?l[a]:-1,-1!=r&&-1!=n)&&(s=r<<2>>>0|(48&n)>>4,h.push(u(s)),!(++d>=t||o>=c||-1==(i=(a=e.charCodeAt(o++))<l.length?l[a]:-1)||(s=(15&n)<<4>>>0|(60&i)>>2,h.push(u(s)),++d>=t||o>=c)));)s=(3&i)<<6>>>0|((a=e.charCodeAt(o++))<l.length?l[a]:-1),h.push(u(s)),++d;var p=[];for(o=0;o<d;o++)p.push(h[o].charCodeAt(0));return p}var p=((t={}).MAX_CODEPOINT=1114111,t.encodeUTF8=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):(r<2048?t(r>>6&31|192):(r<65536?t(r>>12&15|224):(t(r>>18&7|240),t(r>>12&63|128)),t(r>>6&63|128)),t(63&r|128)),r=null},t.decodeUTF8=function(e,t){for(var r,n,i,s,a=function(e){var t=Error((e=e.slice(0,e.indexOf(null))).toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if((128&r)==0)t(r);else if((224&r)==192)null===(n=e())&&a([r,n]),t((31&r)<<6|63&n);else if((240&r)==224)(null===(n=e())||null===(i=e()))&&a([r,n,i]),t((15&r)<<12|(63&n)<<6|63&i);else if((248&r)==240)(null===(n=e())||null===(i=e())||null===(s=e()))&&a([r,n,i,s]),t((7&r)<<18|(63&n)<<12|(63&i)<<6|63&s);else throw RangeError("Illegal starting byte: "+r)},t.UTF16toUTF8=function(e,t){for(var r,n=null;null!==(r=null!==n?n:e());){if(r>=55296&&r<=57343&&null!==(n=e())&&n>=56320&&n<=57343){t((r-55296)*1024+n-56320+65536),n=null;continue}t(r)}null!==n&&t(n)},t.UTF8toUTF16=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(t(((r-=65536)>>10)+55296),t(r%1024+56320)),r=null},t.encodeUTF16toUTF8=function(e,r){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,r)})},t.decodeUTF8toUTF16=function(e,r){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,r)})},t.calculateCodePoint=function(e){return e<128?1:e<2048?2:e<65536?3:4},t.calculateUTF8=function(e){for(var r,n=0;null!==(r=e());)n+=t.calculateCodePoint(r);return n},t.calculateUTF16asUTF8=function(e){var r=0,n=0;return t.UTF16toUTF8(e,function(e){++r,n+=t.calculateCodePoint(e)}),[r,n]},t);Date.now=Date.now||function(){return+new Date};var f=16,m=10,y=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],b=[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a,0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7,0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0,0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6],w=[0x4f727068,0x65616e42,0x65686f6c,0x64657253,0x63727944,0x6f756274];function g(e,t,r,n){var i=e[t],s=e[t+1];return i^=r[0],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[1],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[2],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[3],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[4],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[5],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[6],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[7],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[8],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[9],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[10],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[11],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[12],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[13],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[14],s^=(n[i>>>24]+n[256|i>>16&255]^n[512|i>>8&255])+n[768|255&i]^r[15],i^=(n[s>>>24]+n[256|s>>16&255]^n[512|s>>8&255])+n[768|255&s]^r[16],e[t]=s^r[17],e[t+1]=i,e}function x(e,t){for(var r=0,n=0;r<4;++r)n=n<<8|255&e[t],t=(t+1)%e.length;return{key:n,offp:t}}function v(e,t,r){for(var n,i=0,s=[0,0],a=t.length,o=r.length,c=0;c<a;c++)i=(n=x(e,i)).offp,t[c]=t[c]^n.key;for(c=0;c<a;c+=2)s=g(s,0,t,r),t[c]=s[0],t[c+1]=s[1];for(c=0;c<o;c+=2)s=g(s,0,t,r),r[c]=s[0],r[c+1]=s[1]}function _(e,t,r,n,i){var s,a,c=w.slice(),l=c.length;if(r<4||r>31){if(a=Error("Illegal number of rounds (4-31): "+r),n){o(n.bind(this,a));return}throw a}if(t.length!==f){if(a=Error("Illegal salt length: "+t.length+" != "+f),n){o(n.bind(this,a));return}throw a}r=1<<r>>>0;var u,d,h,p=0;function m(){if(i&&i(p/r),p<r)for(var s=Date.now();p<r&&(p+=1,v(e,u,d),v(t,u,d),!(Date.now()-s>100)););else{for(p=0;p<64;p++)for(h=0;h<l>>1;h++)g(c,h<<1,u,d);var a=[];for(p=0;p<l;p++)a.push((c[p]>>24&255)>>>0),a.push((c[p]>>16&255)>>>0),a.push((c[p]>>8&255)>>>0),a.push((255&c[p])>>>0);return n?void n(null,a):a}n&&o(m)}if(Int32Array?(u=new Int32Array(y),d=new Int32Array(b)):(u=y.slice(),d=b.slice()),function(e,t,r,n){for(var i,s=0,a=[0,0],o=r.length,c=n.length,l=0;l<o;l++)s=(i=x(t,s)).offp,r[l]=r[l]^i.key;for(l=0,s=0;l<o;l+=2)s=(i=x(e,s)).offp,a[0]^=i.key,s=(i=x(e,s)).offp,a[1]^=i.key,a=g(a,0,r,n),r[l]=a[0],r[l+1]=a[1];for(l=0;l<c;l+=2)s=(i=x(e,s)).offp,a[0]^=i.key,s=(i=x(e,s)).offp,a[1]^=i.key,a=g(a,0,r,n),n[l]=a[0],n[l+1]=a[1]}(t,e,u,d),void 0!==n)m();else for(;;)if(void 0!==(s=m()))return s||[]}function k(e,t,r,n){if("string"!=typeof e||"string"!=typeof t){if(c=Error("Invalid string / salt: Not a string"),r){o(r.bind(this,c));return}throw c}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(c=Error("Invalid salt version: "+t.substring(0,2)),r){o(r.bind(this,c));return}throw c}if("$"===t.charAt(2))l="\0",u=3;else{if("a"!==(l=t.charAt(2))&&"b"!==l&&"y"!==l||"$"!==t.charAt(3)){if(c=Error("Invalid salt revision: "+t.substring(2,4)),r){o(r.bind(this,c));return}throw c}u=4}if(t.charAt(u+2)>"$"){if(c=Error("Missing salt rounds"),r){o(r.bind(this,c));return}throw c}var i,s,a,c,l,u,m=10*parseInt(t.substring(u,u+1),10)+parseInt(t.substring(u+1,u+2),10),y=t.substring(u+3,u+25);e+=l>="a"?"\0":"";var b=(i=e,s=[],a=0,p.encodeUTF16toUTF8(function(){return a>=i.length?null:i.charCodeAt(a++)},function(e){s.push(e)}),s),g=h(y,f);function x(e){var t=[];return t.push("$2"),l>="a"&&t.push(l),t.push("$"),m<10&&t.push("0"),t.push(m.toString()),t.push("$"),t.push(d(g,g.length)),t.push(d(e,4*w.length-1)),t.join("")}if(void 0===r)return x(_(b,g,m));_(b,g,m,function(e,t){e?r(e,null):r(null,x(t))},n)}return n.encodeBase64=d,n.decodeBase64=h,n})?n.apply(t,i):n)&&(e.exports=s)},8805:(e,t,r)=>{e.exports=r(97748)},42385:(e,t,r)=>{"use strict";r.d(t,{UL:()=>n.U,b3:()=>i.b});var n=r(53825),i=r(50406);r(99863)},99184:(e,t,r)=>{"use strict";var n=r(37432);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},26676:(e,t,r)=>{"use strict";function n(){throw Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(78620).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},43943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return i}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},78620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HTTPAccessErrorStatus:function(){return r},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return i},getAccessFallbackErrorTypeByStatus:function(){return o},getAccessFallbackHTTPStatus:function(){return a},isHTTPAccessFallbackError:function(){return s}});let r={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},n=new Set(Object.values(r)),i="NEXT_HTTP_ERROR_FALLBACK";function s(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===i&&n.has(Number(r))}function a(e){return Number(e.digest.split(";")[1])}function o(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},82432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return s}});let n=r(78620),i=r(58512);function s(e){return(0,i.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return i.RedirectType},forbidden:function(){return a.forbidden},notFound:function(){return s.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return c.unstable_rethrow}});let n=r(937),i=r(58512),s=r(87895),a=r(26676),o=r(54507),c=r(68727);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},87895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let n=""+r(78620).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Error(n);throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},58512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return s},isRedirectError:function(){return a}});let n=r(59738),i="NEXT_REDIRECT";var s=function(e){return e.push="push",e.replace="replace",e}({});function a(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,s]=t,a=t.slice(2,-2).join(";"),o=Number(t.at(-2));return r===i&&("replace"===s||"push"===s)&&"string"==typeof a&&!isNaN(o)&&o in n.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},59738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return c},redirect:function(){return o}});let n=r(19121),i=r(59738),s=r(58512);function a(e,t,r){void 0===r&&(r=i.RedirectStatusCode.TemporaryRedirect);let n=Error(s.REDIRECT_ERROR_CODE);return n.digest=s.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",n}function o(e,t){let r=n.actionAsyncStorage.getStore();throw a(e,t||((null==r?void 0:r.isAction)?s.RedirectType.push:s.RedirectType.replace),i.RedirectStatusCode.TemporaryRedirect)}function c(e,t){throw void 0===t&&(t=s.RedirectType.replace),a(e,t,i.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,s.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,s.isRedirectError)(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function d(e){if(!(0,s.isRedirectError)(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},84441:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{StaticGenBailoutError:function(){return n},isStaticGenBailoutError:function(){return i}});let r="NEXT_STATIC_GEN_BAILOUT";class n extends Error{constructor(...e){super(...e),this.code=r}}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54507:(e,t,r)=>{"use strict";function n(){throw Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(78620).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,s.isBailoutToCSRError)(t)||(0,n.isDynamicUsageError)(t)||(0,i.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(76850),i=r(57063),s=r(43548),a=r(82432);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6003:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s={};function a(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function c(e){var t,r;if(!e)return;let[[n,i],...s]=o(e),{domain:a,expires:c,httponly:d,maxage:h,path:p,samesite:f,secure:m,partitioned:y,priority:b}=Object.fromEntries(s.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}({name:n,value:decodeURIComponent(i),domain:a,...c&&{expires:new Date(c)},...d&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:p,...f&&{sameSite:l.includes(t=(t=f).toLowerCase())?t:void 0},...m&&{secure:!0},...b&&{priority:u.includes(r=(r=b).toLowerCase())?r:void 0},...y&&{partitioned:!0}})}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(s,{RequestCookies:()=>d,ResponseCookies:()=>h,parseCookie:()=>o,parseSetCookie:()=>c,stringifyCookie:()=>a}),e.exports=((e,s,a,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let c of n(s))i.call(e,c)||c===a||t(e,c,{get:()=>s[c],enumerable:!(o=r(s,c))||o.enumerable});return e})(t({},"__esModule",{value:!0}),s);var l=["strict","lax","none"],u=["low","medium","high"],d=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of o(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>a(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>a(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},h=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,s,a=[],o=0;function c(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;c();)if(","===(r=e.charAt(o))){for(n=o,o+=1,c(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}(i)){let t=c(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=a(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a).join("; ")}}},26699:(e,t,r)=>{var n;(()=>{var i={226:function(i,s){!function(a,o){"use strict";var c="function",l="undefined",u="object",d="string",h="major",p="model",f="name",m="type",y="vendor",b="version",w="architecture",g="console",x="mobile",v="tablet",_="smarttv",k="wearable",S="embedded",A="Amazon",E="Apple",R="ASUS",T="BlackBerry",O="Browser",P="Chrome",C="Firefox",I="Google",U="Huawei",j="Microsoft",D="Motorola",$="Opera",N="Samsung",L="Sharp",M="Sony",H="Xiaomi",W="Zebra",K="Facebook",B="Chromium OS",z="Mac OS",q=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},J=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},F=function(e,t){return typeof e===d&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===l?e:e.substring(0,350)},X=function(e,t){for(var r,n,i,s,a,l,d=0;d<t.length&&!a;){var h=t[d],p=t[d+1];for(r=n=0;r<h.length&&!a&&h[r];)if(a=h[r++].exec(e))for(i=0;i<p.length;i++)l=a[++n],typeof(s=p[i])===u&&s.length>0?2===s.length?typeof s[1]==c?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==c||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):void 0:this[s[0]]=l?s[1].call(this,l,s[2]):void 0:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):void 0):this[s]=l||o;d+=2}},Y=function(e,t){for(var r in t)if(typeof t[r]===u&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(F(t[r][n],e))return"?"===r?o:r}else if(F(t[r],e))return"?"===r?o:r;return e},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,b],[/opios[\/ ]+([\w\.]+)/i],[b,[f,$+" Mini"]],[/\bopr\/([\w\.]+)/i],[b,[f,$]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,b],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[f,"UC"+O]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[b,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[b,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+O],b],[/\bfocus\/([\w\.]+)/i],[b,[f,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[f,$+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[f,$+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[f,"MIUI "+O]],[/fxios\/([-\w\.]+)/i],[b,[f,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+O],b],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,b],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,K],b],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[f,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,P+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[f,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[b,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[f,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,b],[/(cobalt)\/([\w\.]+)/i],[f,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,G]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[y,N],[m,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[y,N],[m,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[y,E],[m,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[y,E],[m,v]],[/(macintosh);/i],[p,[y,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[y,L],[m,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[y,U],[m,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[y,U],[m,x]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[y,H],[m,x]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[y,H],[m,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[y,"OPPO"],[m,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[y,"Vivo"],[m,x]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[y,"Realme"],[m,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[y,D],[m,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[y,D],[m,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[y,"LG"],[m,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[y,"LG"],[m,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[y,"Lenovo"],[m,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[y,"Nokia"],[m,x]],[/(pixel c)\b/i],[p,[y,I],[m,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[y,I],[m,x]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[y,M],[m,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[y,M],[m,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[y,"OnePlus"],[m,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[y,A],[m,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[y,A],[m,x]],[/(playbook);[-\w\),; ]+(rim)/i],[p,y,[m,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[y,T],[m,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[y,R],[m,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[y,R],[m,x]],[/(nexus 9)/i],[p,[y,"HTC"],[m,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[p,/_/g," "],[m,x]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[y,"Acer"],[m,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[y,"Meizu"],[m,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,p,[m,x]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,p,[m,v]],[/(surface duo)/i],[p,[y,j],[m,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[y,"Fairphone"],[m,x]],[/(u304aa)/i],[p,[y,"AT&T"],[m,x]],[/\bsie-(\w*)/i],[p,[y,"Siemens"],[m,x]],[/\b(rct\w+) b/i],[p,[y,"RCA"],[m,v]],[/\b(venue[\d ]{2,7}) b/i],[p,[y,"Dell"],[m,v]],[/\b(q(?:mv|ta)\w+) b/i],[p,[y,"Verizon"],[m,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[y,"Barnes & Noble"],[m,v]],[/\b(tm\d{3}\w+) b/i],[p,[y,"NuVision"],[m,v]],[/\b(k88) b/i],[p,[y,"ZTE"],[m,v]],[/\b(nx\d{3}j) b/i],[p,[y,"ZTE"],[m,x]],[/\b(gen\d{3}) b.+49h/i],[p,[y,"Swiss"],[m,x]],[/\b(zur\d{3}) b/i],[p,[y,"Swiss"],[m,v]],[/\b((zeki)?tb.*\b) b/i],[p,[y,"Zeki"],[m,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],p,[m,v]],[/\b(ns-?\w{0,9}) b/i],[p,[y,"Insignia"],[m,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[y,"NextBook"],[m,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],p,[m,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],p,[m,x]],[/\b(ph-1) /i],[p,[y,"Essential"],[m,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[y,"Envizen"],[m,v]],[/\b(trio[-\w\. ]+) b/i],[p,[y,"MachSpeed"],[m,v]],[/\btu_(1491) b/i],[p,[y,"Rotor"],[m,v]],[/(shield[\w ]+) b/i],[p,[y,"Nvidia"],[m,v]],[/(sprint) (\w+)/i],[y,p,[m,x]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[y,j],[m,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[y,W],[m,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[y,W],[m,x]],[/smart-tv.+(samsung)/i],[y,[m,_]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[y,N],[m,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,"LG"],[m,_]],[/(apple) ?tv/i],[y,[p,E+" TV"],[m,_]],[/crkey/i],[[p,P+"cast"],[y,I],[m,_]],[/droid.+aft(\w)( bui|\))/i],[p,[y,A],[m,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[y,L],[m,_]],[/(bravia[\w ]+)( bui|\))/i],[p,[y,M],[m,_]],[/(mitv-\w{5}) bui/i],[p,[y,H],[m,_]],[/Hbbtv.*(technisat) (.*);/i],[y,p,[m,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,V],[p,V],[m,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,p,[m,g]],[/droid.+; (shield) bui/i],[p,[y,"Nvidia"],[m,g]],[/(playstation [345portablevi]+)/i],[p,[y,M],[m,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[y,j],[m,g]],[/((pebble))app/i],[y,p,[m,k]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[y,E],[m,k]],[/droid.+; (glass) \d/i],[p,[y,I],[m,k]],[/droid.+; (wt63?0{2,3})\)/i],[p,[y,W],[m,k]],[/(quest( 2| pro)?)/i],[p,[y,K],[m,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[m,S]],[/(aeobc)\b/i],[p,[y,A],[m,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[m,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[m,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,x]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,b],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[b,Y,Z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[b,Y,Z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,z],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,b],[/\(bb(10);/i],[b,[f,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[f,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[b,[f,P+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,B],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,b],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,b]]},ee=function(e,t){if(typeof e===u&&(t=e,e=o),!(this instanceof ee))return new ee(e,t).getResult();var r=typeof a!==l&&a.navigator?a.navigator:o,n=e||(r&&r.userAgent?r.userAgent:""),i=r&&r.userAgentData?r.userAgentData:o,s=t?q(Q,t):Q,g=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[f]=o,t[b]=o,X.call(t,n,s.browser),t[h]=typeof(e=t[b])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:o,g&&r&&r.brave&&typeof r.brave.isBrave==c&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[w]=o,X.call(e,n,s.cpu),e},this.getDevice=function(){var e={};return e[y]=o,e[p]=o,e[m]=o,X.call(e,n,s.device),g&&!e[m]&&i&&i.mobile&&(e[m]=x),g&&"Macintosh"==e[p]&&r&&typeof r.standalone!==l&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[p]="iPad",e[m]=v),e},this.getEngine=function(){var e={};return e[f]=o,e[b]=o,X.call(e,n,s.engine),e},this.getOS=function(){var e={};return e[f]=o,e[b]=o,X.call(e,n,s.os),g&&!e[f]&&i&&"Unknown"!=i.platform&&(e[f]=i.platform.replace(/chrome os/i,B).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===d&&e.length>350?V(e,350):e,this},this.setUA(n),this};ee.VERSION="1.0.35",ee.BROWSER=J([f,b,h]),ee.CPU=J([w]),ee.DEVICE=J([p,y,m,g,x,_,v,k,S]),ee.ENGINE=ee.OS=J([f,b]),typeof s!==l?(i.exports&&(s=i.exports=ee),s.UAParser=ee):r.amdO?void 0!==(n=(function(){return ee}).call(t,r,t,e))&&(e.exports=n):typeof a!==l&&(a.UAParser=ee);var et=typeof a!==l&&(a.jQuery||a.Zepto);if(et&&!et.ua){var er=new ee;et.ua=er.getResult(),et.ua.get=function(){return er.getUA()},et.ua.set=function(e){er.setUA(e);var t=er.getResult();for(var r in t)et.ua[r]=t[r]}}}("object"==typeof window?window:this)}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},n=!0;try{i[e].call(r.exports,r,r.exports,a),n=!1}finally{n&&delete s[e]}return r.exports}a.ab=__dirname+"/";var o=a(226);e.exports=o})()},76850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return o}});let n=r(43943),i=r(43548),s=r(82432),a=r(1301),o=e=>(0,n.isDynamicServerError)(e)||(0,i.isBailoutToCSRError)(e)||(0,s.isNextRouterError)(e)||(0,a.isDynamicPostpone)(e)},52441:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_SUFFIX:function(){return d},APP_DIR_ALIAS:function(){return I},CACHE_ONE_YEAR:function(){return S},DOT_NEXT_ALIAS:function(){return P},ESLINT_DEFAULT_DIRS:function(){return Y},GSP_NO_RETURNED_VALUE:function(){return q},GSSP_COMPONENT_MEMBER_ERROR:function(){return G},GSSP_NO_RETURNED_VALUE:function(){return J},INFINITE_CACHE:function(){return A},INSTRUMENTATION_HOOK_FILENAME:function(){return T},MATCHED_PATH_HEADER:function(){return i},MIDDLEWARE_FILENAME:function(){return E},MIDDLEWARE_LOCATION_REGEXP:function(){return R},NEXT_BODY_SUFFIX:function(){return f},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return k},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return b},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return w},NEXT_CACHE_SOFT_TAGS_HEADER:function(){return y},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return _},NEXT_CACHE_TAGS_HEADER:function(){return m},NEXT_CACHE_TAG_MAX_ITEMS:function(){return x},NEXT_CACHE_TAG_MAX_LENGTH:function(){return v},NEXT_DATA_SUFFIX:function(){return h},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return n},NEXT_META_SUFFIX:function(){return p},NEXT_QUERY_PARAM_PREFIX:function(){return r},NEXT_RESUME_HEADER:function(){return g},NON_STANDARD_NODE_ENV:function(){return V},PAGES_DIR_ALIAS:function(){return O},PRERENDER_REVALIDATE_HEADER:function(){return s},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return a},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return M},ROOT_DIR_ALIAS:function(){return C},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return L},RSC_ACTION_ENCRYPTION_ALIAS:function(){return N},RSC_ACTION_PROXY_ALIAS:function(){return D},RSC_ACTION_VALIDATE_ALIAS:function(){return j},RSC_CACHE_WRAPPER_ALIAS:function(){return $},RSC_MOD_REF_PROXY_ALIAS:function(){return U},RSC_PREFETCH_SUFFIX:function(){return o},RSC_SEGMENTS_DIR_SUFFIX:function(){return c},RSC_SEGMENT_SUFFIX:function(){return l},RSC_SUFFIX:function(){return u},SERVER_PROPS_EXPORT_ERROR:function(){return z},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return W},SERVER_PROPS_SSG_CONFLICT:function(){return K},SERVER_RUNTIME:function(){return Z},SSG_FALLBACK_EXPORT_ERROR:function(){return X},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return H},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return B},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return F},WEBPACK_LAYERS:function(){return ee},WEBPACK_RESOURCE_QUERIES:function(){return et}});let r="nxtP",n="nxtI",i="x-matched-path",s="x-prerender-revalidate",a="x-prerender-revalidate-if-generated",o=".prefetch.rsc",c=".segments",l=".segment.rsc",u=".rsc",d=".action",h=".json",p=".meta",f=".body",m="x-next-cache-tags",y="x-next-cache-soft-tags",b="x-next-revalidated-tags",w="x-next-revalidate-tag-token",g="next-resume",x=128,v=256,_=1024,k="_N_T_",S=31536e3,A=0xfffffffe,E="middleware",R=`(?:src/)?${E}`,T="instrumentation",O="private-next-pages",P="private-dot-next",C="private-next-root-dir",I="private-next-app-dir",U="next/dist/build/webpack/loaders/next-flight-loader/module-proxy",j="private-next-rsc-action-validate",D="private-next-rsc-server-reference",$="private-next-rsc-cache-wrapper",N="private-next-rsc-action-encryption",L="private-next-rsc-action-client-wrapper",M="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",H="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",W="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",K="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",B="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",z="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",q="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",J="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",F="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",G="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",V='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',X="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",Y=["app","pages","components","lib","src"],Z={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},Q={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser"},ee={...Q,GROUP:{builtinReact:[Q.reactServerComponents,Q.actionBrowser],serverOnly:[Q.reactServerComponents,Q.actionBrowser,Q.instrument,Q.middleware],neutralTarget:[Q.api],clientOnly:[Q.serverSideRendering,Q.appPagesBrowser],bundled:[Q.reactServerComponents,Q.actionBrowser,Q.serverSideRendering,Q.appPagesBrowser,Q.shared,Q.instrument],appPages:[Q.reactServerComponents,Q.serverSideRendering,Q.appPagesBrowser,Q.actionBrowser]}},et={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},81791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{METADATA_BOUNDARY_NAME:function(){return r},OUTLET_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return n}});let r="__next_metadata_boundary__",n="__next_viewport_boundary__",i="__next_outlet_boundary__"},2543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"after",{enumerable:!0,get:function(){return i}});let n=r(29294);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context");let{afterContext:r}=t;return r.after(e)}},95373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})}(r(2543),t)},1301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{Postpone:function(){return k},abortAndThrowOnSynchronousRequestDataAccess:function(){return v},abortOnSynchronousPlatformIOAccess:function(){return g},accessedDynamicData:function(){return C},annotateDynamicAccess:function(){return $},consumeDynamicAccess:function(){return I},createDynamicTrackingState:function(){return d},createDynamicValidationState:function(){return h},createPostponedAbortSignal:function(){return D},formatDynamicAPIAccesses:function(){return U},getFirstDynamicReason:function(){return p},isDynamicPostpone:function(){return E},isPrerenderInterruptedError:function(){return P},markCurrentScopeAsDynamic:function(){return f},postponeWithTracking:function(){return S},throwIfDisallowedDynamic:function(){return B},throwToInterruptStaticGeneration:function(){return y},trackAllowedDynamicAccess:function(){return K},trackDynamicDataInDynamicRender:function(){return b},trackFallbackParamAccessed:function(){return m},trackSynchronousPlatformIOAccessInDev:function(){return x},trackSynchronousRequestDataAccessInDev:function(){return _},useDynamicRouteParams:function(){return N}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(23346)),i=r(43943),s=r(84441),a=r(63033),o=r(29294),c=r(97230),l=r(81791),u="function"==typeof n.default.unstable_postpone;function d(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicExpression:void 0,syncDynamicErrorWithStack:null}}function h(){return{hasSuspendedDynamic:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasSyncDynamicErrors:!1,dynamicErrors:[]}}function p(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function f(e,t,r){if((!t||"cache"!==t.type&&"unstable-cache"!==t.type)&&!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw new s.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(t){if("prerender-ppr"===t.type)S(e.route,r,t.dynamicTracking);else if("prerender-legacy"===t.type){t.revalidate=0;let n=new i.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}}function m(e,t){let r=a.workUnitAsyncStorage.getStore();r&&"prerender-ppr"===r.type&&S(e.route,t,r.dynamicTracking)}function y(e,t,r){let n=new i.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function b(e,t){t&&"cache"!==t.type&&"unstable-cache"!==t.type&&("prerender"===t.type||"prerender-legacy"===t.type)&&(t.revalidate=0)}function w(e,t,r){let n=O(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function g(e,t,r,n){let i=n.dynamicTracking;return i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r),w(e,t,n)}function x(e){e.prerenderPhase=!1}function v(e,t,r,n){let i=n.dynamicTracking;throw i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r,!0===n.validating&&(i.syncDynamicLogged=!0)),w(e,t,n),O(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}let _=x;function k({reason:e,route:t}){let r=a.workUnitAsyncStorage.getStore();S(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function S(e,t,r){j(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),n.default.unstable_postpone(A(e,t))}function A(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function E(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&R(e.message)}function R(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===R(A("%%%","^^^")))throw Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js");let T="NEXT_PRERENDER_INTERRUPTED";function O(e){let t=Error(e);return t.digest=T,t}function P(e){return"object"==typeof e&&null!==e&&e.digest===T&&"name"in e&&"message"in e&&e instanceof Error}function C(e){return e.length>0}function I(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function U(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function j(){if(!u)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function D(e){j();let t=new AbortController;try{n.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}function $(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function N(e){if("undefined"==typeof window){let t=o.workAsyncStorage.getStore();if(t&&t.isStaticGeneration&&t.fallbackRouteParams&&t.fallbackRouteParams.size>0){let r=a.workUnitAsyncStorage.getStore();r&&("prerender"===r.type?n.default.use((0,c.makeHangingPromise)(r.renderSignal,e)):"prerender-ppr"===r.type?S(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&y(e,t,r))}}}let L=/\n\s+at Suspense \(<anonymous>\)/,M=RegExp(`\\n\\s+at ${l.METADATA_BOUNDARY_NAME}[\\n\\s]`),H=RegExp(`\\n\\s+at ${l.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${l.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function K(e,t,r,n,i){if(!W.test(t)){if(M.test(t)){r.hasDynamicMetadata=!0;return}if(H.test(t)){r.hasDynamicViewport=!0;return}if(L.test(t)){r.hasSuspendedDynamic=!0;return}if(n.syncDynamicErrorWithStack||i.syncDynamicErrorWithStack){r.hasSyncDynamicErrors=!0;return}else{let n=function(e,t){let r=Error(e);return r.stack="Error: "+e+t,r}(`Route "${e}": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a "use cache" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`,t);r.dynamicErrors.push(n);return}}}function B(e,t,r,n){let i,a,o;if(r.syncDynamicErrorWithStack?(i=r.syncDynamicErrorWithStack,a=r.syncDynamicExpression,o=!0===r.syncDynamicLogged):n.syncDynamicErrorWithStack?(i=n.syncDynamicErrorWithStack,a=n.syncDynamicExpression,o=!0===n.syncDynamicLogged):(i=null,a=void 0,o=!1),t.hasSyncDynamicErrors&&i)throw o||console.error(i),new s.StaticGenBailoutError;let c=t.dynamicErrors;if(c.length){for(let e=0;e<c.length;e++)console.error(c[e]);throw new s.StaticGenBailoutError}if(!t.hasSuspendedDynamic){if(t.hasDynamicMetadata){if(i)throw console.error(i),new s.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that could not finish rendering before ${a} was used. Follow the instructions in the error for this expression to resolve.`);throw new s.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateMetadata\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`)}if(t.hasDynamicViewport){if(i)throw console.error(i),new s.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that could not finish rendering before ${a} was used. Follow the instructions in the error for this expression to resolve.`);throw new s.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateViewport\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`)}}}},17434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=s?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(23346));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}let s={current:null},a="function"==typeof n.cache?n.cache:e=>e,o=console.warn;function c(e){return function(...t){o(e(...t))}}a(e=>{try{o(s.current)}finally{s.current=null}})},97230:(e,t)=>{"use strict";function r(e,t){let r=new Promise((r,n)=>{e.addEventListener("abort",()=>{n(Error(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context.`))},{once:!0})});return r.catch(n),r}function n(){}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"makeHangingPromise",{enumerable:!0,get:function(){return r}})},57063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},34704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"connection",{enumerable:!0,get:function(){return l}});let n=r(29294),i=r(63033),s=r(1301),a=r(84441),o=r(97230),c=r(96803);function l(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,c.isRequestAPICallableInsideAfter)())throw Error(`Route ${e.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`);if(e.forceStatic)return Promise.resolve(void 0);if(t){if("cache"===t.type)throw Error(`Route ${e.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===t.type)throw Error(`Route ${e.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}if(e.dynamicShouldError)throw new a.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(t){if("prerender"===t.type)return(0,o.makeHangingPromise)(t.renderSignal,"`connection()`");"prerender-ppr"===t.type?(0,s.postponeWithTracking)(e.route,"connection",t.dynamicTracking):"prerender-legacy"===t.type&&(0,s.throwToInterruptStaticGeneration)("connection",e,t)}(0,s.trackDynamicDataInDynamicRender)(e,t)}return Promise.resolve(void 0)}},53825:(e,t,r)=>{"use strict";Object.defineProperty(t,"U",{enumerable:!0,get:function(){return h}});let n=r(4013),i=r(24738),s=r(29294),a=r(63033),o=r(1301),c=r(84441),l=r(97230),u=r(17434),d=(r(31445),r(96803));function h(){let e="cookies",t=s.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`);if(t.forceStatic)return f(n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===r.type)throw Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}if(t.dynamicShouldError)throw new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(r){if("prerender"===r.type)return function(e,t){let r=p.get(t);if(r)return r;let n=(0,l.makeHangingPromise)(t.renderSignal,"`cookies()`");return p.set(t,n),Object.defineProperties(n,{[Symbol.iterator]:{value:function(){let r="`cookies()[Symbol.iterator]()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},size:{get(){let r="`cookies().size`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},get:{value:function(){let r;r=0==arguments.length?"`cookies().get()`":`\`cookies().get(${m(arguments[0])})\``;let n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},getAll:{value:function(){let r;r=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${m(arguments[0])})\``;let n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},has:{value:function(){let r;r=0==arguments.length?"`cookies().has()`":`\`cookies().has(${m(arguments[0])})\``;let n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},set:{value:function(){let r;if(0==arguments.length)r="`cookies().set()`";else{let e=arguments[0];r=e?`\`cookies().set(${m(e)}, ...)\``:"`cookies().set(...)`"}let n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},delete:{value:function(){let r;r=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${m(arguments[0])})\``:`\`cookies().delete(${m(arguments[0])}, ...)\``;let n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},clear:{value:function(){let r="`cookies().clear()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},toString:{value:function(){let r="`cookies().toString()`",n=y(e,r);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}}}),n}(t.route,r);"prerender-ppr"===r.type?(0,o.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,o.throwToInterruptStaticGeneration)(e,t,r)}(0,o.trackDynamicDataInDynamicRender)(t,r)}let u=(0,a.getExpectedRequestStore)(e);return f((0,n.areCookiesMutableInCurrentPhase)(u)?u.userspaceMutableCookies:u.cookies)}let p=new WeakMap;function f(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):b.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):w.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function m(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}function y(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)}function b(){return this.getAll().map(e=>[e.name,e]).values()}function w(e){for(let e of this.getAll())this.delete(e.name);return e}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(y)},99863:(e,t,r)=>{"use strict";let n=r(63033),i=r(29294),s=r(1301),a=r(17434),o=r(84441),c=r(43943);new WeakMap;class l{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){u("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){u("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}function u(e){let t=i.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===r.type)throw Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if("after"===r.phase)throw Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`)}if(t.dynamicShouldError)throw new o.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(r){if("prerender"===r.type){let n=Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,n,r)}else if("prerender-ppr"===r.type)(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}(0,a.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)})},50406:(e,t,r)=>{"use strict";Object.defineProperty(t,"b",{enumerable:!0,get:function(){return d}});let n=r(44734),i=r(29294),s=r(63033),a=r(1301),o=r(84441),c=r(97230),l=r(17434),u=(r(31445),r(96803));function d(){let e=i.workAsyncStorage.getStore(),t=s.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,u.isRequestAPICallableInsideAfter)())throw Error(`Route ${e.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`);if(e.forceStatic)return p(n.HeadersAdapter.seal(new Headers({})));if(t){if("cache"===t.type)throw Error(`Route ${e.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===t.type)throw Error(`Route ${e.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}if(e.dynamicShouldError)throw new o.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(t){if("prerender"===t.type)return function(e,t){let r=h.get(t);if(r)return r;let n=(0,c.makeHangingPromise)(t.renderSignal,"`headers()`");return h.set(t,n),Object.defineProperties(n,{append:{value:function(){let r=`\`headers().append(${f(arguments[0])}, ...)\``,n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},delete:{value:function(){let r=`\`headers().delete(${f(arguments[0])})\``,n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},get:{value:function(){let r=`\`headers().get(${f(arguments[0])})\``,n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},has:{value:function(){let r=`\`headers().has(${f(arguments[0])})\``,n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},set:{value:function(){let r=`\`headers().set(${f(arguments[0])}, ...)\``,n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},getSetCookie:{value:function(){let r="`headers().getSetCookie()`",n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},forEach:{value:function(){let r="`headers().forEach(...)`",n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},keys:{value:function(){let r="`headers().keys()`",n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},values:{value:function(){let r="`headers().values()`",n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},entries:{value:function(){let r="`headers().entries()`",n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},[Symbol.iterator]:{value:function(){let r="`headers()[Symbol.iterator]()`",n=m(e,r);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}}}),n}(e.route,t);"prerender-ppr"===t.type?(0,a.postponeWithTracking)(e.route,"headers",t.dynamicTracking):"prerender-legacy"===t.type&&(0,a.throwToInterruptStaticGeneration)("headers",e,t)}(0,a.trackDynamicDataInDynamicRender)(e,t)}return p((0,s.getExpectedRequestStore)("headers").headers)}let h=new WeakMap;function p(e){let t=h.get(e);if(t)return t;let r=Promise.resolve(e);return h.set(e,r),Object.defineProperties(r,{append:{value:e.append.bind(e)},delete:{value:e.delete.bind(e)},get:{value:e.get.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},getSetCookie:{value:e.getSetCookie.bind(e)},forEach:{value:e.forEach.bind(e)},keys:{value:e.keys.bind(e)},values:{value:e.values.bind(e)},entries:{value:e.entries.bind(e)},[Symbol.iterator]:{value:e[Symbol.iterator].bind(e)}}),r}function f(e){return"string"==typeof e?`'${e}'`:"..."}function m(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)}(0,l.createDedupedByCallsiteServerErrorLoggerDev)(m)},96803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{describeHasCheckingStringProperty:function(){return o},describeStringPropertyAccess:function(){return a},isRequestAPICallableInsideAfter:function(){return u},throwWithStaticGenerationBailoutError:function(){return c},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return l},wellKnownProperties:function(){return d}});let n=r(84441),i=r(3295),s=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function a(e,t){return s.test(t)?`\`${e}.${t}\``:`\`${e}[${JSON.stringify(t)}]\``}function o(e,t){let r=JSON.stringify(t);return`\`Reflect.has(${e}, ${r})\`, \`${r} in ${e}\`, or similar`}function c(e,t){throw new n.StaticGenBailoutError(`Route ${e} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`)}function l(e,t){throw new n.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`)}function u(){let e=i.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}let d=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])},23346:(e,t,r)=>{"use strict";e.exports=r(70260).vendored["react-rsc"].React},43531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PageSignatureError:function(){return r},RemovedPageError:function(){return n},RemovedUAError:function(){return i}});class r extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class n extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class i extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},49217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ImageResponse:function(){return n.ImageResponse},NextRequest:function(){return i.NextRequest},NextResponse:function(){return s.NextResponse},URLPattern:function(){return o.URLPattern},after:function(){return c.after},connection:function(){return l.connection},userAgent:function(){return a.userAgent},userAgentFromString:function(){return a.userAgentFromString}});let n=r(78216),i=r(52480),s=r(15884),a=r(90624),o=r(99113),c=r(95373),l=r(34704)},65596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextURL",{enumerable:!0,get:function(){return u}});let n=r(82146),i=r(50487),s=r(86974),a=r(28724),o=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function c(e,t){return new URL(String(e).replace(o,"localhost"),t&&String(t).replace(o,"localhost"))}let l=Symbol("NextURLInternal");class u{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[l]={url:c(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,i,o;let c=(0,a.getNextPathnameInfo)(this[l].url.pathname,{nextConfig:this[l].options.nextConfig,parseData:!0,i18nProvider:this[l].options.i18nProvider}),u=(0,s.getHostname)(this[l].url,this[l].options.headers);this[l].domainLocale=this[l].options.i18nProvider?this[l].options.i18nProvider.detectDomainLocale(u):(0,n.detectDomainLocale)(null==(t=this[l].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,u);let d=(null==(r=this[l].domainLocale)?void 0:r.defaultLocale)||(null==(o=this[l].options.nextConfig)?void 0:null==(i=o.i18n)?void 0:i.defaultLocale);this[l].url.pathname=c.pathname,this[l].defaultLocale=d,this[l].basePath=c.basePath??"",this[l].buildId=c.buildId,this[l].locale=c.locale??d,this[l].trailingSlash=c.trailingSlash}formatPathname(){return(0,i.formatNextPathnameInfo)({basePath:this[l].basePath,buildId:this[l].buildId,defaultLocale:this[l].options.forceLocale?void 0:this[l].defaultLocale,locale:this[l].locale,pathname:this[l].url.pathname,trailingSlash:this[l].trailingSlash})}formatSearch(){return this[l].url.search}get buildId(){return this[l].buildId}set buildId(e){this[l].buildId=e}get locale(){return this[l].locale??""}set locale(e){var t,r;if(!this[l].locale||!(null==(r=this[l].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[l].locale=e}get defaultLocale(){return this[l].defaultLocale}get domainLocale(){return this[l].domainLocale}get searchParams(){return this[l].url.searchParams}get host(){return this[l].url.host}set host(e){this[l].url.host=e}get hostname(){return this[l].url.hostname}set hostname(e){this[l].url.hostname=e}get port(){return this[l].url.port}set port(e){this[l].url.port=e}get protocol(){return this[l].url.protocol}set protocol(e){this[l].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[l].url=c(e),this.analyze()}get origin(){return this[l].url.origin}get pathname(){return this[l].url.pathname}set pathname(e){this[l].url.pathname=e}get hash(){return this[l].url.hash}set hash(e){this[l].url.hash=e}get search(){return this[l].url.search}set search(e){this[l].url.search=e}get password(){return this[l].url.password}set password(e){this[l].url.password=e}get username(){return this[l].url.username}set username(e){this[l].url.username=e}get basePath(){return this[l].basePath}set basePath(e){this[l].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new u(String(this),this[l].options)}}},44734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return i}});let n=r(5779);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==a)return n.ReflectAdapter.get(t,a,i)},set(t,r,i,s){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,s);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return n.ReflectAdapter.set(t,o??r,i,s)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==s&&n.ReflectAdapter.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===s||n.ReflectAdapter.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},5779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},4013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return h},ReadonlyRequestCookiesError:function(){return o},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return d},areCookiesMutableInCurrentPhase:function(){return f},getModifiedCookieValues:function(){return u},responseCookiesToRequestCookies:function(){return y},wrapWithMutableAccessCheck:function(){return p}});let n=r(24738),i=r(5779),s=r(29294),a=r(63033);class o extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new o}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return o.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function u(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=u(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),s=i.getAll();for(let e of r)i.set(e);for(let e of s)i.set(e);return!0}class h{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let a=[],o=new Set,c=()=>{let e=s.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of a){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case l:return a;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{c()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}});return u}}function p(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return m("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return m("cookies().set"),e.set(...r),t};default:return i.ReflectAdapter.get(e,r,n)}}});return t}function f(e){return"action"===e.phase}function m(e){if(!f((0,a.getExpectedRequestStore)(e)))throw new o}function y(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},24738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return n.RequestCookies},ResponseCookies:function(){return n.ResponseCookies},stringifyCookie:function(){return n.stringifyCookie}});let n=r(6003)},78216:(e,t)=>{"use strict";function r(){throw Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead')}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return r}})},52480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERNALS:function(){return o},NextRequest:function(){return c}});let n=r(65596),i=r(51486),s=r(43531),a=r(24738),o=Symbol("internal request");class c extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);(0,i.validateURL)(r),e instanceof Request?super(e,t):super(r,t);let s=new n.NextURL(r,{headers:(0,i.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[o]={cookies:new a.RequestCookies(this.headers),nextUrl:s,url:s.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[o].cookies}get nextUrl(){return this[o].nextUrl}get page(){throw new s.RemovedPageError}get ua(){throw new s.RemovedUAError}get url(){return this[o].url}}},15884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return d}});let n=r(24738),i=r(65596),s=r(51486),a=r(5779),o=r(24738),c=Symbol("internal response"),l=new Set([301,302,303,307,308]);function u(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);let r=this.headers,l=new Proxy(new o.ResponseCookies(r),{get(e,i,s){switch(i){case"delete":case"set":return(...s)=>{let a=Reflect.apply(e[i],e,s),c=new Headers(r);return a instanceof o.ResponseCookies&&r.set("x-middleware-set-cookie",a.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),u(t,c),a};default:return a.ReflectAdapter.get(e,i,s)}}});this[c]={cookies:l,url:t.url?new i.NextURL(t.url,{headers:(0,s.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[c].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!l.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,s.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,s.validateURL)(e)),u(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),u(e,t),new d(null,{...e,headers:t})}}},99113:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"URLPattern",{enumerable:!0,get:function(){return r}});let r="undefined"==typeof URLPattern?void 0:URLPattern},90624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isBot:function(){return i},userAgent:function(){return a},userAgentFromString:function(){return s}});let n=function(e){return e&&e.__esModule?e:{default:e}}(r(26699));function i(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function s(e){return{...(0,n.default)(e),isBot:void 0!==e&&i(e)}}function a({headers:e}){return s(e.get("user-agent")||void 0)}},51486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fromNodeOutgoingHttpHeaders:function(){return i},normalizeNextQueryParam:function(){return c},splitCookiesString:function(){return s},toNodeOutgoingHttpHeaders:function(){return a},validateURL:function(){return o}});let n=r(52441);function i(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function s(e){var t,r,n,i,s,a=[],o=0;function c(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;c();)if(","===(r=e.charAt(o))){for(n=o,o+=1,c(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}function a(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...s(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function o(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}function c(e,t){for(let r of[n.NEXT_QUERY_PARAM_PREFIX,n.NEXT_INTERCEPTION_MARKER_PREFIX])e!==r&&e.startsWith(r)&&t(e.substring(r.length))}},86974:(e,t)=>{"use strict";function r(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getHostname",{enumerable:!0,get:function(){return r}})},82146:(e,t)=>{"use strict";function r(e,t,r){if(e)for(let s of(r&&(r=r.toLowerCase()),e)){var n,i;if(t===(null==(n=s.domain)?void 0:n.split(":",1)[0].toLowerCase())||r===s.defaultLocale.toLowerCase()||(null==(i=s.locales)?void 0:i.some(e=>e.toLowerCase()===r)))return s}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return r}})},41545:(e,t)=>{"use strict";function r(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return r}})},43548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},51436:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return s}});let n=r(82088),i=r(61035);function s(e,t,r,s){if(!t||t===r)return e;let a=e.toLowerCase();return!s&&((0,i.pathHasPrefix)(a,"/api")||(0,i.pathHasPrefix)(a,"/"+t.toLowerCase()))?e:(0,n.addPathPrefix)(e,"/"+t)}},82088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=r(85307);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=(0,n.parsePath)(e);return""+t+r+i+s}},10312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathSuffix",{enumerable:!0,get:function(){return i}});let n=r(85307);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=(0,n.parsePath)(e);return""+r+t+i+s}},50487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"formatNextPathnameInfo",{enumerable:!0,get:function(){return o}});let n=r(33273),i=r(82088),s=r(10312),a=r(51436);function o(e){let t=(0,a.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,s.addPathSuffix)((0,i.addPathPrefix)(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=(0,i.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,s.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},28724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNextPathnameInfo",{enumerable:!0,get:function(){return a}});let n=r(41545),i=r(8797),s=r(61035);function a(e,t){var r,a;let{basePath:o,i18n:c,trailingSlash:l}=null!=(r=t.nextConfig)?r:{},u={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):l};o&&(0,s.pathHasPrefix)(u.pathname,o)&&(u.pathname=(0,i.removePathPrefix)(u.pathname,o),u.basePath=o);let d=u.pathname;if(u.pathname.startsWith("/_next/data/")&&u.pathname.endsWith(".json")){let e=u.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];u.buildId=r,d="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(u.pathname=d)}if(c){let e=t.i18nProvider?t.i18nProvider.analyze(u.pathname):(0,n.normalizeLocalePath)(u.pathname,c.locales);u.locale=e.detectedLocale,u.pathname=null!=(a=e.pathname)?a:u.pathname,!e.detectedLocale&&u.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(d):(0,n.normalizeLocalePath)(d,c.locales)).detectedLocale&&(u.locale=e.detectedLocale)}return u}},85307:(e,t)=>{"use strict";function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},61035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=r(85307);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},8797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removePathPrefix",{enumerable:!0,get:function(){return i}});let n=r(61035);function i(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}},33273:(e,t)=>{"use strict";function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},4497:(e,t,r)=>{"use strict";function n(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}r.d(t,{A:()=>n})},75586:(e,t,r)=>{"use strict";r.d(t,{Q:()=>rR});var n=r(77598);let i=n.webcrypto?.subtle||{};var s=Object.defineProperty;((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})({},{UpstashError:()=>a,UrlError:()=>o});var a=class extends Error{constructor(e){super(e),this.name="UpstashError"}},o=class extends Error{constructor(e){super(`Upstash Redis client was passed an invalid URL. You should pass a URL starting with https. Received: "${e}". `),this.name="UrlError"}};function c(e){try{return function e(t){let r=Array.isArray(t)?t.map(t=>{try{return e(t)}catch{return t}}):JSON.parse(t);return"number"==typeof r&&r.toString()!==t?t:r}(e)}catch{return e}}function l(e){return[e[0],...c(e.slice(1))]}function u(e){let[t,r]=e,n=[];for(let e=0;e<r.length;e+=2)n.push({key:r[e],type:r[e+1]});return[t,n]}var d=class{baseUrl;headers;options;readYourWrites;upstashSyncToken="";hasCredentials;retry;constructor(e){if(this.options={backend:e.options?.backend,agent:e.agent,responseEncoding:e.responseEncoding??"base64",cache:e.cache,signal:e.signal,keepAlive:e.keepAlive??!0},this.upstashSyncToken="",this.readYourWrites=e.readYourWrites??!0,this.baseUrl=(e.baseUrl||"").replace(/\/$/,""),this.baseUrl&&!/^https?:\/\/[^\s#$./?].\S*$/.test(this.baseUrl))throw new o(this.baseUrl);this.headers={"Content-Type":"application/json",...e.headers},this.hasCredentials=!!(this.baseUrl&&this.headers.authorization.split(" ")[1]),"base64"===this.options.responseEncoding&&(this.headers["Upstash-Encoding"]="base64"),this.retry="boolean"!=typeof e.retry||e.retry?{attempts:e.retry?.retries??5,backoff:e.retry?.backoff??(e=>50*Math.exp(e))}:{attempts:1,backoff:()=>0}}mergeTelemetry(e){this.headers=f(this.headers,"Upstash-Telemetry-Runtime",e.runtime),this.headers=f(this.headers,"Upstash-Telemetry-Platform",e.platform),this.headers=f(this.headers,"Upstash-Telemetry-Sdk",e.sdk)}async request(e){let t=function(...e){let t={};for(let r of e)if(r)for(let[e,n]of Object.entries(r))null!=n&&(t[e]=n);return t}(this.headers,e.headers??{}),r=[this.baseUrl,...e.path??[]].join("/"),n="text/event-stream"===t.Accept,i={cache:this.options.cache,method:"POST",headers:t,body:JSON.stringify(e.body),keepalive:this.options.keepAlive,agent:this.options.agent,signal:e.signal??this.options.signal,backend:this.options.backend};if(this.hasCredentials||console.warn("[Upstash Redis] Redis client was initialized without url or token. Failed to execute command."),this.readYourWrites){let e=this.upstashSyncToken;this.headers["upstash-sync-token"]=e}let s=null,o=null;for(let e=0;e<=this.retry.attempts;e++)try{s=await fetch(r,i);break}catch(t){if(this.options.signal?.aborted){s=new Response(new Blob([JSON.stringify({result:this.options.signal.reason??"Aborted"})]),{status:200,statusText:this.options.signal.reason??"Aborted"});break}o=t,e<this.retry.attempts&&await new Promise(t=>setTimeout(t,this.retry.backoff(e)))}if(!s)throw o??Error("Exhausted all retries");if(!s.ok){let t=await s.json();throw new a(`${t.error}, command was: ${JSON.stringify(e.body)}`)}if(this.readYourWrites){let e=s.headers;this.upstashSyncToken=e.get("upstash-sync-token")??""}if(n&&e&&e.onMessage&&s.body){let t=s.body.getReader(),r=new TextDecoder;return(async()=>{try{for(;;){let{value:n,done:i}=await t.read();if(i)break;for(let t of r.decode(n).split("\n"))if(t.startsWith("data: ")){let r=t.slice(6);e.onMessage?.(r)}}}catch(e){e instanceof Error&&"AbortError"===e.name||console.error("Stream reading error:",e)}finally{try{await t.cancel()}catch{}}})(),{result:1}}let c=await s.json();if(this.readYourWrites){let e=s.headers;this.upstashSyncToken=e.get("upstash-sync-token")??""}return"base64"===this.options.responseEncoding?Array.isArray(c)?c.map(({result:e,error:t})=>({result:p(e),error:t})):{result:p(c.result),error:c.error}:c}};function h(e){let t="";try{let r=atob(e),n=r.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=r.charCodeAt(e);t=new TextDecoder().decode(i)}catch{t=e}return t}function p(e){let t;switch(typeof e){case"undefined":return e;case"number":t=e;break;case"object":t=Array.isArray(e)?e.map(e=>"string"==typeof e?h(e):Array.isArray(e)?e.map(e=>p(e)):e):null;break;case"string":t="OK"===e?"OK":h(e)}return t}function f(e,t,r){return r&&(e[t]=e[t]?[e[t],r].join(","):r),e}var m=e=>{switch(typeof e){case"string":case"number":case"boolean":return e;default:return JSON.stringify(e)}},y=class{command;serialize;deserialize;headers;path;onMessage;isStreaming;signal;constructor(e,t){if(this.serialize=m,this.deserialize=t?.automaticDeserialization===void 0||t.automaticDeserialization?t?.deserialize??c:e=>e,this.command=e.map(e=>this.serialize(e)),this.headers=t?.headers,this.path=t?.path,this.onMessage=t?.streamOptions?.onMessage,this.isStreaming=t?.streamOptions?.isStreaming??!1,this.signal=t?.streamOptions?.signal,t?.latencyLogging){let e=this.exec.bind(this);this.exec=async t=>{let r=performance.now(),n=await e(t),i=(performance.now()-r).toFixed(2);return console.log(`Latency for \x1b[38;2;19;185;39m${this.command[0].toString().toUpperCase()}\x1b[0m: \x1b[38;2;0;255;255m${i} ms\x1b[0m`),n}}}async exec(e){let{result:t,error:r}=await e.request({body:this.command,path:this.path,upstashSyncToken:e.upstashSyncToken,headers:this.headers,onMessage:this.onMessage,isStreaming:this.isStreaming,signal:this.signal});if(r)throw new a(r);if(void 0===t)throw TypeError("Request did not return a result");return this.deserialize(t)}},b=class extends y{constructor(e,t){let r=["hrandfield",e[0]];"number"==typeof e[1]&&r.push(e[1]),e[2]&&r.push("WITHVALUES"),super(r,{deserialize:e[2]?e=>(function(e){if(0===e.length)return null;let t={};for(let r=0;r<e.length;r+=2){let n=e[r],i=e[r+1];try{t[n]=JSON.parse(i)}catch{t[n]=i}}return t})(e):t?.deserialize,...t})}},w=class extends y{constructor(e,t){super(["append",...e],t)}},g=class extends y{constructor([e,t,r],n){let i=["bitcount",e];"number"==typeof t&&i.push(t),"number"==typeof r&&i.push(r),super(i,n)}},x=class{constructor(e,t,r,n=e=>e.exec(this.client)){this.client=t,this.opts=r,this.execOperation=n,this.command=["bitfield",...e]}command;chain(...e){return this.command.push(...e),this}get(...e){return this.chain("get",...e)}set(...e){return this.chain("set",...e)}incrby(...e){return this.chain("incrby",...e)}overflow(e){return this.chain("overflow",e)}exec(){let e=new y(this.command,this.opts);return this.execOperation(e)}},v=class extends y{constructor(e,t){super(["bitop",...e],t)}},_=class extends y{constructor(e,t){super(["bitpos",...e],t)}},k=class extends y{constructor([e,t,r],n){super(["COPY",e,t,...r?.replace?["REPLACE"]:[]],{...n,deserialize:e=>e>0?"COPIED":"NOT_COPIED"})}},S=class extends y{constructor(e){super(["dbsize"],e)}},A=class extends y{constructor(e,t){super(["decr",...e],t)}},E=class extends y{constructor(e,t){super(["decrby",...e],t)}},R=class extends y{constructor(e,t){super(["del",...e],t)}},T=class extends y{constructor(e,t){super(["echo",...e],t)}},O=class extends y{constructor([e,t,r],n){super(["eval_ro",e,t.length,...t,...r??[]],n)}},P=class extends y{constructor([e,t,r],n){super(["eval",e,t.length,...t,...r??[]],n)}},C=class extends y{constructor([e,t,r],n){super(["evalsha_ro",e,t.length,...t,...r??[]],n)}},I=class extends y{constructor([e,t,r],n){super(["evalsha",e,t.length,...t,...r??[]],n)}},U=class extends y{constructor(e,t){super(e.map(e=>"string"==typeof e?e:String(e)),t)}},j=class extends y{constructor(e,t){super(["exists",...e],t)}},D=class extends y{constructor(e,t){super(["expire",...e.filter(Boolean)],t)}},$=class extends y{constructor(e,t){super(["expireat",...e],t)}},N=class extends y{constructor(e,t){let r=["flushall"];e&&e.length>0&&e[0].async&&r.push("async"),super(r,t)}},L=class extends y{constructor([e],t){let r=["flushdb"];e?.async&&r.push("async"),super(r,t)}},M=class extends y{constructor([e,t,...r],n){let i=["geoadd",e];"nx"in t&&t.nx?i.push("nx"):"xx"in t&&t.xx&&i.push("xx"),"ch"in t&&t.ch&&i.push("ch"),"latitude"in t&&t.latitude&&i.push(t.longitude,t.latitude,t.member),i.push(...r.flatMap(({latitude:e,longitude:t,member:r})=>[t,e,r])),super(i,n)}},H=class extends y{constructor([e,t,r,n="M"],i){super(["GEODIST",e,t,r,n],i)}},W=class extends y{constructor(e,t){let[r]=e;super(["GEOHASH",r,...Array.isArray(e[1])?e[1]:e.slice(1)],t)}},K=class extends y{constructor(e,t){let[r]=e;super(["GEOPOS",r,...Array.isArray(e[1])?e[1]:e.slice(1)],{deserialize:e=>(function(e){let t=[];for(let r of e)r?.[0]&&r?.[1]&&t.push({lng:Number.parseFloat(r[0]),lat:Number.parseFloat(r[1])});return t})(e),...t})}},B=class extends y{constructor([e,t,r,n,i],s){let a=["GEOSEARCH",e];("FROMMEMBER"===t.type||"frommember"===t.type)&&a.push(t.type,t.member),("FROMLONLAT"===t.type||"fromlonlat"===t.type)&&a.push(t.type,t.coordinate.lon,t.coordinate.lat),("BYRADIUS"===r.type||"byradius"===r.type)&&a.push(r.type,r.radius,r.radiusType),("BYBOX"===r.type||"bybox"===r.type)&&a.push(r.type,r.rect.width,r.rect.height,r.rectType),a.push(n),i?.count&&a.push("COUNT",i.count.limit,...i.count.any?["ANY"]:[]),super([...a,...i?.withCoord?["WITHCOORD"]:[],...i?.withDist?["WITHDIST"]:[],...i?.withHash?["WITHHASH"]:[]],{deserialize:e=>i?.withCoord||i?.withDist||i?.withHash?e.map(e=>{let t=1,r={};try{r.member=JSON.parse(e[0])}catch{r.member=e[0]}return i.withDist&&(r.dist=Number.parseFloat(e[t++])),i.withHash&&(r.hash=e[t++].toString()),i.withCoord&&(r.coord={long:Number.parseFloat(e[t][0]),lat:Number.parseFloat(e[t][1])}),r}):e.map(e=>{try{return{member:JSON.parse(e)}}catch{return{member:e}}}),...s})}},z=class extends y{constructor([e,t,r,n,i,s],a){let o=["GEOSEARCHSTORE",e,t];("FROMMEMBER"===r.type||"frommember"===r.type)&&o.push(r.type,r.member),("FROMLONLAT"===r.type||"fromlonlat"===r.type)&&o.push(r.type,r.coordinate.lon,r.coordinate.lat),("BYRADIUS"===n.type||"byradius"===n.type)&&o.push(n.type,n.radius,n.radiusType),("BYBOX"===n.type||"bybox"===n.type)&&o.push(n.type,n.rect.width,n.rect.height,n.rectType),o.push(i),s?.count&&o.push("COUNT",s.count.limit,...s.count.any?["ANY"]:[]),super([...o,...s?.storeDist?["STOREDIST"]:[]],a)}},q=class extends y{constructor(e,t){super(["get",...e],t)}},J=class extends y{constructor(e,t){super(["getbit",...e],t)}},F=class extends y{constructor(e,t){super(["getdel",...e],t)}},G=class extends y{constructor([e,t],r){let n=["getex",e];t&&("ex"in t&&"number"==typeof t.ex?n.push("ex",t.ex):"px"in t&&"number"==typeof t.px?n.push("px",t.px):"exat"in t&&"number"==typeof t.exat?n.push("exat",t.exat):"pxat"in t&&"number"==typeof t.pxat?n.push("pxat",t.pxat):"persist"in t&&t.persist&&n.push("persist")),super(n,r)}},V=class extends y{constructor(e,t){super(["getrange",...e],t)}},X=class extends y{constructor(e,t){super(["getset",...e],t)}},Y=class extends y{constructor(e,t){super(["hdel",...e],t)}},Z=class extends y{constructor(e,t){super(["hexists",...e],t)}},Q=class extends y{constructor(e,t){let[r,n,i,s]=e,a=Array.isArray(n)?n:[n];super(["hexpire",r,i,...s?[s]:[],"FIELDS",a.length,...a],t)}},ee=class extends y{constructor(e,t){let[r,n,i,s]=e,a=Array.isArray(n)?n:[n];super(["hexpireat",r,i,...s?[s]:[],"FIELDS",a.length,...a],t)}},et=class extends y{constructor(e,t){let[r,n]=e,i=Array.isArray(n)?n:[n];super(["hexpiretime",r,"FIELDS",i.length,...i],t)}},er=class extends y{constructor(e,t){let[r,n]=e,i=Array.isArray(n)?n:[n];super(["hpersist",r,"FIELDS",i.length,...i],t)}},en=class extends y{constructor(e,t){let[r,n,i,s]=e,a=Array.isArray(n)?n:[n];super(["hpexpire",r,i,...s?[s]:[],"FIELDS",a.length,...a],t)}},ei=class extends y{constructor(e,t){let[r,n,i,s]=e,a=Array.isArray(n)?n:[n];super(["hpexpireat",r,i,...s?[s]:[],"FIELDS",a.length,...a],t)}},es=class extends y{constructor(e,t){let[r,n]=e,i=Array.isArray(n)?n:[n];super(["hpexpiretime",r,"FIELDS",i.length,...i],t)}},ea=class extends y{constructor(e,t){let[r,n]=e,i=Array.isArray(n)?n:[n];super(["hpttl",r,"FIELDS",i.length,...i],t)}},eo=class extends y{constructor(e,t){super(["hget",...e],t)}},ec=class extends y{constructor(e,t){super(["hgetall",...e],{deserialize:e=>(function(e){if(0===e.length)return null;let t={};for(let r=0;r<e.length;r+=2){let n=e[r],i=e[r+1];try{let e=!Number.isNaN(Number(i))&&!Number.isSafeInteger(Number(i));t[n]=e?i:JSON.parse(i)}catch{t[n]=i}}return t})(e),...t})}},el=class extends y{constructor(e,t){super(["hincrby",...e],t)}},eu=class extends y{constructor(e,t){super(["hincrbyfloat",...e],t)}},ed=class extends y{constructor([e],t){super(["hkeys",e],t)}},eh=class extends y{constructor(e,t){super(["hlen",...e],t)}},ep=class extends y{constructor([e,...t],r){super(["hmget",e,...t],{deserialize:e=>(function(e,t){if(t.every(e=>null===e))return null;let r={};for(let[n,i]of e.entries())try{r[i]=JSON.parse(t[n])}catch{r[i]=t[n]}return r})(t,e),...r})}},ef=class extends y{constructor([e,t],r){super(["hmset",e,...Object.entries(t).flatMap(([e,t])=>[e,t])],r)}},em=class extends y{constructor([e,t,r],n){let i=["hscan",e,t];r?.match&&i.push("match",r.match),"number"==typeof r?.count&&i.push("count",r.count),super(i,{deserialize:l,...n})}},ey=class extends y{constructor([e,t],r){super(["hset",e,...Object.entries(t).flatMap(([e,t])=>[e,t])],r)}},eb=class extends y{constructor(e,t){super(["hsetnx",...e],t)}},ew=class extends y{constructor(e,t){super(["hstrlen",...e],t)}},eg=class extends y{constructor(e,t){let[r,n]=e,i=Array.isArray(n)?n:[n];super(["httl",r,"FIELDS",i.length,...i],t)}},ex=class extends y{constructor(e,t){super(["hvals",...e],t)}},ev=class extends y{constructor(e,t){super(["incr",...e],t)}},e_=class extends y{constructor(e,t){super(["incrby",...e],t)}},ek=class extends y{constructor(e,t){super(["incrbyfloat",...e],t)}},eS=class extends y{constructor(e,t){super(["JSON.ARRAPPEND",...e],t)}},eA=class extends y{constructor(e,t){super(["JSON.ARRINDEX",...e],t)}},eE=class extends y{constructor(e,t){super(["JSON.ARRINSERT",...e],t)}},eR=class extends y{constructor(e,t){super(["JSON.ARRLEN",e[0],e[1]??"$"],t)}},eT=class extends y{constructor(e,t){super(["JSON.ARRPOP",...e],t)}},eO=class extends y{constructor(e,t){super(["JSON.ARRTRIM",e[0],e[1]??"$",e[2]??0,e[3]??0],t)}},eP=class extends y{constructor(e,t){super(["JSON.CLEAR",...e],t)}},eC=class extends y{constructor(e,t){super(["JSON.DEL",...e],t)}},eI=class extends y{constructor(e,t){super(["JSON.FORGET",...e],t)}},eU=class extends y{constructor(e,t){let r=["JSON.GET"];"string"==typeof e[1]?r.push(...e):(r.push(e[0]),e[1]&&(e[1].indent&&r.push("INDENT",e[1].indent),e[1].newline&&r.push("NEWLINE",e[1].newline),e[1].space&&r.push("SPACE",e[1].space)),r.push(...e.slice(2))),super(r,t)}},ej=class extends y{constructor(e,t){super(["JSON.MERGE",...e],t)}},eD=class extends y{constructor(e,t){super(["JSON.MGET",...e[0],e[1]],t)}},e$=class extends y{constructor(e,t){let r=["JSON.MSET"];for(let t of e)r.push(t.key,t.path,t.value);super(r,t)}},eN=class extends y{constructor(e,t){super(["JSON.NUMINCRBY",...e],t)}},eL=class extends y{constructor(e,t){super(["JSON.NUMMULTBY",...e],t)}},eM=class extends y{constructor(e,t){super(["JSON.OBJKEYS",...e],t)}},eH=class extends y{constructor(e,t){super(["JSON.OBJLEN",...e],t)}},eW=class extends y{constructor(e,t){super(["JSON.RESP",...e],t)}},eK=class extends y{constructor(e,t){let r=["JSON.SET",e[0],e[1],e[2]];e[3]&&(e[3].nx?r.push("NX"):e[3].xx&&r.push("XX")),super(r,t)}},eB=class extends y{constructor(e,t){super(["JSON.STRAPPEND",...e],t)}},ez=class extends y{constructor(e,t){super(["JSON.STRLEN",...e],t)}},eq=class extends y{constructor(e,t){super(["JSON.TOGGLE",...e],t)}},eJ=class extends y{constructor(e,t){super(["JSON.TYPE",...e],t)}},eF=class extends y{constructor(e,t){super(["keys",...e],t)}},eG=class extends y{constructor(e,t){super(["lindex",...e],t)}},eV=class extends y{constructor(e,t){super(["linsert",...e],t)}},eX=class extends y{constructor(e,t){super(["llen",...e],t)}},eY=class extends y{constructor(e,t){super(["lmove",...e],t)}},eZ=class extends y{constructor(e,t){let[r,n,i,s]=e;super(["LMPOP",r,...n,i,...s?["COUNT",s]:[]],t)}},eQ=class extends y{constructor(e,t){super(["lpop",...e],t)}},e0=class extends y{constructor(e,t){let r=["lpos",e[0],e[1]];"number"==typeof e[2]?.rank&&r.push("rank",e[2].rank),"number"==typeof e[2]?.count&&r.push("count",e[2].count),"number"==typeof e[2]?.maxLen&&r.push("maxLen",e[2].maxLen),super(r,t)}},e1=class extends y{constructor(e,t){super(["lpush",...e],t)}},e2=class extends y{constructor(e,t){super(["lpushx",...e],t)}},e5=class extends y{constructor(e,t){super(["lrange",...e],t)}},e6=class extends y{constructor(e,t){super(["lrem",...e],t)}},e3=class extends y{constructor(e,t){super(["lset",...e],t)}},e8=class extends y{constructor(e,t){super(["ltrim",...e],t)}},e4=class extends y{constructor(e,t){super(["mget",...Array.isArray(e[0])?e[0]:e],t)}},e9=class extends y{constructor([e],t){super(["mset",...Object.entries(e).flatMap(([e,t])=>[e,t])],t)}},e7=class extends y{constructor([e],t){super(["msetnx",...Object.entries(e).flat()],t)}},te=class extends y{constructor(e,t){super(["persist",...e],t)}},tt=class extends y{constructor(e,t){super(["pexpire",...e],t)}},tr=class extends y{constructor(e,t){super(["pexpireat",...e],t)}},tn=class extends y{constructor(e,t){super(["pfadd",...e],t)}},ti=class extends y{constructor(e,t){super(["pfcount",...e],t)}},ts=class extends y{constructor(e,t){super(["pfmerge",...e],t)}},ta=class extends y{constructor(e,t){let r=["ping"];e?.[0]!==void 0&&r.push(e[0]),super(r,t)}},to=class extends y{constructor(e,t){super(["psetex",...e],t)}},tc=class extends y{constructor(e,t){super(["pttl",...e],t)}},tl=class extends y{constructor(e,t){super(["publish",...e],t)}},tu=class extends y{constructor(e){super(["randomkey"],e)}},td=class extends y{constructor(e,t){super(["rename",...e],t)}},th=class extends y{constructor(e,t){super(["renamenx",...e],t)}},tp=class extends y{constructor(e,t){super(["rpop",...e],t)}},tf=class extends y{constructor(e,t){super(["rpush",...e],t)}},tm=class extends y{constructor(e,t){super(["rpushx",...e],t)}},ty=class extends y{constructor(e,t){super(["sadd",...e],t)}},tb=class extends y{constructor([e,t],r){let n=["scan",e];t?.match&&n.push("match",t.match),"number"==typeof t?.count&&n.push("count",t.count),t&&"withType"in t&&!0===t.withType?n.push("withtype"):t&&"type"in t&&t.type&&t.type.length>0&&n.push("type",t.type),super(n,{deserialize:t?.withType?u:l,...r})}},tw=class extends y{constructor(e,t){super(["scard",...e],t)}},tg=class extends y{constructor(e,t){super(["script","exists",...e],{deserialize:e=>e,...t})}},tx=class extends y{constructor([e],t){let r=["script","flush"];e?.sync?r.push("sync"):e?.async&&r.push("async"),super(r,t)}},tv=class extends y{constructor(e,t){super(["script","load",...e],t)}},t_=class extends y{constructor(e,t){super(["sdiff",...e],t)}},tk=class extends y{constructor(e,t){super(["sdiffstore",...e],t)}},tS=class extends y{constructor([e,t,r],n){let i=["set",e,t];r&&("nx"in r&&r.nx?i.push("nx"):"xx"in r&&r.xx&&i.push("xx"),"get"in r&&r.get&&i.push("get"),"ex"in r&&"number"==typeof r.ex?i.push("ex",r.ex):"px"in r&&"number"==typeof r.px?i.push("px",r.px):"exat"in r&&"number"==typeof r.exat?i.push("exat",r.exat):"pxat"in r&&"number"==typeof r.pxat?i.push("pxat",r.pxat):"keepTtl"in r&&r.keepTtl&&i.push("keepTtl")),super(i,n)}},tA=class extends y{constructor(e,t){super(["setbit",...e],t)}},tE=class extends y{constructor(e,t){super(["setex",...e],t)}},tR=class extends y{constructor(e,t){super(["setnx",...e],t)}},tT=class extends y{constructor(e,t){super(["setrange",...e],t)}},tO=class extends y{constructor(e,t){super(["sinter",...e],t)}},tP=class extends y{constructor(e,t){super(["sinterstore",...e],t)}},tC=class extends y{constructor(e,t){super(["sismember",...e],t)}},tI=class extends y{constructor(e,t){super(["smembers",...e],t)}},tU=class extends y{constructor(e,t){super(["smismember",e[0],...e[1]],t)}},tj=class extends y{constructor(e,t){super(["smove",...e],t)}},tD=class extends y{constructor([e,t],r){let n=["spop",e];"number"==typeof t&&n.push(t),super(n,r)}},t$=class extends y{constructor([e,t],r){let n=["srandmember",e];"number"==typeof t&&n.push(t),super(n,r)}},tN=class extends y{constructor(e,t){super(["srem",...e],t)}},tL=class extends y{constructor([e,t,r],n){let i=["sscan",e,t];r?.match&&i.push("match",r.match),"number"==typeof r?.count&&i.push("count",r.count),super(i,{deserialize:l,...n})}},tM=class extends y{constructor(e,t){super(["strlen",...e],t)}},tH=class extends y{constructor(e,t){super(["sunion",...e],t)}},tW=class extends y{constructor(e,t){super(["sunionstore",...e],t)}},tK=class extends y{constructor(e){super(["time"],e)}},tB=class extends y{constructor(e,t){super(["touch",...e],t)}},tz=class extends y{constructor(e,t){super(["ttl",...e],t)}},tq=class extends y{constructor(e,t){super(["type",...e],t)}},tJ=class extends y{constructor(e,t){super(["unlink",...e],t)}},tF=class extends y{constructor([e,t,r],n){super(["XACK",e,t,...Array.isArray(r)?[...r]:[r]],n)}},tG=class extends y{constructor([e,t,r,n],i){let s=["XADD",e];for(let[e,i]of(n&&(n.nomkStream&&s.push("NOMKSTREAM"),n.trim&&(s.push(n.trim.type,n.trim.comparison,n.trim.threshold),void 0!==n.trim.limit&&s.push("LIMIT",n.trim.limit))),s.push(t),Object.entries(r)))s.push(e,i);super(s,i)}},tV=class extends y{constructor([e,t,r,n,i,s],a){let o=[];s?.count&&o.push("COUNT",s.count),s?.justId&&o.push("JUSTID"),super(["XAUTOCLAIM",e,t,r,n,i,...o],a)}},tX=class extends y{constructor([e,t,r,n,i,s],a){let o=Array.isArray(i)?[...i]:[i],c=[];s?.idleMS&&c.push("IDLE",s.idleMS),s?.idleMS&&c.push("TIME",s.timeMS),s?.retryCount&&c.push("RETRYCOUNT",s.retryCount),s?.force&&c.push("FORCE"),s?.justId&&c.push("JUSTID"),s?.lastId&&c.push("LASTID",s.lastId),super(["XCLAIM",e,t,r,n,...o,...c],a)}},tY=class extends y{constructor([e,t],r){super(["XDEL",e,...Array.isArray(t)?[...t]:[t]],r)}},tZ=class extends y{constructor([e,t],r){let n=["XGROUP"];switch(t.type){case"CREATE":n.push("CREATE",e,t.group,t.id),t.options&&(t.options.MKSTREAM&&n.push("MKSTREAM"),void 0!==t.options.ENTRIESREAD&&n.push("ENTRIESREAD",t.options.ENTRIESREAD.toString()));break;case"CREATECONSUMER":n.push("CREATECONSUMER",e,t.group,t.consumer);break;case"DELCONSUMER":n.push("DELCONSUMER",e,t.group,t.consumer);break;case"DESTROY":n.push("DESTROY",e,t.group);break;case"SETID":n.push("SETID",e,t.group,t.id),t.options?.ENTRIESREAD!==void 0&&n.push("ENTRIESREAD",t.options.ENTRIESREAD.toString());break;default:throw Error("Invalid XGROUP")}super(n,r)}},tQ=class extends y{constructor([e,t],r){let n=[];"CONSUMERS"===t.type?n.push("CONSUMERS",e,t.group):n.push("GROUPS",e),super(["XINFO",...n],r)}},t0=class extends y{constructor(e,t){super(["XLEN",...e],t)}},t1=class extends y{constructor([e,t,r,n,i,s],a){super(["XPENDING",e,t,...s?.idleTime?["IDLE",s.idleTime]:[],r,n,i,...s?.consumer===void 0?[]:Array.isArray(s.consumer)?[...s.consumer]:[s.consumer]],a)}},t2=class extends y{constructor([e,t,r,n],i){let s=["XRANGE",e,t,r];"number"==typeof n&&s.push("COUNT",n),super(s,{deserialize:e=>(function(e){let t={};for(let r of e)for(let e=0;e<r.length;e+=2){let n=r[e],i=r[e+1];n in t||(t[n]={});for(let e=0;e<i.length;e+=2){let r=i[e],s=i[e+1];try{t[n][r]=JSON.parse(s)}catch{t[n][r]=s}}}return t})(e),...i})}},t5=class extends y{constructor([e,t,r],n){if(Array.isArray(e)&&Array.isArray(t)&&e.length!==t.length)throw Error("ERR Unbalanced XREAD list of streams: for each stream key an ID or '$' must be specified");let i=[];"number"==typeof r?.count&&i.push("COUNT",r.count),"number"==typeof r?.blockMS&&i.push("BLOCK",r.blockMS),i.push("STREAMS",...Array.isArray(e)?[...e]:[e],...Array.isArray(t)?[...t]:[t]),super(["XREAD",...i],n)}},t6=class extends y{constructor([e,t,r,n,i],s){if(Array.isArray(r)&&Array.isArray(n)&&r.length!==n.length)throw Error("ERR Unbalanced XREADGROUP list of streams: for each stream key an ID or '$' must be specified");let a=[];"number"==typeof i?.count&&a.push("COUNT",i.count),"number"==typeof i?.blockMS&&a.push("BLOCK",i.blockMS),"boolean"==typeof i?.NOACK&&i.NOACK&&a.push("NOACK"),a.push("STREAMS",...Array.isArray(r)?[...r]:[r],...Array.isArray(n)?[...n]:[n]),super(["XREADGROUP","GROUP",e,t,...a],s)}},t3=class extends y{constructor([e,t,r,n],i){let s=["XREVRANGE",e,t,r];"number"==typeof n&&s.push("COUNT",n),super(s,{deserialize:e=>(function(e){let t={};for(let r of e)for(let e=0;e<r.length;e+=2){let n=r[e],i=r[e+1];n in t||(t[n]={});for(let e=0;e<i.length;e+=2){let r=i[e],s=i[e+1];try{t[n][r]=JSON.parse(s)}catch{t[n][r]=s}}}return t})(e),...i})}},t8=class extends y{constructor([e,t],r){let{limit:n,strategy:i,threshold:s,exactness:a="~"}=t;super(["XTRIM",e,i,a,s,...n?["LIMIT",n]:[]],r)}},t4=class extends y{constructor([e,t,...r],n){let i=["zadd",e];"nx"in t&&t.nx?i.push("nx"):"xx"in t&&t.xx&&i.push("xx"),"ch"in t&&t.ch&&i.push("ch"),"incr"in t&&t.incr&&i.push("incr"),"lt"in t&&t.lt?i.push("lt"):"gt"in t&&t.gt&&i.push("gt"),"score"in t&&"member"in t&&i.push(t.score,t.member),i.push(...r.flatMap(({score:e,member:t})=>[e,t])),super(i,n)}},t9=class extends y{constructor(e,t){super(["zcard",...e],t)}},t7=class extends y{constructor(e,t){super(["zcount",...e],t)}},re=class extends y{constructor(e,t){super(["zincrby",...e],t)}},rt=class extends y{constructor([e,t,r,n],i){let s=["zinterstore",e,t];Array.isArray(r)?s.push(...r):s.push(r),n&&("weights"in n&&n.weights?s.push("weights",...n.weights):"weight"in n&&"number"==typeof n.weight&&s.push("weights",n.weight),"aggregate"in n&&s.push("aggregate",n.aggregate)),super(s,i)}},rr=class extends y{constructor(e,t){super(["zlexcount",...e],t)}},rn=class extends y{constructor([e,t],r){let n=["zpopmax",e];"number"==typeof t&&n.push(t),super(n,r)}},ri=class extends y{constructor([e,t],r){let n=["zpopmin",e];"number"==typeof t&&n.push(t),super(n,r)}},rs=class extends y{constructor([e,t,r,n],i){let s=["zrange",e,t,r];n?.byScore&&s.push("byscore"),n?.byLex&&s.push("bylex"),n?.rev&&s.push("rev"),n?.count!==void 0&&void 0!==n.offset&&s.push("limit",n.offset,n.count),n?.withScores&&s.push("withscores"),super(s,i)}},ra=class extends y{constructor(e,t){super(["zrank",...e],t)}},ro=class extends y{constructor(e,t){super(["zrem",...e],t)}},rc=class extends y{constructor(e,t){super(["zremrangebylex",...e],t)}},rl=class extends y{constructor(e,t){super(["zremrangebyrank",...e],t)}},ru=class extends y{constructor(e,t){super(["zremrangebyscore",...e],t)}},rd=class extends y{constructor(e,t){super(["zrevrank",...e],t)}},rh=class extends y{constructor([e,t,r],n){let i=["zscan",e,t];r?.match&&i.push("match",r.match),"number"==typeof r?.count&&i.push("count",r.count),super(i,{deserialize:l,...n})}},rp=class extends y{constructor(e,t){super(["zscore",...e],t)}},rf=class extends y{constructor([e,t,r],n){let i=["zunion",e];Array.isArray(t)?i.push(...t):i.push(t),r&&("weights"in r&&r.weights?i.push("weights",...r.weights):"weight"in r&&"number"==typeof r.weight&&i.push("weights",r.weight),"aggregate"in r&&i.push("aggregate",r.aggregate),r.withScores&&i.push("withscores")),super(i,n)}},rm=class extends y{constructor([e,t,r,n],i){let s=["zunionstore",e,t];Array.isArray(r)?s.push(...r):s.push(r),n&&("weights"in n&&n.weights?s.push("weights",...n.weights):"weight"in n&&"number"==typeof n.weight&&s.push("weights",n.weight),"aggregate"in n&&s.push("aggregate",n.aggregate)),super(s,i)}},ry=class extends y{constructor(e,t){super(["zdiffstore",...e],t)}},rb=class extends y{constructor(e,t){let[r,n]=e;super(["zmscore",r,...n],t)}},rw=class{client;commands;commandOptions;multiExec;constructor(e){if(this.client=e.client,this.commands=[],this.commandOptions=e.commandOptions,this.multiExec=e.multiExec??!1,this.commandOptions?.latencyLogging){let e=this.exec.bind(this);this.exec=async t=>{let r=performance.now(),n=await (t?e(t):e()),i=(performance.now()-r).toFixed(2);return console.log(`Latency for \x1b[38;2;19;185;39m${this.multiExec?["MULTI-EXEC"]:["PIPELINE"].toString().toUpperCase()}\x1b[0m: \x1b[38;2;0;255;255m${i} ms\x1b[0m`),n}}}exec=async e=>{if(0===this.commands.length)throw Error("Pipeline is empty");let t=this.multiExec?["multi-exec"]:["pipeline"],r=await this.client.request({path:t,body:Object.values(this.commands).map(e=>e.command)});return e?.keepErrors?r.map(({error:e,result:t},r)=>({error:e,result:this.commands[r].deserialize(t)})):r.map(({error:e,result:t},r)=>{if(e)throw new a(`Command ${r+1} [ ${this.commands[r].command[0]} ] failed: ${e}`);return this.commands[r].deserialize(t)})};length(){return this.commands.length}chain(e){return this.commands.push(e),this}append=(...e)=>this.chain(new w(e,this.commandOptions));bitcount=(...e)=>this.chain(new g(e,this.commandOptions));bitfield=(...e)=>new x(e,this.client,this.commandOptions,this.chain.bind(this));bitop=(e,t,r,...n)=>this.chain(new v([e,t,r,...n],this.commandOptions));bitpos=(...e)=>this.chain(new _(e,this.commandOptions));copy=(...e)=>this.chain(new k(e,this.commandOptions));zdiffstore=(...e)=>this.chain(new ry(e,this.commandOptions));dbsize=()=>this.chain(new S(this.commandOptions));decr=(...e)=>this.chain(new A(e,this.commandOptions));decrby=(...e)=>this.chain(new E(e,this.commandOptions));del=(...e)=>this.chain(new R(e,this.commandOptions));echo=(...e)=>this.chain(new T(e,this.commandOptions));evalRo=(...e)=>this.chain(new O(e,this.commandOptions));eval=(...e)=>this.chain(new P(e,this.commandOptions));evalshaRo=(...e)=>this.chain(new C(e,this.commandOptions));evalsha=(...e)=>this.chain(new I(e,this.commandOptions));exists=(...e)=>this.chain(new j(e,this.commandOptions));expire=(...e)=>this.chain(new D(e,this.commandOptions));expireat=(...e)=>this.chain(new $(e,this.commandOptions));flushall=e=>this.chain(new N(e,this.commandOptions));flushdb=(...e)=>this.chain(new L(e,this.commandOptions));geoadd=(...e)=>this.chain(new M(e,this.commandOptions));geodist=(...e)=>this.chain(new H(e,this.commandOptions));geopos=(...e)=>this.chain(new K(e,this.commandOptions));geohash=(...e)=>this.chain(new W(e,this.commandOptions));geosearch=(...e)=>this.chain(new B(e,this.commandOptions));geosearchstore=(...e)=>this.chain(new z(e,this.commandOptions));get=(...e)=>this.chain(new q(e,this.commandOptions));getbit=(...e)=>this.chain(new J(e,this.commandOptions));getdel=(...e)=>this.chain(new F(e,this.commandOptions));getex=(...e)=>this.chain(new G(e,this.commandOptions));getrange=(...e)=>this.chain(new V(e,this.commandOptions));getset=(e,t)=>this.chain(new X([e,t],this.commandOptions));hdel=(...e)=>this.chain(new Y(e,this.commandOptions));hexists=(...e)=>this.chain(new Z(e,this.commandOptions));hexpire=(...e)=>this.chain(new Q(e,this.commandOptions));hexpireat=(...e)=>this.chain(new ee(e,this.commandOptions));hexpiretime=(...e)=>this.chain(new et(e,this.commandOptions));httl=(...e)=>this.chain(new eg(e,this.commandOptions));hpexpire=(...e)=>this.chain(new en(e,this.commandOptions));hpexpireat=(...e)=>this.chain(new ei(e,this.commandOptions));hpexpiretime=(...e)=>this.chain(new es(e,this.commandOptions));hpttl=(...e)=>this.chain(new ea(e,this.commandOptions));hpersist=(...e)=>this.chain(new er(e,this.commandOptions));hget=(...e)=>this.chain(new eo(e,this.commandOptions));hgetall=(...e)=>this.chain(new ec(e,this.commandOptions));hincrby=(...e)=>this.chain(new el(e,this.commandOptions));hincrbyfloat=(...e)=>this.chain(new eu(e,this.commandOptions));hkeys=(...e)=>this.chain(new ed(e,this.commandOptions));hlen=(...e)=>this.chain(new eh(e,this.commandOptions));hmget=(...e)=>this.chain(new ep(e,this.commandOptions));hmset=(e,t)=>this.chain(new ef([e,t],this.commandOptions));hrandfield=(e,t,r)=>this.chain(new b([e,t,r],this.commandOptions));hscan=(...e)=>this.chain(new em(e,this.commandOptions));hset=(e,t)=>this.chain(new ey([e,t],this.commandOptions));hsetnx=(e,t,r)=>this.chain(new eb([e,t,r],this.commandOptions));hstrlen=(...e)=>this.chain(new ew(e,this.commandOptions));hvals=(...e)=>this.chain(new ex(e,this.commandOptions));incr=(...e)=>this.chain(new ev(e,this.commandOptions));incrby=(...e)=>this.chain(new e_(e,this.commandOptions));incrbyfloat=(...e)=>this.chain(new ek(e,this.commandOptions));keys=(...e)=>this.chain(new eF(e,this.commandOptions));lindex=(...e)=>this.chain(new eG(e,this.commandOptions));linsert=(e,t,r,n)=>this.chain(new eV([e,t,r,n],this.commandOptions));llen=(...e)=>this.chain(new eX(e,this.commandOptions));lmove=(...e)=>this.chain(new eY(e,this.commandOptions));lpop=(...e)=>this.chain(new eQ(e,this.commandOptions));lmpop=(...e)=>this.chain(new eZ(e,this.commandOptions));lpos=(...e)=>this.chain(new e0(e,this.commandOptions));lpush=(e,...t)=>this.chain(new e1([e,...t],this.commandOptions));lpushx=(e,...t)=>this.chain(new e2([e,...t],this.commandOptions));lrange=(...e)=>this.chain(new e5(e,this.commandOptions));lrem=(e,t,r)=>this.chain(new e6([e,t,r],this.commandOptions));lset=(e,t,r)=>this.chain(new e3([e,t,r],this.commandOptions));ltrim=(...e)=>this.chain(new e8(e,this.commandOptions));mget=(...e)=>this.chain(new e4(e,this.commandOptions));mset=e=>this.chain(new e9([e],this.commandOptions));msetnx=e=>this.chain(new e7([e],this.commandOptions));persist=(...e)=>this.chain(new te(e,this.commandOptions));pexpire=(...e)=>this.chain(new tt(e,this.commandOptions));pexpireat=(...e)=>this.chain(new tr(e,this.commandOptions));pfadd=(...e)=>this.chain(new tn(e,this.commandOptions));pfcount=(...e)=>this.chain(new ti(e,this.commandOptions));pfmerge=(...e)=>this.chain(new ts(e,this.commandOptions));ping=e=>this.chain(new ta(e,this.commandOptions));psetex=(e,t,r)=>this.chain(new to([e,t,r],this.commandOptions));pttl=(...e)=>this.chain(new tc(e,this.commandOptions));publish=(...e)=>this.chain(new tl(e,this.commandOptions));randomkey=()=>this.chain(new tu(this.commandOptions));rename=(...e)=>this.chain(new td(e,this.commandOptions));renamenx=(...e)=>this.chain(new th(e,this.commandOptions));rpop=(...e)=>this.chain(new tp(e,this.commandOptions));rpush=(e,...t)=>this.chain(new tf([e,...t],this.commandOptions));rpushx=(e,...t)=>this.chain(new tm([e,...t],this.commandOptions));sadd=(e,t,...r)=>this.chain(new ty([e,t,...r],this.commandOptions));scan=(...e)=>this.chain(new tb(e,this.commandOptions));scard=(...e)=>this.chain(new tw(e,this.commandOptions));scriptExists=(...e)=>this.chain(new tg(e,this.commandOptions));scriptFlush=(...e)=>this.chain(new tx(e,this.commandOptions));scriptLoad=(...e)=>this.chain(new tv(e,this.commandOptions));sdiff=(...e)=>this.chain(new t_(e,this.commandOptions));sdiffstore=(...e)=>this.chain(new tk(e,this.commandOptions));set=(e,t,r)=>this.chain(new tS([e,t,r],this.commandOptions));setbit=(...e)=>this.chain(new tA(e,this.commandOptions));setex=(e,t,r)=>this.chain(new tE([e,t,r],this.commandOptions));setnx=(e,t)=>this.chain(new tR([e,t],this.commandOptions));setrange=(...e)=>this.chain(new tT(e,this.commandOptions));sinter=(...e)=>this.chain(new tO(e,this.commandOptions));sinterstore=(...e)=>this.chain(new tP(e,this.commandOptions));sismember=(e,t)=>this.chain(new tC([e,t],this.commandOptions));smembers=(...e)=>this.chain(new tI(e,this.commandOptions));smismember=(e,t)=>this.chain(new tU([e,t],this.commandOptions));smove=(e,t,r)=>this.chain(new tj([e,t,r],this.commandOptions));spop=(...e)=>this.chain(new tD(e,this.commandOptions));srandmember=(...e)=>this.chain(new t$(e,this.commandOptions));srem=(e,...t)=>this.chain(new tN([e,...t],this.commandOptions));sscan=(...e)=>this.chain(new tL(e,this.commandOptions));strlen=(...e)=>this.chain(new tM(e,this.commandOptions));sunion=(...e)=>this.chain(new tH(e,this.commandOptions));sunionstore=(...e)=>this.chain(new tW(e,this.commandOptions));time=()=>this.chain(new tK(this.commandOptions));touch=(...e)=>this.chain(new tB(e,this.commandOptions));ttl=(...e)=>this.chain(new tz(e,this.commandOptions));type=(...e)=>this.chain(new tq(e,this.commandOptions));unlink=(...e)=>this.chain(new tJ(e,this.commandOptions));zadd=(...e)=>(e[1],this.chain(new t4([e[0],e[1],...e.slice(2)],this.commandOptions)));xadd=(...e)=>this.chain(new tG(e,this.commandOptions));xack=(...e)=>this.chain(new tF(e,this.commandOptions));xdel=(...e)=>this.chain(new tY(e,this.commandOptions));xgroup=(...e)=>this.chain(new tZ(e,this.commandOptions));xread=(...e)=>this.chain(new t5(e,this.commandOptions));xreadgroup=(...e)=>this.chain(new t6(e,this.commandOptions));xinfo=(...e)=>this.chain(new tQ(e,this.commandOptions));xlen=(...e)=>this.chain(new t0(e,this.commandOptions));xpending=(...e)=>this.chain(new t1(e,this.commandOptions));xclaim=(...e)=>this.chain(new tX(e,this.commandOptions));xautoclaim=(...e)=>this.chain(new tV(e,this.commandOptions));xtrim=(...e)=>this.chain(new t8(e,this.commandOptions));xrange=(...e)=>this.chain(new t2(e,this.commandOptions));xrevrange=(...e)=>this.chain(new t3(e,this.commandOptions));zcard=(...e)=>this.chain(new t9(e,this.commandOptions));zcount=(...e)=>this.chain(new t7(e,this.commandOptions));zincrby=(e,t,r)=>this.chain(new re([e,t,r],this.commandOptions));zinterstore=(...e)=>this.chain(new rt(e,this.commandOptions));zlexcount=(...e)=>this.chain(new rr(e,this.commandOptions));zmscore=(...e)=>this.chain(new rb(e,this.commandOptions));zpopmax=(...e)=>this.chain(new rn(e,this.commandOptions));zpopmin=(...e)=>this.chain(new ri(e,this.commandOptions));zrange=(...e)=>this.chain(new rs(e,this.commandOptions));zrank=(e,t)=>this.chain(new ra([e,t],this.commandOptions));zrem=(e,...t)=>this.chain(new ro([e,...t],this.commandOptions));zremrangebylex=(...e)=>this.chain(new rc(e,this.commandOptions));zremrangebyrank=(...e)=>this.chain(new rl(e,this.commandOptions));zremrangebyscore=(...e)=>this.chain(new ru(e,this.commandOptions));zrevrank=(e,t)=>this.chain(new rd([e,t],this.commandOptions));zscan=(...e)=>this.chain(new rh(e,this.commandOptions));zscore=(e,t)=>this.chain(new rp([e,t],this.commandOptions));zunionstore=(...e)=>this.chain(new rm(e,this.commandOptions));zunion=(...e)=>this.chain(new rf(e,this.commandOptions));get json(){return{arrappend:(...e)=>this.chain(new eS(e,this.commandOptions)),arrindex:(...e)=>this.chain(new eA(e,this.commandOptions)),arrinsert:(...e)=>this.chain(new eE(e,this.commandOptions)),arrlen:(...e)=>this.chain(new eR(e,this.commandOptions)),arrpop:(...e)=>this.chain(new eT(e,this.commandOptions)),arrtrim:(...e)=>this.chain(new eO(e,this.commandOptions)),clear:(...e)=>this.chain(new eP(e,this.commandOptions)),del:(...e)=>this.chain(new eC(e,this.commandOptions)),forget:(...e)=>this.chain(new eI(e,this.commandOptions)),get:(...e)=>this.chain(new eU(e,this.commandOptions)),merge:(...e)=>this.chain(new ej(e,this.commandOptions)),mget:(...e)=>this.chain(new eD(e,this.commandOptions)),mset:(...e)=>this.chain(new e$(e,this.commandOptions)),numincrby:(...e)=>this.chain(new eN(e,this.commandOptions)),nummultby:(...e)=>this.chain(new eL(e,this.commandOptions)),objkeys:(...e)=>this.chain(new eM(e,this.commandOptions)),objlen:(...e)=>this.chain(new eH(e,this.commandOptions)),resp:(...e)=>this.chain(new eW(e,this.commandOptions)),set:(...e)=>this.chain(new eK(e,this.commandOptions)),strappend:(...e)=>this.chain(new eB(e,this.commandOptions)),strlen:(...e)=>this.chain(new ez(e,this.commandOptions)),toggle:(...e)=>this.chain(new eq(e,this.commandOptions)),type:(...e)=>this.chain(new eJ(e,this.commandOptions))}}},rg=new Set(["scan","keys","flushdb","flushall","dbsize","hscan","hgetall","hkeys","lrange","sscan","smembers","xrange","xrevrange","zscan","zrange"]),rx=class{pipelinePromises=new WeakMap;activePipeline=null;indexInCurrentPipeline=0;redis;pipeline;pipelineCounter=0;constructor(e){this.redis=e,this.pipeline=e.pipeline()}async withAutoPipeline(e){let t=this.activePipeline??this.redis.pipeline();this.activePipeline||(this.activePipeline=t,this.indexInCurrentPipeline=0);let r=this.indexInCurrentPipeline++;e(t);let n=this.deferExecution().then(()=>{if(!this.pipelinePromises.has(t)){let e=t.exec({keepErrors:!0});this.pipelineCounter+=1,this.pipelinePromises.set(t,e),this.activePipeline=null}return this.pipelinePromises.get(t)}),i=(await n)[r];if(i.error)throw new a(`Command failed: ${i.error}`);return i.result}async deferExecution(){await Promise.resolve(),await Promise.resolve()}},rv=class extends y{constructor(e,t){super([],{...t,headers:{Accept:"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"},path:["psubscribe",...e],streamOptions:{isStreaming:!0,onMessage:t?.streamOptions?.onMessage,signal:t?.streamOptions?.signal}})}},r_=class extends EventTarget{subscriptions;client;listeners;constructor(e,t,r=!1){for(let n of(super(),this.client=e,this.subscriptions=new Map,this.listeners=new Map,t))r?this.subscribeToPattern(n):this.subscribeToChannel(n)}subscribeToChannel(e){let t=new AbortController,r=new rk([e],{streamOptions:{signal:t.signal,onMessage:e=>this.handleMessage(e,!1)}});r.exec(this.client).catch(e=>{"AbortError"!==e.name&&this.dispatchToListeners("error",e)}),this.subscriptions.set(e,{command:r,controller:t,isPattern:!1})}subscribeToPattern(e){let t=new AbortController,r=new rv([e],{streamOptions:{signal:t.signal,onMessage:e=>this.handleMessage(e,!0)}});r.exec(this.client).catch(e=>{"AbortError"!==e.name&&this.dispatchToListeners("error",e)}),this.subscriptions.set(e,{command:r,controller:t,isPattern:!0})}handleMessage(e,t){let r=e.replace(/^data:\s*/,""),n=r.indexOf(","),i=r.indexOf(",",n+1),s=t?r.indexOf(",",i+1):-1;if(-1!==n&&-1!==i){let e=r.slice(0,n);if(t&&"pmessage"===e&&-1!==s){let e=r.slice(n+1,i),t=r.slice(i+1,s),a=r.slice(s+1);try{let r=JSON.parse(a);this.dispatchToListeners("pmessage",{pattern:e,channel:t,message:r}),this.dispatchToListeners(`pmessage:${e}`,{pattern:e,channel:t,message:r})}catch(e){this.dispatchToListeners("error",Error(`Failed to parse message: ${e}`))}}else{let t=r.slice(n+1,i),s=r.slice(i+1);try{if("subscribe"===e||"psubscribe"===e||"unsubscribe"===e||"punsubscribe"===e){let t=Number.parseInt(s);this.dispatchToListeners(e,t)}else{let r=JSON.parse(s);this.dispatchToListeners(e,{channel:t,message:r}),this.dispatchToListeners(`${e}:${t}`,{channel:t,message:r})}}catch(e){this.dispatchToListeners("error",Error(`Failed to parse message: ${e}`))}}}}dispatchToListeners(e,t){let r=this.listeners.get(e);if(r)for(let e of r)e(t)}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)?.add(t)}removeAllListeners(){this.listeners.clear()}async unsubscribe(e){if(e)for(let t of e){let e=this.subscriptions.get(t);if(e){try{e.controller.abort()}catch{}this.subscriptions.delete(t)}}else{for(let e of this.subscriptions.values())try{e.controller.abort()}catch{}this.subscriptions.clear(),this.removeAllListeners()}}getSubscribedChannels(){return[...this.subscriptions.keys()]}},rk=class extends y{constructor(e,t){super([],{...t,headers:{Accept:"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"},path:["subscribe",...e],streamOptions:{isStreaming:!0,onMessage:t?.streamOptions?.onMessage,signal:t?.streamOptions?.signal}})}},rS=class{script;sha1;redis;constructor(e,t){this.redis=e,this.script=t,this.sha1="",this.init(t)}async init(e){this.sha1||(this.sha1=await this.digest(e))}async eval(e,t){return await this.init(this.script),await this.redis.eval(this.script,e,t)}async evalsha(e,t){return await this.init(this.script),await this.redis.evalsha(this.sha1,e,t)}async exec(e,t){return await this.init(this.script),await this.redis.evalsha(this.sha1,e,t).catch(async r=>{if(r instanceof Error&&r.message.toLowerCase().includes("noscript"))return await this.redis.eval(this.script,e,t);throw r})}async digest(e){let t=new TextEncoder().encode(e);return[...new Uint8Array(await i.digest("SHA-1",t))].map(e=>e.toString(16).padStart(2,"0")).join("")}},rA=class{script;sha1;redis;constructor(e,t){this.redis=e,this.sha1="",this.script=t,this.init(t)}async init(e){this.sha1||(this.sha1=await this.digest(e))}async evalRo(e,t){return await this.init(this.script),await this.redis.evalRo(this.script,e,t)}async evalshaRo(e,t){return await this.init(this.script),await this.redis.evalshaRo(this.sha1,e,t)}async exec(e,t){return await this.init(this.script),await this.redis.evalshaRo(this.sha1,e,t).catch(async r=>{if(r instanceof Error&&r.message.toLowerCase().includes("noscript"))return await this.redis.evalRo(this.script,e,t);throw r})}async digest(e){let t=new TextEncoder().encode(e);return[...new Uint8Array(await i.digest("SHA-1",t))].map(e=>e.toString(16).padStart(2,"0")).join("")}},rE=class{client;opts;enableTelemetry;enableAutoPipelining;constructor(e,t){this.client=e,this.opts=t,this.enableTelemetry=t?.enableTelemetry??!0,t?.readYourWrites===!1&&(this.client.readYourWrites=!1),this.enableAutoPipelining=t?.enableAutoPipelining??!0}get readYourWritesSyncToken(){return this.client.upstashSyncToken}set readYourWritesSyncToken(e){this.client.upstashSyncToken=e}get json(){return{arrappend:(...e)=>new eS(e,this.opts).exec(this.client),arrindex:(...e)=>new eA(e,this.opts).exec(this.client),arrinsert:(...e)=>new eE(e,this.opts).exec(this.client),arrlen:(...e)=>new eR(e,this.opts).exec(this.client),arrpop:(...e)=>new eT(e,this.opts).exec(this.client),arrtrim:(...e)=>new eO(e,this.opts).exec(this.client),clear:(...e)=>new eP(e,this.opts).exec(this.client),del:(...e)=>new eC(e,this.opts).exec(this.client),forget:(...e)=>new eI(e,this.opts).exec(this.client),get:(...e)=>new eU(e,this.opts).exec(this.client),merge:(...e)=>new ej(e,this.opts).exec(this.client),mget:(...e)=>new eD(e,this.opts).exec(this.client),mset:(...e)=>new e$(e,this.opts).exec(this.client),numincrby:(...e)=>new eN(e,this.opts).exec(this.client),nummultby:(...e)=>new eL(e,this.opts).exec(this.client),objkeys:(...e)=>new eM(e,this.opts).exec(this.client),objlen:(...e)=>new eH(e,this.opts).exec(this.client),resp:(...e)=>new eW(e,this.opts).exec(this.client),set:(...e)=>new eK(e,this.opts).exec(this.client),strappend:(...e)=>new eB(e,this.opts).exec(this.client),strlen:(...e)=>new ez(e,this.opts).exec(this.client),toggle:(...e)=>new eq(e,this.opts).exec(this.client),type:(...e)=>new eJ(e,this.opts).exec(this.client)}}use=e=>{let t=this.client.request.bind(this.client);this.client.request=r=>e(r,t)};addTelemetry=e=>{if(this.enableTelemetry)try{this.client.mergeTelemetry(e)}catch{}};createScript(e,t){return t?.readonly?new rA(this,e):new rS(this,e)}pipeline=()=>new rw({client:this.client,commandOptions:this.opts,multiExec:!1});autoPipeline=()=>(function e(t,r){return t.autoPipelineExecutor||(t.autoPipelineExecutor=new rx(t)),new Proxy(t,{get:(t,n)=>{if("pipelineCounter"===n)return t.autoPipelineExecutor.pipelineCounter;if("json"===n)return e(t,!0);let i=n in t&&!(n in t.autoPipelineExecutor.pipeline),s=rg.has(n);return i||s?t[n]:(r?"function"==typeof t.autoPipelineExecutor.pipeline.json[n]:"function"==typeof t.autoPipelineExecutor.pipeline[n])?(...e)=>t.autoPipelineExecutor.withAutoPipeline(t=>{r?t.json[n](...e):t[n](...e)}):t.autoPipelineExecutor.pipeline[n]}})})(this);multi=()=>new rw({client:this.client,commandOptions:this.opts,multiExec:!0});bitfield=(...e)=>new x(e,this.client,this.opts);append=(...e)=>new w(e,this.opts).exec(this.client);bitcount=(...e)=>new g(e,this.opts).exec(this.client);bitop=(e,t,r,...n)=>new v([e,t,r,...n],this.opts).exec(this.client);bitpos=(...e)=>new _(e,this.opts).exec(this.client);copy=(...e)=>new k(e,this.opts).exec(this.client);dbsize=()=>new S(this.opts).exec(this.client);decr=(...e)=>new A(e,this.opts).exec(this.client);decrby=(...e)=>new E(e,this.opts).exec(this.client);del=(...e)=>new R(e,this.opts).exec(this.client);echo=(...e)=>new T(e,this.opts).exec(this.client);evalRo=(...e)=>new O(e,this.opts).exec(this.client);eval=(...e)=>new P(e,this.opts).exec(this.client);evalshaRo=(...e)=>new C(e,this.opts).exec(this.client);evalsha=(...e)=>new I(e,this.opts).exec(this.client);exec=e=>new U(e,this.opts).exec(this.client);exists=(...e)=>new j(e,this.opts).exec(this.client);expire=(...e)=>new D(e,this.opts).exec(this.client);expireat=(...e)=>new $(e,this.opts).exec(this.client);flushall=e=>new N(e,this.opts).exec(this.client);flushdb=(...e)=>new L(e,this.opts).exec(this.client);geoadd=(...e)=>new M(e,this.opts).exec(this.client);geopos=(...e)=>new K(e,this.opts).exec(this.client);geodist=(...e)=>new H(e,this.opts).exec(this.client);geohash=(...e)=>new W(e,this.opts).exec(this.client);geosearch=(...e)=>new B(e,this.opts).exec(this.client);geosearchstore=(...e)=>new z(e,this.opts).exec(this.client);get=(...e)=>new q(e,this.opts).exec(this.client);getbit=(...e)=>new J(e,this.opts).exec(this.client);getdel=(...e)=>new F(e,this.opts).exec(this.client);getex=(...e)=>new G(e,this.opts).exec(this.client);getrange=(...e)=>new V(e,this.opts).exec(this.client);getset=(e,t)=>new X([e,t],this.opts).exec(this.client);hdel=(...e)=>new Y(e,this.opts).exec(this.client);hexists=(...e)=>new Z(e,this.opts).exec(this.client);hexpire=(...e)=>new Q(e,this.opts).exec(this.client);hexpireat=(...e)=>new ee(e,this.opts).exec(this.client);hexpiretime=(...e)=>new et(e,this.opts).exec(this.client);httl=(...e)=>new eg(e,this.opts).exec(this.client);hpexpire=(...e)=>new en(e,this.opts).exec(this.client);hpexpireat=(...e)=>new ei(e,this.opts).exec(this.client);hpexpiretime=(...e)=>new es(e,this.opts).exec(this.client);hpttl=(...e)=>new ea(e,this.opts).exec(this.client);hpersist=(...e)=>new er(e,this.opts).exec(this.client);hget=(...e)=>new eo(e,this.opts).exec(this.client);hgetall=(...e)=>new ec(e,this.opts).exec(this.client);hincrby=(...e)=>new el(e,this.opts).exec(this.client);hincrbyfloat=(...e)=>new eu(e,this.opts).exec(this.client);hkeys=(...e)=>new ed(e,this.opts).exec(this.client);hlen=(...e)=>new eh(e,this.opts).exec(this.client);hmget=(...e)=>new ep(e,this.opts).exec(this.client);hmset=(e,t)=>new ef([e,t],this.opts).exec(this.client);hrandfield=(e,t,r)=>new b([e,t,r],this.opts).exec(this.client);hscan=(...e)=>new em(e,this.opts).exec(this.client);hset=(e,t)=>new ey([e,t],this.opts).exec(this.client);hsetnx=(e,t,r)=>new eb([e,t,r],this.opts).exec(this.client);hstrlen=(...e)=>new ew(e,this.opts).exec(this.client);hvals=(...e)=>new ex(e,this.opts).exec(this.client);incr=(...e)=>new ev(e,this.opts).exec(this.client);incrby=(...e)=>new e_(e,this.opts).exec(this.client);incrbyfloat=(...e)=>new ek(e,this.opts).exec(this.client);keys=(...e)=>new eF(e,this.opts).exec(this.client);lindex=(...e)=>new eG(e,this.opts).exec(this.client);linsert=(e,t,r,n)=>new eV([e,t,r,n],this.opts).exec(this.client);llen=(...e)=>new eX(e,this.opts).exec(this.client);lmove=(...e)=>new eY(e,this.opts).exec(this.client);lpop=(...e)=>new eQ(e,this.opts).exec(this.client);lmpop=(...e)=>new eZ(e,this.opts).exec(this.client);lpos=(...e)=>new e0(e,this.opts).exec(this.client);lpush=(e,...t)=>new e1([e,...t],this.opts).exec(this.client);lpushx=(e,...t)=>new e2([e,...t],this.opts).exec(this.client);lrange=(...e)=>new e5(e,this.opts).exec(this.client);lrem=(e,t,r)=>new e6([e,t,r],this.opts).exec(this.client);lset=(e,t,r)=>new e3([e,t,r],this.opts).exec(this.client);ltrim=(...e)=>new e8(e,this.opts).exec(this.client);mget=(...e)=>new e4(e,this.opts).exec(this.client);mset=e=>new e9([e],this.opts).exec(this.client);msetnx=e=>new e7([e],this.opts).exec(this.client);persist=(...e)=>new te(e,this.opts).exec(this.client);pexpire=(...e)=>new tt(e,this.opts).exec(this.client);pexpireat=(...e)=>new tr(e,this.opts).exec(this.client);pfadd=(...e)=>new tn(e,this.opts).exec(this.client);pfcount=(...e)=>new ti(e,this.opts).exec(this.client);pfmerge=(...e)=>new ts(e,this.opts).exec(this.client);ping=e=>new ta(e,this.opts).exec(this.client);psetex=(e,t,r)=>new to([e,t,r],this.opts).exec(this.client);psubscribe=e=>{let t=Array.isArray(e)?e:[e];return new r_(this.client,t,!0)};pttl=(...e)=>new tc(e,this.opts).exec(this.client);publish=(...e)=>new tl(e,this.opts).exec(this.client);randomkey=()=>new tu().exec(this.client);rename=(...e)=>new td(e,this.opts).exec(this.client);renamenx=(...e)=>new th(e,this.opts).exec(this.client);rpop=(...e)=>new tp(e,this.opts).exec(this.client);rpush=(e,...t)=>new tf([e,...t],this.opts).exec(this.client);rpushx=(e,...t)=>new tm([e,...t],this.opts).exec(this.client);sadd=(e,t,...r)=>new ty([e,t,...r],this.opts).exec(this.client);scan(e,t){return new tb([e,t],this.opts).exec(this.client)}scard=(...e)=>new tw(e,this.opts).exec(this.client);scriptExists=(...e)=>new tg(e,this.opts).exec(this.client);scriptFlush=(...e)=>new tx(e,this.opts).exec(this.client);scriptLoad=(...e)=>new tv(e,this.opts).exec(this.client);sdiff=(...e)=>new t_(e,this.opts).exec(this.client);sdiffstore=(...e)=>new tk(e,this.opts).exec(this.client);set=(e,t,r)=>new tS([e,t,r],this.opts).exec(this.client);setbit=(...e)=>new tA(e,this.opts).exec(this.client);setex=(e,t,r)=>new tE([e,t,r],this.opts).exec(this.client);setnx=(e,t)=>new tR([e,t],this.opts).exec(this.client);setrange=(...e)=>new tT(e,this.opts).exec(this.client);sinter=(...e)=>new tO(e,this.opts).exec(this.client);sinterstore=(...e)=>new tP(e,this.opts).exec(this.client);sismember=(e,t)=>new tC([e,t],this.opts).exec(this.client);smismember=(e,t)=>new tU([e,t],this.opts).exec(this.client);smembers=(...e)=>new tI(e,this.opts).exec(this.client);smove=(e,t,r)=>new tj([e,t,r],this.opts).exec(this.client);spop=(...e)=>new tD(e,this.opts).exec(this.client);srandmember=(...e)=>new t$(e,this.opts).exec(this.client);srem=(e,...t)=>new tN([e,...t],this.opts).exec(this.client);sscan=(...e)=>new tL(e,this.opts).exec(this.client);strlen=(...e)=>new tM(e,this.opts).exec(this.client);subscribe=e=>{let t=Array.isArray(e)?e:[e];return new r_(this.client,t)};sunion=(...e)=>new tH(e,this.opts).exec(this.client);sunionstore=(...e)=>new tW(e,this.opts).exec(this.client);time=()=>new tK().exec(this.client);touch=(...e)=>new tB(e,this.opts).exec(this.client);ttl=(...e)=>new tz(e,this.opts).exec(this.client);type=(...e)=>new tq(e,this.opts).exec(this.client);unlink=(...e)=>new tJ(e,this.opts).exec(this.client);xadd=(...e)=>new tG(e,this.opts).exec(this.client);xack=(...e)=>new tF(e,this.opts).exec(this.client);xdel=(...e)=>new tY(e,this.opts).exec(this.client);xgroup=(...e)=>new tZ(e,this.opts).exec(this.client);xread=(...e)=>new t5(e,this.opts).exec(this.client);xreadgroup=(...e)=>new t6(e,this.opts).exec(this.client);xinfo=(...e)=>new tQ(e,this.opts).exec(this.client);xlen=(...e)=>new t0(e,this.opts).exec(this.client);xpending=(...e)=>new t1(e,this.opts).exec(this.client);xclaim=(...e)=>new tX(e,this.opts).exec(this.client);xautoclaim=(...e)=>new tV(e,this.opts).exec(this.client);xtrim=(...e)=>new t8(e,this.opts).exec(this.client);xrange=(...e)=>new t2(e,this.opts).exec(this.client);xrevrange=(...e)=>new t3(e,this.opts).exec(this.client);zadd=(...e)=>(e[1],new t4([e[0],e[1],...e.slice(2)],this.opts).exec(this.client));zcard=(...e)=>new t9(e,this.opts).exec(this.client);zcount=(...e)=>new t7(e,this.opts).exec(this.client);zdiffstore=(...e)=>new ry(e,this.opts).exec(this.client);zincrby=(e,t,r)=>new re([e,t,r],this.opts).exec(this.client);zinterstore=(...e)=>new rt(e,this.opts).exec(this.client);zlexcount=(...e)=>new rr(e,this.opts).exec(this.client);zmscore=(...e)=>new rb(e,this.opts).exec(this.client);zpopmax=(...e)=>new rn(e,this.opts).exec(this.client);zpopmin=(...e)=>new ri(e,this.opts).exec(this.client);zrange=(...e)=>new rs(e,this.opts).exec(this.client);zrank=(e,t)=>new ra([e,t],this.opts).exec(this.client);zrem=(e,...t)=>new ro([e,...t],this.opts).exec(this.client);zremrangebylex=(...e)=>new rc(e,this.opts).exec(this.client);zremrangebyrank=(...e)=>new rl(e,this.opts).exec(this.client);zremrangebyscore=(...e)=>new ru(e,this.opts).exec(this.client);zrevrank=(e,t)=>new rd([e,t],this.opts).exec(this.client);zscan=(...e)=>new rh(e,this.opts).exec(this.client);zscore=(e,t)=>new rp([e,t],this.opts).exec(this.client);zunion=(...e)=>new rf(e,this.opts).exec(this.client);zunionstore=(...e)=>new rm(e,this.opts).exec(this.client)};"undefined"==typeof atob&&(global.atob=e=>Buffer.from(e,"base64").toString("utf8"));var rR=class e extends rE{constructor(e){if("request"in e){super(e);return}if(e.url?(e.url.startsWith(" ")||e.url.endsWith(" ")||/\r|\n/.test(e.url))&&console.warn("[Upstash Redis] The redis url contains whitespace or newline, which can cause errors!"):console.warn("[Upstash Redis] The 'url' property is missing or undefined in your Redis config."),e.token?(e.token.startsWith(" ")||e.token.endsWith(" ")||/\r|\n/.test(e.token))&&console.warn("[Upstash Redis] The redis token contains whitespace or newline, which can cause errors!"):console.warn("[Upstash Redis] The 'token' property is missing or undefined in your Redis config."),super(new d({baseUrl:e.url,retry:e.retry,headers:{authorization:`Bearer ${e.token}`},agent:e.agent,responseEncoding:e.responseEncoding,cache:e.cache??"no-store",signal:e.signal,keepAlive:e.keepAlive,readYourWrites:e.readYourWrites}),{automaticDeserialization:e.automaticDeserialization,enableTelemetry:!process.env.UPSTASH_DISABLE_TELEMETRY,latencyLogging:e.latencyLogging,enableAutoPipelining:e.enableAutoPipelining}),this.addTelemetry({runtime:"string"==typeof EdgeRuntime?"edge-light":`node@${process.version}`,platform:process.env.VERCEL?"vercel":process.env.AWS_REGION?"aws":"unknown",sdk:"@upstash/redis@v1.35.0"}),this.enableAutoPipelining)return this.autoPipeline()}static fromEnv(t){if(void 0===process.env)throw TypeError('[Upstash Redis] Unable to get environment variables, `process.env` is undefined. If you are deploying to cloudflare, please import from "@upstash/redis/cloudflare" instead');let r=process.env.UPSTASH_REDIS_REST_URL||process.env.KV_REST_API_URL;r||console.warn("[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_URL`");let n=process.env.UPSTASH_REDIS_REST_TOKEN||process.env.KV_REST_API_TOKEN;return n||console.warn("[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`"),new e({...t,url:r,token:n})}}},96522:(e,t,r)=>{"use strict";let n,i,s,a,o,c,l;r.d(t,{Ay:()=>s4});var u={};r.r(u),r.d(u,{q:()=>tJ,l:()=>tV});var d=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},h=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function p(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class f{constructor(e,t,r){if(rx.add(this),rv.set(this,{}),r_.set(this,void 0),rk.set(this,void 0),d(this,rk,r,"f"),d(this,r_,e,"f"),!t)return;let{name:n}=e;for(let[e,r]of Object.entries(t))e.startsWith(n)&&r&&(h(this,rv,"f")[e]=r)}get value(){return Object.keys(h(this,rv,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>h(this,rv,"f")[e]).join("")}chunk(e,t){let r=h(this,rx,"m",rA).call(this);for(let n of h(this,rx,"m",rS).call(this,{name:h(this,r_,"f").name,value:e,options:{...h(this,r_,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(h(this,rx,"m",rA).call(this))}}rv=new WeakMap,r_=new WeakMap,rk=new WeakMap,rx=new WeakSet,rS=function(e){let t=Math.ceil(e.value.length/3936);if(1===t)return h(this,rv,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(3936*n,3936);r.push({...e,name:t,value:i}),h(this,rv,"f")[t]=i}return h(this,rk,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(e=>e.value.length+160)}),r},rA=function(){let e={};for(let t in h(this,rv,"f"))delete h(this,rv,"f")?.[t],e[t]={name:t,value:"",options:{...h(this,r_,"f").options,maxAge:0}};return e};class m extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class y extends m{}y.kind="signIn";class b extends m{}b.type="AdapterError";class w extends m{}w.type="AccessDenied";class g extends m{}g.type="CallbackRouteError";class x extends m{}x.type="ErrorPageLoop";class v extends m{}v.type="EventError";class _ extends m{}_.type="InvalidCallbackUrl";class k extends y{constructor(){super(...arguments),this.code="credentials"}}k.type="CredentialsSignin";class S extends m{}S.type="InvalidEndpoints";class A extends m{}A.type="InvalidCheck";class E extends m{}E.type="JWTSessionError";class R extends m{}R.type="MissingAdapter";class T extends m{}T.type="MissingAdapterMethods";class O extends m{}O.type="MissingAuthorize";class P extends m{}P.type="MissingSecret";class C extends y{}C.type="OAuthAccountNotLinked";class I extends y{}I.type="OAuthCallbackError";class U extends m{}U.type="OAuthProfileParseError";class j extends m{}j.type="SessionTokenError";class D extends y{}D.type="OAuthSignInError";class $ extends y{}$.type="EmailSignInError";class N extends m{}N.type="SignOutError";class L extends m{}L.type="UnknownAction";class M extends m{}M.type="UnsupportedStrategy";class H extends m{}H.type="InvalidProvider";class W extends m{}W.type="UntrustedHost";class K extends m{}K.type="Verification";class B extends y{}B.type="MissingCSRF";let z=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class q extends m{}q.type="DuplicateConditionalUI";class J extends m{}J.type="MissingWebAuthnAutocomplete";class F extends m{}F.type="WebAuthnVerificationError";class G extends y{}G.type="AccountNotLinked";class V extends m{}V.type="ExperimentalFeatureNotEnabled";let X=!1;function Y(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let Z=!1,Q=!1,ee=!1,et=["createVerificationToken","useVerificationToken","getUserByEmail"],er=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],en=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];var ei=r(55511);let es=(e,t,r,n,i)=>{let s=parseInt(e.substr(3),10)>>3||20,a=(0,ei.createHmac)(e,r.byteLength?r:new Uint8Array(s)).update(t).digest(),o=Math.ceil(i/s),c=new Uint8Array(s*o+n.byteLength+1),l=0,u=0;for(let t=1;t<=o;t++)c.set(n,u),c[u+n.byteLength]=t,c.set((0,ei.createHmac)(e,a).update(c.subarray(l,u+n.byteLength+1)).digest(),u),l=u,u+=s;return c.slice(0,i)};"function"!=typeof ei.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{ei.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let ea=async(e,t,r,i,s)=>(n||es)(e,t,r,i,s);function eo(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function ec(e,t,r,n,i){return ea(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=eo(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),eo(r,"salt"),function(e){let t=eo(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}let el=async(e,t)=>{let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))},eu=new TextEncoder,ed=new TextDecoder;function eh(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function ep(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function ef(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return ep(r,t,0),ep(r,e%0x100000000,4),r}function em(e){let t=new Uint8Array(4);return ep(t,e),t}function ey(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:ed.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=ed.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return function(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function eb(e){let t=e;return("string"==typeof t&&(t=eu.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class ew extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class eg extends ew{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class ex extends ew{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class ev extends ew{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class e_ extends ew{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class ek extends ew{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class eS extends ew{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class eA extends ew{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class eE extends ew{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class eR extends ew{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}function eT(e){if(!eO(e))throw Error("CryptoKey instance expected")}function eO(e){return e?.[Symbol.toStringTag]==="CryptoKey"}function eP(e){return e?.[Symbol.toStringTag]==="KeyObject"}let eC=e=>eO(e)||eP(e),eI=e=>{if(!function(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function eU(e){return eI(e)&&"string"==typeof e.kty}function ej(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let eD=(e,...t)=>ej("Key must be ",e,...t);function e$(e,t,...r){return ej(`Key for the ${e} algorithm must be `,t,...r)}async function eN(e){if(eP(e)){if("secret"!==e.type)return e.export({format:"jwk"});e=e.export()}if(e instanceof Uint8Array)return{kty:"oct",k:eb(e)};if(!eO(e))throw TypeError(eD(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...s}=await crypto.subtle.exportKey("jwk",e);return s}async function eL(e){return eN(e)}let eM=(e,t)=>{if("string"!=typeof e||!e)throw new eE(`${t} missing or invalid`)};async function eH(e,t){let r,n;if(eU(e))r=e;else if(eC(e))r=await eL(e);else throw TypeError(eD(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"EC":eM(r.crv,'"crv" (Curve) Parameter'),eM(r.x,'"x" (X Coordinate) Parameter'),eM(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":eM(r.crv,'"crv" (Subtype of Key Pair) Parameter'),eM(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":eM(r.e,'"e" (Exponent) Parameter'),eM(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":eM(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new e_('"kty" (Key Type) Parameter missing or unsupported')}let i=eu.encode(JSON.stringify(n));return eb(await el(t,i))}let eW=Symbol();function eK(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new e_(`Unsupported JWE Algorithm: ${e}`)}}let eB=e=>crypto.getRandomValues(new Uint8Array(eK(e)>>3)),ez=(e,t)=>{if(t.length<<3!==eK(e))throw new eS("Invalid Initialization Vector length")},eq=(e,t)=>{let r=e.byteLength<<3;if(r!==t)throw new eS(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)};function eJ(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function eF(e,t){return e.name===t}function eG(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!eF(e.algorithm,"AES-GCM"))throw eJ("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eJ(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!eF(e.algorithm,"AES-KW"))throw eJ("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw eJ(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw eJ("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!eF(e.algorithm,"PBKDF2"))throw eJ("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!eF(e.algorithm,"RSA-OAEP"))throw eJ("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==r)throw eJ(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}(function(e,t){if(t&&!e.usages.includes(t))throw TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)})(e,r)}async function eV(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(eD(r,"Uint8Array"));let s=parseInt(e.slice(1,4),10),a=await crypto.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),o=await crypto.subtle.importKey("raw",r.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},a,t)),l=eh(i,n,c,ef(i.length<<3));return{ciphertext:c,tag:new Uint8Array((await crypto.subtle.sign("HMAC",o,l)).slice(0,s>>3)),iv:n}}async function eX(e,t,r,n,i){let s;r instanceof Uint8Array?s=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(eG(r,e,"encrypt"),s=r);let a=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},s,t)),o=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:o,iv:n}}let eY=async(e,t,r,n,i)=>{if(!eO(r)&&!(r instanceof Uint8Array))throw TypeError(eD(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(n?ez(e,n):n=eB(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&eq(r,parseInt(e.slice(-3),10)),eV(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&eq(r,parseInt(e.slice(1,4),10)),eX(e,t,r,n,i);default:throw new e_("Unsupported JWE Content Encryption Algorithm")}};function eZ(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function eQ(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(eG(e,t,r),e)}async function e0(e,t,r){let n=await eQ(t,e,"wrapKey");eZ(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function e1(e,t,r){let n=await eQ(t,e,"unwrapKey");eZ(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}function e2(e){return eh(em(e.length),e)}async function e5(e,t,r){let n=Math.ceil((t>>3)/32),i=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(em(t+1)),n.set(e,4),n.set(r,4+e.length),i.set(await el("sha256",n),32*t)}return i.slice(0,t>>3)}async function e6(e,t,r,n,i=new Uint8Array(0),s=new Uint8Array(0)){let a;eG(e,"ECDH"),eG(t,"ECDH","deriveBits");let o=eh(e2(eu.encode(r)),e2(i),e2(s),em(n));return a="X25519"===e.algorithm.name?256:Math.ceil(parseInt(e.algorithm.namedCurve.slice(-3),10)/8)<<3,e5(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,a)),n,o)}function e3(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}let e8=(e,t)=>eh(eu.encode(e),new Uint8Array([0]),t);async function e4(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new eS("PBES2 Salt Input must be 8 or more octets");let i=e8(t,e),s=parseInt(t.slice(13,16),10),a={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},o=await (n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(eG(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(a,o,s))}async function e9(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let s=await e4(i,e,n,t);return{encryptedKey:await e0(e.slice(-6),s,r),p2c:n,p2s:eb(i)}}async function e7(e,t,r,n,i){let s=await e4(i,e,n,t);return e1(e.slice(-6),s,r)}let te=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},tt=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new e_(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function tr(e,t,r){return eG(t,e,"encrypt"),te(e,t),new Uint8Array(await crypto.subtle.encrypt(tt(e),t,r))}async function tn(e,t,r){return eG(t,e,"decrypt"),te(e,t),new Uint8Array(await crypto.subtle.decrypt(tt(e),t,r))}let ti=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new e_('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new e_('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new e_('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new e_('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??!e.d,e.key_ops??r)},ts=async(e,t,r,n=!1)=>{let s=(i||=new WeakMap).get(e);if(s?.[r])return s[r];let a=await ti({...t,alg:r});return n&&Object.freeze(e),s?s[r]=a:i.set(e,{[r]:a}),a},ta=(e,t)=>{let r;let n=(i||=new WeakMap).get(e);if(n?.[t])return n[t];let s="public"===e.type,a=!!s;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,a,s?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[s?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let n;switch(t){case"RSA-OAEP":n="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":n="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":n="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":n="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:n},a,s?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:n},a,[s?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let n=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[s?"verify":"sign"])),"ES384"===t&&"P-384"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[s?"verify":"sign"])),"ES512"===t&&"P-521"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[s?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:n},a,s?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:i.set(e,{[t]:r}),r},to=async(e,t)=>{if(e instanceof Uint8Array||eO(e))return e;if(eP(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return ta(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return ts(e,r,t)}if(eU(e))return e.k?ey(e.k):ts(e,e,t,!0);throw Error("unreachable")};function tc(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new e_(`Unsupported JWE Algorithm: ${e}`)}}let tl=e=>crypto.getRandomValues(new Uint8Array(tc(e)>>3));async function tu(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),s=new Uint8Array(await crypto.subtle.sign(r,n,t)),a=0,o=-1;for(;++o<32;)a|=i[o]^s[o];return 0===a}async function td(e,t,r,n,i,s){let a,o;if(!(t instanceof Uint8Array))throw TypeError(eD(t,"Uint8Array"));let c=parseInt(e.slice(1,4),10),l=await crypto.subtle.importKey("raw",t.subarray(c>>3),"AES-CBC",!1,["decrypt"]),u=await crypto.subtle.importKey("raw",t.subarray(0,c>>3),{hash:`SHA-${c<<1}`,name:"HMAC"},!1,["sign"]),d=eh(s,n,r,ef(s.length<<3)),h=new Uint8Array((await crypto.subtle.sign("HMAC",u,d)).slice(0,c>>3));try{a=await tu(i,h)}catch{}if(!a)throw new ek;try{o=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},l,r))}catch{}if(!o)throw new ek;return o}async function th(e,t,r,n,i,s){let a;t instanceof Uint8Array?a=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(eG(t,e,"decrypt"),a=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},a,eh(r,i)))}catch{throw new ek}}let tp=async(e,t,r,n,i,s)=>{if(!eO(t)&&!(t instanceof Uint8Array))throw TypeError(eD(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new eS("JWE Initialization Vector missing");if(!i)throw new eS("JWE Authentication Tag missing");switch(ez(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&eq(t,parseInt(e.slice(-3),10)),td(e,t,r,n,i,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&eq(t,parseInt(e.slice(1,4),10)),th(e,t,r,n,i,s);default:throw new e_("Unsupported JWE Content Encryption Algorithm")}};async function tf(e,t,r,n){let i=e.slice(0,7),s=await eY(i,r,t,n,new Uint8Array(0));return{encryptedKey:s.ciphertext,iv:eb(s.iv),tag:eb(s.tag)}}async function tm(e,t,r,n,i){return tp(e.slice(0,7),t,r,n,i,new Uint8Array(0))}let ty=async(e,t,r,n,i={})=>{let s,a,o;switch(e){case"dir":o=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let c;if(eT(r),!e3(r))throw new e_("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:l,apv:u}=i;c=i.epk?await to(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:h,crv:p,kty:f}=await eL(c),m=await e6(r,c,"ECDH-ES"===e?t:e,"ECDH-ES"===e?tc(t):parseInt(e.slice(-5,-2),10),l,u);if(a={epk:{x:d,crv:p,kty:f}},"EC"===f&&(a.epk.y=h),l&&(a.apu=eb(l)),u&&(a.apv=eb(u)),"ECDH-ES"===e){o=m;break}o=n||tl(t);let y=e.slice(-6);s=await e0(y,m,o);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o=n||tl(t),eT(r),s=await tr(e,r,o);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{o=n||tl(t);let{p2c:c,p2s:l}=i;({encryptedKey:s,...a}=await e9(e,r,o,c,l));break}case"A128KW":case"A192KW":case"A256KW":o=n||tl(t),s=await e0(e,r,o);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{o=n||tl(t);let{iv:c}=i;({encryptedKey:s,...a}=await tf(e,r,o,c));break}default:throw new e_('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:o,encryptedKey:s,parameters:a}},tb=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},tw=(e,t,r,n,i)=>{let s;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(s=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!s.has(a))throw new e_(`Extension Header Parameter "${a}" is not recognized`);if(void 0===i[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(s.get(a)&&void 0===n[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)},tg=e=>e?.[Symbol.toStringTag],tx=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},tv=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(eU(t)){if(function(e){return"oct"===e.kty&&"string"==typeof e.k}(t)&&tx(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!eC(t))throw TypeError(e$(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${tg(t)} instances for symmetric algorithms must be of type "secret"`)}},t_=(e,t,r)=>{if(eU(t))switch(r){case"decrypt":case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&tx(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&tx(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!eC(t))throw TypeError(e$(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${tg(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${tg(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${tg(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${tg(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${tg(t)} instances for asymmetric algorithm encryption must be of type "public"`)}},tk=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?tv(e,t,r):t_(e,t,r)};class tS{#e;#t;#r;#n;#i;#s;#a;#o;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=e,this}setInitializationVector(e){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=e,this}async encrypt(e,t){let r,n,i,s,a;if(!this.#t&&!this.#n&&!this.#r)throw new eS("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!tb(this.#t,this.#n,this.#r))throw new eS("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let o={...this.#t,...this.#n,...this.#r};if(tw(eS,new Map,t?.crit,this.#t,o),void 0!==o.zip)throw new e_('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:l}=o;if("string"!=typeof c||!c)throw new eS('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new eS('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#s&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);tk("dir"===c?l:c,e,"encrypt");{let i;let s=await to(e,c);({cek:n,encryptedKey:r,parameters:i}=await ty(c,l,s,this.#s,this.#o)),i&&(t&&eW in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}s=this.#t?eu.encode(eb(JSON.stringify(this.#t))):eu.encode(""),this.#i?(a=eb(this.#i),i=eh(s,eu.encode("."),eu.encode(a))):i=s;let{ciphertext:u,tag:d,iv:h}=await eY(l,this.#e,n,this.#a,i),p={ciphertext:eb(u)};return h&&(p.iv=eb(h)),d&&(p.tag=eb(d)),r&&(p.encrypted_key=eb(r)),a&&(p.aad=a),this.#t&&(p.protected=ed.decode(s)),this.#r&&(p.unprotected=this.#r),this.#n&&(p.header=this.#n),p}}class tA{#c;constructor(e){this.#c=new tS(e)}setContentEncryptionKey(e){return this.#c.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#c.setInitializationVector(e),this}setProtectedHeader(e){return this.#c.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#c.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#c.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let tE=e=>Math.floor(e.getTime()/1e3),tR=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,tT=e=>{let t;let r=tR.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t};function tO(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let tP=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,tC=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));class tI{#l;constructor(e){if(!eI(e))throw TypeError("JWT Claims Set MUST be an object");this.#l=structuredClone(e)}data(){return eu.encode(JSON.stringify(this.#l))}get iss(){return this.#l.iss}set iss(e){this.#l.iss=e}get sub(){return this.#l.sub}set sub(e){this.#l.sub=e}get aud(){return this.#l.aud}set aud(e){this.#l.aud=e}set jti(e){this.#l.jti=e}set nbf(e){"number"==typeof e?this.#l.nbf=tO("setNotBefore",e):e instanceof Date?this.#l.nbf=tO("setNotBefore",tE(e)):this.#l.nbf=tE(new Date)+tT(e)}set exp(e){"number"==typeof e?this.#l.exp=tO("setExpirationTime",e):e instanceof Date?this.#l.exp=tO("setExpirationTime",tE(e)):this.#l.exp=tE(new Date)+tT(e)}set iat(e){void 0===e?this.#l.iat=tE(new Date):e instanceof Date?this.#l.iat=tO("setIssuedAt",tE(e)):"string"==typeof e?this.#l.iat=tO("setIssuedAt",tE(new Date)+tT(e)):this.#l.iat=tO("setIssuedAt",e)}}class tU{#s;#a;#o;#t;#u;#d;#h;#p;constructor(e={}){this.#p=new tI(e)}setIssuer(e){return this.#p.iss=e,this}setSubject(e){return this.#p.sub=e,this}setAudience(e){return this.#p.aud=e,this}setJti(e){return this.#p.jti=e,this}setNotBefore(e){return this.#p.nbf=e,this}setExpirationTime(e){return this.#p.exp=e,this}setIssuedAt(e){return this.#p.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=e,this}setContentEncryptionKey(e){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=e,this}setInitializationVector(e){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=e,this}replicateIssuerAsHeader(){return this.#u=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#h=!0,this}async encrypt(e,t){let r=new tA(this.#p.data());return this.#t&&(this.#u||this.#d||this.#h)&&(this.#t={...this.#t,iss:this.#u?this.#p.iss:void 0,sub:this.#d?this.#p.sub:void 0,aud:this.#h?this.#p.aud:void 0}),r.setProtectedHeader(this.#t),this.#a&&r.setInitializationVector(this.#a),this.#s&&r.setContentEncryptionKey(this.#s),this.#o&&r.setKeyManagementParameters(this.#o),r.encrypt(e,t)}}async function tj(e,t,r){let n;if(!eI(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return ey(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new e_('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return ti({...e,alg:t,ext:n});default:throw new e_('Unsupported "kty" (Key Type) Parameter value')}}let tD=async(e,t,r,n,i)=>{switch(e){case"dir":if(void 0!==r)throw new eS("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new eS("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,s;if(!eI(n.epk))throw new eS('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(eT(t),!e3(t))throw new e_("ECDH with the provided key is not allowed or not supported by your javascript runtime");let a=await tj(n.epk,e);if(eT(a),void 0!==n.apu){if("string"!=typeof n.apu)throw new eS('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=ey(n.apu)}catch{throw new eS("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new eS('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{s=ey(n.apv)}catch{throw new eS("Failed to base64url decode the apv")}}let o=await e6(a,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?tc(n.enc):parseInt(e.slice(-5,-2),10),i,s);if("ECDH-ES"===e)return o;if(void 0===r)throw new eS("JWE Encrypted Key missing");return e1(e.slice(-6),o,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new eS("JWE Encrypted Key missing");return eT(t),tn(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let s;if(void 0===r)throw new eS("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new eS('JOSE Header "p2c" (PBES2 Count) missing or invalid');let a=i?.maxPBES2Count||1e4;if(n.p2c>a)throw new eS('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new eS('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{s=ey(n.p2s)}catch{throw new eS("Failed to base64url decode the p2s")}return e7(e,t,r,n.p2c,s)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new eS("JWE Encrypted Key missing");return e1(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,s;if(void 0===r)throw new eS("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new eS('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new eS('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=ey(n.iv)}catch{throw new eS("Failed to base64url decode the iv")}try{s=ey(n.tag)}catch{throw new eS("Failed to base64url decode the tag")}return tm(e,t,r,i,s)}default:throw new e_('Invalid or unsupported "alg" (JWE Algorithm) header value')}},t$=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function tN(e,t,r){let n,i,s,a,o,c,l;if(!eI(e))throw new eS("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new eS("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new eS("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new eS("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new eS("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new eS("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new eS("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new eS("JWE AAD incorrect type");if(void 0!==e.header&&!eI(e.header))throw new eS("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!eI(e.unprotected))throw new eS("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=ey(e.protected);n=JSON.parse(ed.decode(t))}catch{throw new eS("JWE Protected Header is invalid")}if(!tb(n,e.header,e.unprotected))throw new eS("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...e.header,...e.unprotected};if(tw(eS,new Map,r?.crit,n,u),void 0!==u.zip)throw new e_('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:h}=u;if("string"!=typeof d||!d)throw new eS("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof h||!h)throw new eS("missing JWE Encryption Algorithm (enc) in JWE Header");let p=r&&t$("keyManagementAlgorithms",r.keyManagementAlgorithms),f=r&&t$("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(p&&!p.has(d)||!p&&d.startsWith("PBES2"))throw new ev('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(h))throw new ev('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=ey(e.encrypted_key)}catch{throw new eS("Failed to base64url decode the encrypted_key")}let m=!1;"function"==typeof t&&(t=await t(n,e),m=!0),tk("dir"===d?h:d,t,"decrypt");let y=await to(t,d);try{s=await tD(d,y,i,u,r)}catch(e){if(e instanceof TypeError||e instanceof eS||e instanceof e_)throw e;s=tl(h)}if(void 0!==e.iv)try{a=ey(e.iv)}catch{throw new eS("Failed to base64url decode the iv")}if(void 0!==e.tag)try{o=ey(e.tag)}catch{throw new eS("Failed to base64url decode the tag")}let b=eu.encode(e.protected??"");c=void 0!==e.aad?eh(b,eu.encode("."),eu.encode(e.aad)):b;try{l=ey(e.ciphertext)}catch{throw new eS("Failed to base64url decode the ciphertext")}let w={plaintext:await tp(h,s,l,a,o,c)};if(void 0!==e.protected&&(w.protectedHeader=n),void 0!==e.aad)try{w.additionalAuthenticatedData=ey(e.aad)}catch{throw new eS("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(w.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(w.unprotectedHeader=e.header),m)?{...w,key:y}:w}async function tL(e,t,r){if(e instanceof Uint8Array&&(e=ed.decode(e)),"string"!=typeof e)throw new eS("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:s,3:a,4:o,length:c}=e.split(".");if(5!==c)throw new eS("Invalid Compact JWE");let l=await tN({ciphertext:a,iv:s||void 0,protected:n,tag:o||void 0,encrypted_key:i||void 0},t,r),u={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"==typeof t?{...u,key:l.key}:u}async function tM(e,t,r){let n=await tL(e,t,r),i=function(e,t,r={}){let n,i;try{n=JSON.parse(ed.decode(t))}catch{}if(!eI(n))throw new eA("JWT Claims Set must be a top-level JSON object");let{typ:s}=r;if(s&&("string"!=typeof e.typ||tP(e.typ)!==tP(s)))throw new eg('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:a=[],issuer:o,subject:c,audience:l,maxTokenAge:u}=r,d=[...a];for(let e of(void 0!==u&&d.push("iat"),void 0!==l&&d.push("aud"),void 0!==c&&d.push("sub"),void 0!==o&&d.push("iss"),new Set(d.reverse())))if(!(e in n))throw new eg(`missing required "${e}" claim`,n,e,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(n.iss))throw new eg('unexpected "iss" claim value',n,"iss","check_failed");if(c&&n.sub!==c)throw new eg('unexpected "sub" claim value',n,"sub","check_failed");if(l&&!tC(n.aud,"string"==typeof l?[l]:l))throw new eg('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=tT(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,p=tE(h||new Date);if((void 0!==n.iat||u)&&"number"!=typeof n.iat)throw new eg('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new eg('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>p+i)throw new eg('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new eg('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=p-i)throw new ex('"exp" claim timestamp check failed',n,"exp","check_failed")}if(u){let e=p-n.iat;if(e-i>("number"==typeof u?u:tT(u)))throw new ex('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new eg('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}(n.protectedHeader,n.plaintext,r),{protectedHeader:s}=n;if(void 0!==s.iss&&s.iss!==i.iss)throw new eg('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==s.sub&&s.sub!==i.sub)throw new eg('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==s.aud&&JSON.stringify(s.aud)!==JSON.stringify(i.aud))throw new eg('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let a={payload:i,protectedHeader:s};return"function"==typeof t?{...a,key:n.key}:a}let tH=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,tW=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,tK=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,tB=/^[\u0020-\u003A\u003D-\u007E]*$/,tz=Object.prototype.toString,tq=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function tJ(e,t){let r=new tq,n=e.length;if(n<2)return r;let i=t?.decode||tX,s=0;do{let t=e.indexOf("=",s);if(-1===t)break;let a=e.indexOf(";",s),o=-1===a?n:a;if(t>o){s=e.lastIndexOf(";",t-1)+1;continue}let c=tF(e,s,t),l=tG(e,t,c),u=e.slice(c,l);if(void 0===r[u]){let n=tF(e,t+1,o),s=tG(e,o,n),a=i(e.slice(n,s));r[u]=a}s=o+1}while(s<n);return r}function tF(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function tG(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function tV(e,t,r){let n=r?.encode||encodeURIComponent;if(!tH.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!tW.test(i))throw TypeError(`argument val is invalid: ${t}`);let s=e+"="+i;if(!r)return s;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);s+="; Max-Age="+r.maxAge}if(r.domain){if(!tK.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);s+="; Domain="+r.domain}if(r.path){if(!tB.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);s+="; Path="+r.path}if(r.expires){var a;if(a=r.expires,"[object Date]"!==tz.call(a)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);s+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.partitioned&&(s+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return s}function tX(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}let{q:tY}=u,tZ=()=>Date.now()/1e3|0,tQ="A256CBC-HS512";async function t0(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,s=Array.isArray(r)?r:[r],a=await t2(tQ,s[0],i),o=await eH({kty:"oct",k:eb(a)},`sha${a.byteLength<<3}`);return await new tU(t).setProtectedHeader({alg:"dir",enc:tQ,kid:o}).setIssuedAt().setExpirationTime(tZ()+n).setJti(crypto.randomUUID()).encrypt(a)}async function t1(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:s}=await tM(t,async({kid:e,enc:t})=>{for(let r of i){let i=await t2(t,r,n);if(void 0===e||e===await eH({kty:"oct",k:eb(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[tQ,"A256GCM"]});return s}async function t2(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await ec("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function t5({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,s=n.origin;return t?s=await i.redirect({url:t,baseUrl:n.origin}):r&&(s=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:s,callbackUrlCookie:s!==r?s:void 0}}let t6="\x1b[31m",t3="\x1b[0m",t8={error(e){let t=e instanceof m?e.type:e.name;if(console.error(`${t6}[auth][error]${t3} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${t6}[auth][cause]${t3}:`,t.stack),r&&console.error(`${t6}[auth][details]${t3}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`\x1b[33m[auth][warn][${e}]${t3}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`\x1b[90m[auth][debug]:${t3} ${e}`,JSON.stringify(t,null,2))}};function t4(e){let t={...t8};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let t9=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{q:t7,l:re}=u;async function rt(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function rr(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new L("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new L(`Cannot parse action at ${e}`);let n=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==n.length&&2!==n.length)throw new L(`Cannot parse action at ${e}`);let[i,s]=n;if(!t9.includes(i)||s&&!["signin","callback","webauthn-options"].includes(i))throw new L(`Cannot parse action at ${e}`);return{action:i,providerId:"undefined"==s?void 0:s}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await rt(e):void 0,cookies:t7(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(n){let r=t4(t);r.error(n),r.debug("request",e)}}function rn(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,s=re(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",s):t.set("Set-Cookie",s)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function ri(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function rs(e){let t=e=>("0"+e.toString(16)).slice(-2);return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((e,r)=>e+t(r),"")}async function ra({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,s]=t.split("|");if(s===await ri(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=rs(32),s=await ri(`${i}${e.secret}`);return{cookie:`${i}|${s}`,csrfToken:i}}function ro(e,t){if(!t)throw new B(`CSRF token was missing during an action ${e}`)}function rc(e){return null!==e&&"object"==typeof e}function rl(e,...t){if(!t.length)return e;let r=t.shift();if(rc(e)&&rc(r))for(let t in r)rc(r[t])?(rc(e[t])||(e[t]=Array.isArray(r[t])?[]:{}),rl(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return rl(e,...t)}let ru=Symbol("skip-csrf-check"),rd=Symbol("return-type-raw"),rh=Symbol("custom-fetch"),rp=Symbol("conform-internal"),rf=e=>ry({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),rm=e=>ry({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function ry(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function rb(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}let rw={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function rg({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:s,csrfToken:a,csrfDisabled:o,isPost:c}){var l;let u=t4(e),{providers:d,provider:h}=function(e){let{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=r.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...s}=t,a=i?.id??s.id,o=rl(s,i,{signinUrl:`${n}/signin/${a}`,callbackUrl:`${n}/callback/${a}`});if("oauth"===t.type||"oidc"===t.type){o.redirectProxyUrl??(o.redirectProxyUrl=i?.redirectProxyUrl??r.redirectProxyUrl);let e=function(e){e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));let t=rb(e.authorization,e.issuer);t&&!t.url?.searchParams.has("scope")&&t.url.searchParams.set("scope","openid profile email");let r=rb(e.token,e.issuer),n=rb(e.userinfo,e.issuer),i=e.checks??["pkce"];return e.redirectProxyUrl&&(i.includes("state")||i.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:i,userinfo:n,profile:e.profile??rf,account:e.account??rm}}(o);return e.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete e.redirectProxyUrl,e[rh]??(e[rh]=i?.[rh]),e}return o}),s=i.find(({id:e})=>e===t);if(t&&!s){let e=i.map(e=>e.id).join(", ");throw Error(`Provider with id "${t}" not found. Available providers: [${e}].`)}return{providers:i,provider:s}}({url:n,providerId:t,config:e}),f=!1;if((h?.type==="oauth"||h?.type==="oidc")&&h.redirectProxyUrl)try{f=new URL(h.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${h.redirectProxyUrl}`)}let m={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:h,cookies:rl(p(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:d,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:t0,decode:t1,...e.jwt},events:Object.keys(l=e.events??{}).reduce((e,t)=>(e[t]=async(...e)=>{try{let r=l[t];return await r(...e)}catch(e){u.error(new v(e))}},e),{}),adapter:function(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new b(r);throw t.error(e),e}},r),{})}(e.adapter,u),callbacks:{...rw,...e.callbacks},logger:u,callbackUrl:n.origin,isOnRedirectProxy:f,experimental:{...e.experimental}},y=[];if(o)m.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await ra({options:m,cookieValue:i?.[m.cookies.csrfToken.name],isPost:c,bodyValue:a});m.csrfToken=e,m.csrfTokenVerified=r,t&&y.push({name:m.cookies.csrfToken.name,value:t,options:m.cookies.csrfToken.options})}let{callbackUrl:w,callbackUrlCookie:g}=await t5({options:m,cookieValue:i?.[m.cookies.callbackUrl.name],paramValue:s});return m.callbackUrl=w,g&&y.push({name:m.cookies.callbackUrl.name,value:g,options:m.cookies.callbackUrl.options}),{options:m,cookies:y}}var rx,rv,r_,rk,rS,rA,rE,rR,rT,rO,rP,rC,rI,rU,rj,rD,r$={},rN=[],rL=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,rM=Array.isArray;function rH(e,t){for(var r in t)e[r]=t[r];return e}function rW(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function rK(e,t,r){var n,i,s,a={};for(s in t)"key"==s?n=t[s]:"ref"==s?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?rE.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return rB(e,a,n,i,null)}function rB(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++rT:i,__i:-1,__u:0};return null==i&&null!=rR.vnode&&rR.vnode(s),s}function rz(e){return e.children}function rq(e,t){this.props=e,this.context=t}function rJ(e,t){if(null==t)return e.__?rJ(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?rJ(e):null}function rF(e){(!e.__d&&(e.__d=!0)&&rO.push(e)&&!rG.__r++||rP!==rR.debounceRendering)&&((rP=rR.debounceRendering)||rC)(rG)}function rG(){var e,t,r,n,i,s,a,o;for(rO.sort(rI);e=rO.shift();)e.__d&&(t=rO.length,n=void 0,s=(i=(r=e).__v).__e,a=[],o=[],r.__P&&((n=rH({},i)).__v=i.__v+1,rR.vnode&&rR.vnode(n),rQ(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,a,null==s?rJ(i):s,!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,r0(a,n,o),n.__e!=s&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),rO.length>t&&rO.sort(rI));rG.__r=0}function rV(e,t,r,n,i,s,a,o,c,l,u){var d,h,p,f,m,y=n&&n.__k||rN,b=t.length;for(r.__d=c,function(e,t,r){var n,i,s,a,o,c=t.length,l=r.length,u=l,d=0;for(e.__k=[],n=0;n<c;n++)null!=(i=t[n])&&"boolean"!=typeof i&&"function"!=typeof i?(a=n+d,(i=e.__k[n]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?rB(null,i,null,null,null):rM(i)?rB(rz,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?rB(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,s=null,-1!==(o=i.__i=function(e,t,r,n){var i=e.key,s=e.type,a=r-1,o=r+1,c=t[r];if(null===c||c&&i==c.key&&s===c.type&&0==(131072&c.__u))return r;if(n>(null!=c&&0==(131072&c.__u)?1:0))for(;a>=0||o<t.length;){if(a>=0){if((c=t[a])&&0==(131072&c.__u)&&i==c.key&&s===c.type)return a;a--}if(o<t.length){if((c=t[o])&&0==(131072&c.__u)&&i==c.key&&s===c.type)return o;o++}}return -1}(i,r,a,u))&&(u--,(s=r[o])&&(s.__u|=131072)),null==s||null===s.__v?(-1==o&&d--,"function"!=typeof i.type&&(i.__u|=65536)):o!==a&&(o==a-1?d--:o==a+1?d++:(o>a?d--:d++,i.__u|=65536))):i=e.__k[n]=null;if(u)for(n=0;n<l;n++)null!=(s=r[n])&&0==(131072&s.__u)&&(s.__e==e.__d&&(e.__d=rJ(s)),function e(t,r,n){var i,s;if(rR.unmount&&rR.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||r1(i,null,r)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){rR.__e(e,r)}i.base=i.__P=null}if(i=t.__k)for(s=0;s<i.length;s++)i[s]&&e(i[s],r,n||"function"!=typeof t.type);n||rW(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(s,s))}(r,t,y),c=r.__d,d=0;d<b;d++)null!=(p=r.__k[d])&&(h=-1===p.__i?r$:y[p.__i]||r$,p.__i=d,rQ(e,p,h,i,s,a,o,c,l,u),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&r1(h.ref,null,p),u.push(p.ref,p.__c||f,p)),null==m&&null!=f&&(m=f),65536&p.__u||h.__k===p.__k?c=function e(t,r,n){var i,s;if("function"==typeof t.type){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,r=e(i[s],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=rJ(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(p,c,e):"function"==typeof p.type&&void 0!==p.__d?c=p.__d:f&&(c=f.nextSibling),p.__d=void 0,p.__u&=-196609);r.__d=c,r.__e=m}function rX(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||rL.test(t)?r:r+"px"}function rY(e,t,r,n,i){var s;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||rX(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||rX(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=rU,e.addEventListener(t,s?rD:rj,s)):e.removeEventListener(t,s?rD:rj,s);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function rZ(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=rU++;else if(t.t<r.u)return;return r(rR.event?rR.event(t):t)}}}function rQ(e,t,r,n,i,s,a,o,c,l){var u,d,h,p,f,m,y,b,w,g,x,v,_,k,S,A,E=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),s=[o=t.__e=r.__e]),(u=rR.__b)&&u(t);e:if("function"==typeof E)try{if(b=t.props,w="prototype"in E&&E.prototype.render,g=(u=E.contextType)&&n[u.__c],x=u?g?g.props.value:u.__:n,r.__c?y=(d=t.__c=r.__c).__=d.__E:(w?t.__c=d=new E(b,x):(t.__c=d=new rq(b,x),d.constructor=E,d.render=r2),g&&g.sub(d),d.props=b,d.state||(d.state={}),d.context=x,d.__n=n,h=d.__d=!0,d.__h=[],d._sb=[]),w&&null==d.__s&&(d.__s=d.state),w&&null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=rH({},d.__s)),rH(d.__s,E.getDerivedStateFromProps(b,d.__s))),p=d.props,f=d.state,d.__v=t,h)w&&null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),w&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(w&&null==E.getDerivedStateFromProps&&b!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,x),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,x)||t.__v===r.__v)){for(t.__v!==r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,x),w&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,f,m)})}if(d.context=x,d.props=b,d.__P=e,d.__e=!1,_=rR.__r,k=0,w){for(d.state=d.__s,d.__d=!1,_&&_(t),u=d.render(d.props,d.state,d.context),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[]}else do d.__d=!1,_&&_(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++k<25);d.state=d.__s,null!=d.getChildContext&&(n=rH(rH({},n),d.getChildContext())),w&&!h&&null!=d.getSnapshotBeforeUpdate&&(m=d.getSnapshotBeforeUpdate(p,f)),rV(e,rM(A=null!=u&&u.type===rz&&null==u.key?u.props.children:u)?A:[A],t,r,n,i,s,a,o,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),y&&(d.__E=d.__=null)}catch(e){if(t.__v=null,c||null!=s){for(t.__u|=c?160:128;o&&8===o.nodeType&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,t.__e=o}else t.__e=r.__e,t.__k=r.__k;rR.__e(e,t,r)}else null==s&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,i,s,a,o,c){var l,u,d,h,p,f,m,y=r.props,b=t.props,w=t.type;if("svg"===w?i="http://www.w3.org/2000/svg":"math"===w?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=s){for(l=0;l<s.length;l++)if((p=s[l])&&"setAttribute"in p==!!w&&(w?p.localName===w:3===p.nodeType)){e=p,s[l]=null;break}}if(null==e){if(null===w)return document.createTextNode(b);e=document.createElementNS(i,w,b.is&&b),o&&(rR.__m&&rR.__m(t,s),o=!1),s=null}if(null===w)y===b||o&&e.data===b||(e.data=b);else{if(s=s&&rE.call(e.childNodes),y=r.props||r$,!o&&null!=s)for(y={},l=0;l<e.attributes.length;l++)y[(p=e.attributes[l]).name]=p.value;for(l in y)if(p=y[l],"children"==l);else if("dangerouslySetInnerHTML"==l)d=p;else if(!(l in b)){if("value"==l&&"defaultValue"in b||"checked"==l&&"defaultChecked"in b)continue;rY(e,l,null,p,i)}for(l in b)p=b[l],"children"==l?h=p:"dangerouslySetInnerHTML"==l?u=p:"value"==l?f=p:"checked"==l?m=p:o&&"function"!=typeof p||y[l]===p||rY(e,l,p,y[l],i);if(u)o||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),rV(e,rM(h)?h:[h],t,r,n,"foreignObject"===w?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:r.__k&&rJ(r,0),o,c),null!=s)for(l=s.length;l--;)rW(s[l]);o||(l="value","progress"===w&&null==f?e.removeAttribute("value"):void 0===f||f===e[l]&&("progress"!==w||f)&&("option"!==w||f===y[l])||rY(e,l,f,y[l],i),l="checked",void 0!==m&&m!==e[l]&&rY(e,l,m,y[l],i))}return e}(r.__e,t,r,n,i,s,a,c,l);(u=rR.diffed)&&u(t)}function r0(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)r1(r[n],r[++n],r[++n]);rR.__c&&rR.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){rR.__e(e,t.__v)}})}function r1(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){rR.__e(e,r)}}function r2(e,t,r){return this.constructor(e,r)}function r5(e,t){var r,n,i,s,a;r=e,rR.__&&rR.__(r,t),i=(n="function"==typeof r5)?null:r5&&r5.__k||t.__k,s=[],a=[],rQ(t,r=(!n&&r5||t).__k=rK(rz,null,[r]),i||r$,r$,t.namespaceURI,!n&&r5?[r5]:i?null:t.firstChild?rE.call(t.childNodes):null,s,!n&&r5?r5:i?i.__e:t.firstChild,n,a),r0(s,r,a)}rE=rN.slice,rR={__e:function(e,t,r,n){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},rT=0,rq.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=rH({},this.state),"function"==typeof e&&(e=e(rH({},r),this.props)),e&&rH(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),rF(this))},rq.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rF(this))},rq.prototype.render=rz,rO=[],rC="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rI=function(e,t){return e.__v.__b-t.__v.__b},rG.__r=0,rU=0,rj=rZ(!1),rD=rZ(!0);var r6=/[\s\n\\/='"\0<>]/,r3=/^(xlink|xmlns|xml)([A-Z])/,r8=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,r4=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,r9=new Set(["draggable","spellcheck"]),r7=/["&<]/;function ne(e){if(0===e.length||!1===r7.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var nt={},nr=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),nn=/[A-Z]/g;function ni(){this.__d=!0}var ns,na,no,nc,nl={},nu=[],nd=Array.isArray,nh=Object.assign;function np(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=nl),null==r.__s&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=nh({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),no&&no(e),r.render(r.props,r.state,t)}var nf=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),nm=0;function ny(e,t,r,n,i,s){t||(t={});var a,o,c=t;"ref"in t&&(a=t.ref,delete t.ref);var l={type:e,props:c,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--nm,__i:-1,__u:0,__source:i,__self:s};if("function"==typeof e&&(a=e.defaultProps))for(o in a)void 0===c[o]&&(c[o]=a[o]);return rR.vnode&&rR.vnode(l),l}async function nb(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),s().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);if(!i.ok){console.error("Failed to fetch options",i);return}return i.json()}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function s(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function a(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function o(e,t){let n=await r.startAuthentication(e,t);return await a("authenticate",n)}async function c(e){s().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await a("register",t)}async function l(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e){console.error("Failed to fetch option for autofill authentication");return}try{await o(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t){console.error("Failed to fetch options for form submission");return}if("authenticate"===t.action)try{await o(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await c(t.options)}catch(e){console.error(e)}})})(),l()}let nw={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},ng=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function nx({html:e,title:t,status:r,cookies:n,theme:i,headTags:s}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${ng}</style><title>${t}</title>${s??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${function(e,t,r){var n=rR.__s;rR.__s=!0,ns=rR.__b,na=rR.diffed,no=rR.__r,nc=rR.unmount;var i=rK(rz,null);i.__k=[e];try{var s=function e(t,r,n,i,s,a,o){if(null==t||!0===t||!1===t||""===t)return"";var c=typeof t;if("object"!=c)return"function"==c?"":"string"==c?ne(t):t+"";if(nd(t)){var l,u="";s.__k=t;for(var d=0;d<t.length;d++){var h=t[d];if(null!=h&&"boolean"!=typeof h){var p,f=e(h,r,n,i,s,a,o);"string"==typeof f?u+=f:(l||(l=[]),u&&l.push(u),u="",nd(f)?(p=l).push.apply(p,f):l.push(f))}}return l?(u&&l.push(u),l):u}if(void 0!==t.constructor)return"";t.__=s,ns&&ns(t);var m=t.type,y=t.props;if("function"==typeof m){var b,w,g,x=r;if(m===rz){if("tpl"in y){for(var v="",_=0;_<y.tpl.length;_++)if(v+=y.tpl[_],y.exprs&&_<y.exprs.length){var k=y.exprs[_];if(null==k)continue;"object"==typeof k&&(void 0===k.constructor||nd(k))?v+=e(k,r,n,i,t,a,o):v+=k}return v}if("UNSTABLE_comment"in y)return"\x3c!--"+ne(y.UNSTABLE_comment)+"--\x3e";w=y.children}else{if(null!=(b=m.contextType)){var S=r[b.__c];x=S?S.props.value:b.__}var A=m.prototype&&"function"==typeof m.prototype.render;if(A)w=np(t,x),g=t.__c;else{t.__c=g={__v:t,context:x,props:t.props,setState:ni,forceUpdate:ni,__d:!0,__h:[]};for(var E=0;g.__d&&E++<25;)g.__d=!1,no&&no(t),w=m.call(g,y,x);g.__d=!0}if(null!=g.getChildContext&&(r=nh({},r,g.getChildContext())),A&&rR.errorBoundaries&&(m.getDerivedStateFromError||g.componentDidCatch)){w=null!=w&&w.type===rz&&null==w.key&&null==w.props.tpl?w.props.children:w;try{return e(w,r,n,i,t,a,o)}catch(s){return m.getDerivedStateFromError&&(g.__s=m.getDerivedStateFromError(s)),g.componentDidCatch&&g.componentDidCatch(s,nl),g.__d?(w=np(t,r),null!=(g=t.__c).getChildContext&&(r=nh({},r,g.getChildContext())),e(w=null!=w&&w.type===rz&&null==w.key&&null==w.props.tpl?w.props.children:w,r,n,i,t,a,o)):""}finally{na&&na(t),t.__=null,nc&&nc(t)}}}w=null!=w&&w.type===rz&&null==w.key&&null==w.props.tpl?w.props.children:w;try{var R=e(w,r,n,i,t,a,o);return na&&na(t),t.__=null,rR.unmount&&rR.unmount(t),R}catch(s){if(!a&&o&&o.onError){var T=o.onError(s,t,function(s){return e(s,r,n,i,t,a,o)});if(void 0!==T)return T;var O=rR.__e;return O&&O(s,t),""}if(!a||!s||"function"!=typeof s.then)throw s;return s.then(function s(){try{return e(w,r,n,i,t,a,o)}catch(c){if(!c||"function"!=typeof c.then)throw c;return c.then(function(){return e(w,r,n,i,t,a,o)},s)}})}}var P,C="<"+m,I="";for(var U in y){var j=y[U];if("function"!=typeof j||"class"===U||"className"===U){switch(U){case"children":P=j;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in y)continue;U="for";break;case"className":if("class"in y)continue;U="class";break;case"defaultChecked":U="checked";break;case"defaultSelected":U="selected";break;case"defaultValue":case"value":switch(U="value",m){case"textarea":P=j;continue;case"select":i=j;continue;case"option":i!=j||"selected"in y||(C+=" selected")}break;case"dangerouslySetInnerHTML":I=j&&j.__html;continue;case"style":"object"==typeof j&&(j=function(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var i="-"==r[0]?r:nt[r]||(nt[r]=r.replace(nn,"-$&").toLowerCase()),s=";";"number"!=typeof n||i.startsWith("--")||nr.has(i)||(s="px;"),t=t+i+":"+n+s}}return t||void 0}(j));break;case"acceptCharset":U="accept-charset";break;case"httpEquiv":U="http-equiv";break;default:if(r3.test(U))U=U.replace(r3,"$1:$2").toLowerCase();else{if(r6.test(U))continue;("-"===U[4]||r9.has(U))&&null!=j?j+="":n?r4.test(U)&&(U="panose1"===U?"panose-1":U.replace(/([A-Z])/g,"-$1").toLowerCase()):r8.test(U)&&(U=U.toLowerCase())}}null!=j&&!1!==j&&(C=!0===j||""===j?C+" "+U:C+" "+U+'="'+("string"==typeof j?ne(j):j+"")+'"')}}if(r6.test(m))throw Error(m+" is not a valid HTML tag name in "+C+">");if(I||("string"==typeof P?I=ne(P):null!=P&&!1!==P&&!0!==P&&(I=e(P,r,"svg"===m||"foreignObject"!==m&&n,i,t,a,o))),na&&na(t),t.__=null,nc&&nc(t),!I&&nf.has(m))return C+"/>";var D="</"+m+">",$=C+">";return nd(I)?[$].concat(I,[D]):"string"!=typeof I?[$,I,D]:$+I+D}(e,nl,!1,void 0,i,!1,void 0);return nd(s)?s.join(""):s}catch(e){if(e.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{rR.__c&&rR.__c(e,nu),rR.__s=n,nu.length=0}}(e)}</div></body></html>`}}function nv(e){let{url:t,theme:r,query:n,cookies:i,pages:s,providers:a}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:s})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:s},e),{})}),signin(t,o){if(t)throw new L("Unsupported action");if(s?.signIn){let t=`${s.signIn}${s.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return o&&(t=`${t}&${new URLSearchParams({error:o})}`),{redirect:t,cookies:i}}let c=a?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),l="";if(c){let{simpleWebAuthnBrowserVersion:e}=c;l=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return nx({cookies:i,theme:r,html:function(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:s,error:a}=e;"undefined"!=typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"undefined"!=typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let o=a&&(nw[a]??nw.default),c=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return ny("div",{className:"signin",children:[i?.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),ny("div",{className:"card",children:[o&&ny("div",{className:"error",children:ny("p",{children:o})}),i?.logo&&ny("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let a,o,c;("oauth"===e.type||"oidc"===e.type)&&({bg:a="#fff",brandColor:o,logo:c=`https://authjs.dev/img/providers/${e.id}.svg`}=e.style??{});let l=o??a??"#fff";return ny("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?ny("form",{action:e.signinUrl,method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),n&&ny("input",{type:"hidden",name:"callbackUrl",value:n}),ny("button",{type:"submit",className:"button",style:{"--provider-brand-color":l},tabIndex:0,children:[ny("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",e.name]}),c&&ny("img",{loading:"lazy",height:24,src:c})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&ny("hr",{}),"email"===e.type&&ny("form",{action:e.signinUrl,method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),ny("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),ny("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:s,placeholder:"email@example.com",required:!0}),ny("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&ny("form",{action:e.callbackUrl,method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>ny("div",{children:[ny("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),ny("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),ny("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&ny("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[ny("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>ny("div",{children:[ny("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),ny("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),ny("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&ny("hr",{})]},e.id)})]}),c&&ny(rz,{children:ny("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${nb})(authURL, "${c}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:o,...n}),title:"Sign In",headTags:l})},signout:()=>s?.signOut?{redirect:s.signOut,cookies:i}:nx({cookies:i,theme:r,html:function(e){let{url:t,csrfToken:r,theme:n}=e;return ny("div",{className:"signout",children:[n?.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),ny("div",{className:"card",children:[n?.logo&&ny("img",{src:n.logo,alt:"Logo",className:"logo"}),ny("h1",{children:"Signout"}),ny("p",{children:"Are you sure you want to sign out?"}),ny("form",{action:t?.toString(),method:"POST",children:[ny("input",{type:"hidden",name:"csrfToken",value:r}),ny("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>s?.verifyRequest?{redirect:`${s.verifyRequest}${t?.search??""}`,cookies:i}:nx({cookies:i,theme:r,html:function(e){let{url:t,theme:r}=e;return ny("div",{className:"verify-request",children:[r.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),ny("div",{className:"card",children:[r.logo&&ny("img",{src:r.logo,alt:"Logo",className:"logo"}),ny("h1",{children:"Check your email"}),ny("p",{children:"A sign in link has been sent to your email address."}),ny("p",{children:ny("a",{className:"site",href:t.origin,children:t.host})})]})]})}({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>s?.error?{redirect:`${s.error}${s.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:nx({cookies:i,theme:r,...function(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,s={default:{status:200,heading:"Error",message:ny("p",{children:ny("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:ny("div",{children:[ny("p",{children:"There is a problem with the server configuration."}),ny("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:ny("div",{children:[ny("p",{children:"You do not have permission to sign in."}),ny("p",{children:ny("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:ny("div",{children:[ny("p",{children:"The sign in link is no longer valid."}),ny("p",{children:"It may have been used already or it may have expired."})]}),signin:ny("a",{className:"button",href:i,children:"Sign in"})}},{status:a,heading:o,message:c,signin:l}=s[r]??s.default;return{status:a,html:ny("div",{className:"error",children:[n?.brandColor&&ny("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),ny("div",{className:"card",children:[n?.logo&&ny("img",{src:n?.logo,alt:"Logo",className:"logo"}),ny("h1",{children:o}),ny("div",{className:"message",children:c}),l]})]})}}({url:t,theme:r,error:e}),title:"Error"})}}function n_(e,t=Date.now()){return new Date(t+1e3*e)}async function nk(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:s,events:a,session:{strategy:o,generateSessionToken:c}}=n;if(!i)return{user:t,account:r};let l=r,{createUser:u,updateUser:d,getUser:h,getUserByAccount:p,getUserByEmail:f,linkAccount:m,createSession:y,getSessionAndUser:b,deleteSession:w}=i,g=null,x=null,v=!1,_="jwt"===o;if(e){if(_)try{let t=n.cookies.sessionToken.name;(g=await s.decode({...s,token:e,salt:t}))&&"sub"in g&&g.sub&&(x=await h(g.sub))}catch{}else{let t=await b(e);t&&(g=t.session,x=t.user)}}if("email"===l.type){let r=await f(t.email);return r?(x?.id!==r.id&&!_&&e&&await w(e),x=await d({id:r.id,emailVerified:new Date}),await a.updateUser?.({user:x})):(x=await u({...t,emailVerified:new Date}),await a.createUser?.({user:x}),v=!0),{session:g=_?{}:await y({sessionToken:c(),userId:x.id,expires:n_(n.session.maxAge)}),user:x,isNewUser:v}}if("webauthn"===l.type){let e=await p({providerAccountId:l.providerAccountId,provider:l.provider});if(e){if(x){if(e.id===x.id){let e={...l,userId:x.id};return{session:g,user:x,isNewUser:v,account:e}}throw new G("The account is already associated with another user",{provider:l.provider})}g=_?{}:await y({sessionToken:c(),userId:e.id,expires:n_(n.session.maxAge)});let t={...l,userId:e.id};return{session:g,user:e,isNewUser:v,account:t}}{if(x){await m({...l,userId:x.id}),await a.linkAccount?.({user:x,account:l,profile:t});let e={...l,userId:x.id};return{session:g,user:x,isNewUser:v,account:e}}if(t.email?await f(t.email):null)throw new G("Another account already exists with the same e-mail address",{provider:l.provider});x=await u({...t}),await a.createUser?.({user:x}),await m({...l,userId:x.id}),await a.linkAccount?.({user:x,account:l,profile:t}),g=_?{}:await y({sessionToken:c(),userId:x.id,expires:n_(n.session.maxAge)});let e={...l,userId:x.id};return{session:g,user:x,isNewUser:!0,account:e}}}let k=await p({providerAccountId:l.providerAccountId,provider:l.provider});if(k){if(x){if(k.id===x.id)return{session:g,user:x,isNewUser:v};throw new C("The account is already associated with another user",{provider:l.provider})}return{session:g=_?{}:await y({sessionToken:c(),userId:k.id,expires:n_(n.session.maxAge)}),user:k,isNewUser:v}}{let{provider:e}=n,{type:r,provider:i,providerAccountId:s,userId:o,...d}=l;if(l=Object.assign(e.account(d)??{},{providerAccountId:s,provider:i,type:r,userId:o}),x)return await m({...l,userId:x.id}),await a.linkAccount?.({user:x,account:l,profile:t}),{session:g,user:x,isNewUser:v};let h=t.email?await f(t.email):null;if(h){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)x=h,v=!1;else throw new C("Another account already exists with the same e-mail address",{provider:l.provider})}else x=await u({...t,emailVerified:null}),v=!0;return await a.createUser?.({user:x}),await m({...l,userId:x.id}),await a.linkAccount?.({user:x,account:l,profile:t}),{session:g=_?{}:await y({sessionToken:c(),userId:x.id,expires:n_(n.session.maxAge)}),user:x,isNewUser:v}}}function nS(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(s="oauth4webapi/v3.5.3");let nA="ERR_INVALID_ARG_VALUE",nE="ERR_INVALID_ARG_TYPE";function nR(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let nT=Symbol(),nO=Symbol(),nP=Symbol(),nC=Symbol(),nI=Symbol(),nU=Symbol(),nj=Symbol(),nD=new TextEncoder,n$=new TextDecoder;function nN(e){return"string"==typeof e?nD.encode(e):n$.decode(e)}function nL(e){return"string"==typeof e?o(e):a(e)}Uint8Array.prototype.toBase64?a=e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):a=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Uint8Array.fromBase64?o=e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw nR("The input to be decoded is not correctly encoded.",nA,e)}}:o=e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw nR("The input to be decoded is not correctly encoded.",nA,e)}};class nM extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iJ,Error.captureStackTrace?.(this,this.constructor)}}class nH extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function nW(e,t,r){return new nH(e,{code:t,cause:r})}function nK(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function nB(e){nS(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e??{});if(s&&!t.has("user-agent")&&t.set("user-agent",s),t.has("authorization"))throw nR('"options.headers" must not include the "authorization" header name',nA);return t}function nz(e){if("function"==typeof e&&(e=e()),!(e instanceof AbortSignal))throw nR('"options.signal" must return or be an instance of AbortSignal',nE);return e}function nq(e){return e.includes("//")?e.replace("//","/"):e}async function nJ(e,t,r,n){if(!(e instanceof URL))throw nR(`"${t}" must be an instance of URL`,nE);ie(e,n?.[nT]!==!0);let i=r(new URL(e.href)),s=nB(n?.headers);return s.set("accept","application/json"),(n?.[nC]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(s.entries()),method:"GET",redirect:"manual",signal:n?.signal?nz(n.signal):void 0})}async function nF(e,t){return nJ(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=nq(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":var r;r=".well-known/oauth-authorization-server","/"===e.pathname?e.pathname=r:e.pathname=nq(`${r}/${e.pathname}`);break;default:throw nR('"options.algorithm" must be "oidc" (default), or "oauth2"',nA)}return e},t)}function nG(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw nR(`${r} must be a number`,nE,i);if(e>0)return;if(t){if(0!==e)throw nR(`${r} must be a non-negative number`,nA,i);return}throw nR(`${r} must be a positive number`,nA,i)}catch(e){if(n)throw nW(e.message,n,i);throw e}}function nV(e,t,r,n){try{if("string"!=typeof e)throw nR(`${t} must be a string`,nE,n);if(0===e.length)throw nR(`${t} must not be empty`,nA,n)}catch(e){if(r)throw nW(e.message,r,n);throw e}}async function nX(e,t){if(!(e instanceof URL)&&e!==sd)throw nR('"expectedIssuerIdentifier" must be an instance of URL',nE);if(!nS(t,Response))throw nR('"response" must be an instance of Response',nE);if(200!==t.status)throw nW('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',iZ,t);i4(t);let r=await su(t);if(nV(r.issuer,'"response" body "issuer" property',iX,{body:r}),e!==sd&&new URL(r.issuer).href!==e.href)throw nW('"response" body "issuer" property does not match the expected value',i5,{expected:e.href,body:r,attribute:"issuer"});return r}function nY(e){(function(e,t){if(iv(e)!==t)throw nZ(e,t)})(e,"application/json")}function nZ(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return nW(r,iY,e)}function nQ(){return nL(crypto.getRandomValues(new Uint8Array(32)))}async function n0(e){return nV(e,"codeVerifier"),nL(await crypto.subtle.digest("SHA-256",nN(e)))}function n1(e){let t=e?.[nO];return"number"==typeof t&&Number.isFinite(t)?t:0}function n2(e){let t=e?.[nP];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function n5(){return Math.floor(Date.now()/1e3)}function n6(e){if("object"!=typeof e||null===e)throw nR('"as" must be an object',nE);nV(e.issuer,'"as.issuer"')}function n3(e){if("object"!=typeof e||null===e)throw nR('"client" must be an object',nE);nV(e.client_id,'"client.client_id"')}function n8(e,t){let r=n5()+n1(t);return{jti:nQ(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function n4(e,t,r){if(!r.usages.includes("sign"))throw nR('CryptoKey instances used for signing assertions must include "sign" in their "usages"',nA);let n=`${nL(nN(JSON.stringify(e)))}.${nL(nN(JSON.stringify(t)))}`,i=nL(await crypto.subtle.sign(st(r),r,nN(n)));return`${n}.${i}`}async function n9(e){let{kty:t,e:r,n,x:i,y:s,crv:a}=await crypto.subtle.exportKey("jwk",e),o={kty:t,e:r,n,x:i,y:s,crv:a};return c.set(e,o),o}let n7=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function ie(e,t){if(t&&"https:"!==e.protocol)throw nW("only requests to HTTPS are allowed",iQ,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw nW("only HTTP and HTTPS requests are allowed",i0,e)}function it(e,t,r,n){let i;if("string"!=typeof e||!(i=n7(e)))throw nW(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?i3:i8,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return ie(i,n),i}function ir(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?it(e.mtls_endpoint_aliases[t],t,r,n):it(e[t],t,r,n)}class ii extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iq,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class is extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iF,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class ia extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=iz,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let io="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",ic=RegExp("^[,\\s]*("+io+")\\s(.*)"),il=RegExp("^[,\\s]*("+io+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"[,\\s]*(.*)'),iu=RegExp("^[,\\s]*("+io+")\\s*=\\s*("+io+")[,\\s]*(.*)"),id=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function ih(e){if(e.status>399&&e.status<500){i4(e),nY(e);try{let t=await e.clone().json();if(nK(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function ip(e,t,r){if(e.status!==t){let t;if(t=await ih(e))throw await e.body?.cancel(),new ii("server responded with an error in the response body",{cause:t,response:e});throw nW(`"response" is not a conform ${r} response (unexpected HTTP status code)`,iZ,e)}}function im(e){if(!ij.has(e))throw nR('"options.DPoP" is not a valid DPoPHandle',nA)}async function iy(e,t,r,n,i,s){if(nV(e,'"accessToken"'),!(r instanceof URL))throw nR('"url" must be an instance of URL',nE);ie(r,s?.[nT]!==!0),n=nB(n),s?.DPoP&&(im(s.DPoP),await s.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let a=await (s?.[nC]||fetch)(r.href,{body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:s?.signal?nz(s.signal):void 0});return s?.DPoP?.cacheNonce(a),a}async function ib(e,t,r,n){n6(e),n3(t);let i=ir(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[nT]!==!0),s=nB(n?.headers);return t.userinfo_signed_response_alg?s.set("accept","application/jwt"):(s.set("accept","application/json"),s.append("accept","application/jwt")),iy(r,"GET",i,s,null,{...n,[nO]:n1(t)})}function iw(e,t,r,n){(l||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return n5()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function ig(e,t){l?.delete(e),delete t?.jwks,delete t?.uat}let ix=Symbol();function iv(e){return e.headers.get("content-type")?.split(";")[0]}async function i_(e,t,r,n,i){let s;if(n6(e),n3(t),!nS(n,Response))throw nR('"response" must be an instance of Response',nE);if(iO(n),200!==n.status)throw nW('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',iZ,n);if(i4(n),"application/jwt"===iv(n)){let{claims:r,jwt:a}=await sr(await n.text(),ss.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),n1(t),n2(t),i?.[nU]).then(iP.bind(void 0,t.client_id)).then(iI.bind(void 0,e));iE.set(n,a),s=r}else{if(t.userinfo_signed_response_alg)throw nW("JWT UserInfo Response expected",iG,n);s=await su(n)}if(nV(s.sub,'"response" body "sub" property',iX,{body:s}),r===ix);else if(nV(r,'"expectedSubject"'),s.sub!==r)throw nW('unexpected "response" body "sub" property value',i5,{expected:r,body:s,attribute:"sub"});return s}async function ik(e,t,r,n,i,s,a){return await r(e,t,i,s),s.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(a?.[nC]||fetch)(n.href,{body:i,headers:Object.fromEntries(s.entries()),method:"POST",redirect:"manual",signal:a?.signal?nz(a.signal):void 0})}async function iS(e,t,r,n,i,s){let a=ir(e,"token_endpoint",t.use_mtls_endpoint_aliases,s?.[nT]!==!0);i.set("grant_type",n);let o=nB(s?.headers);o.set("accept","application/json"),s?.DPoP!==void 0&&(im(s.DPoP),await s.DPoP.addProof(a,o,"POST"));let c=await ik(e,t,r,a,i,o,s);return s?.DPoP?.cacheNonce(c),c}let iA=new WeakMap,iE=new WeakMap;function iR(e){if(!e.id_token)return;let t=iA.get(e);if(!t)throw nR('"ref" was already garbage collected or did not resolve from the proper sources',nA);return t}async function iT(e,t,r,n,i){if(n6(e),n3(t),!nS(r,Response))throw nR('"response" must be an instance of Response',nE);iO(r),await ip(r,200,"Token Endpoint"),i4(r);let s=await su(r);if(nV(s.access_token,'"response" body "access_token" property',iX,{body:s}),nV(s.token_type,'"response" body "token_type" property',iX,{body:s}),s.token_type=s.token_type.toLowerCase(),"dpop"!==s.token_type&&"bearer"!==s.token_type)throw new nM("unsupported `token_type` value",{cause:{body:s}});if(void 0!==s.expires_in){let e="number"!=typeof s.expires_in?parseFloat(s.expires_in):s.expires_in;nG(e,!1,'"response" body "expires_in" property',iX,{body:s}),s.expires_in=e}if(void 0!==s.refresh_token&&nV(s.refresh_token,'"response" body "refresh_token" property',iX,{body:s}),void 0!==s.scope&&"string"!=typeof s.scope)throw nW('"response" body "scope" property must be a string',iX,{body:s});if(void 0!==s.id_token){nV(s.id_token,'"response" body "id_token" property',iX,{body:s});let a=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&a.push("auth_time"),void 0!==t.default_max_age&&(nG(t.default_max_age,!1,'"client.default_max_age"'),a.push("auth_time")),n?.length&&a.push(...n);let{claims:o,jwt:c}=await sr(s.id_token,ss.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),n1(t),n2(t),i?.[nU]).then(iL.bind(void 0,a)).then(iU.bind(void 0,e)).then(iC.bind(void 0,t.client_id));if(Array.isArray(o.aud)&&1!==o.aud.length){if(void 0===o.azp)throw nW('ID Token "aud" (audience) claim includes additional untrusted audiences',i2,{claims:o,claim:"aud"});if(o.azp!==t.client_id)throw nW('unexpected ID Token "azp" (authorized party) claim value',i2,{expected:t.client_id,claims:o,claim:"azp"})}void 0!==o.auth_time&&nG(o.auth_time,!1,'ID Token "auth_time" (authentication time)',iX,{claims:o}),iE.set(r,c),iA.set(s,o)}return s}function iO(e){let t;if(t=function(e){if(!nS(e,Response))throw nR('"response" must be an instance of Response',nE);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(ic),i=t?.["1"].toLowerCase();if(n=t?.["2"],!i)return;let s={};for(;n;){let r,i;if(t=n.match(il)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}s[r.toLowerCase()]=i;continue}if(t=n.match(iu)){[,r,i,n]=t,s[r.toLowerCase()]=i;continue}if(t=n.match(id)){if(Object.keys(s).length)break;[,e,n]=t;break}return}let a={scheme:i,parameters:s};e&&(a.token68=e),r.push(a)}if(r.length)return r}(e))throw new ia("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function iP(e,t){return void 0!==t.claims.aud?iC(e,t):t}function iC(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw nW('unexpected JWT "aud" (audience) claim value',i2,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw nW('unexpected JWT "aud" (audience) claim value',i2,{expected:e,claims:t.claims,claim:"aud"});return t}function iI(e,t){return void 0!==t.claims.iss?iU(e,t):t}function iU(e,t){let r=e[sh]?.(t)??e.issuer;if(t.claims.iss!==r)throw nW('unexpected JWT "iss" (issuer) claim value',i2,{expected:r,claims:t.claims,claim:"iss"});return t}let ij=new WeakSet,iD=Symbol();async function i$(e,t,r,n,i,s,a){if(n6(e),n3(t),!ij.has(n))throw nR('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',nA);nV(i,'"redirectUri"');let o=sa(n,"code");if(!o)throw nW('no authorization code in "callbackParameters"',iX);let c=new URLSearchParams(a?.additionalParameters);return c.set("redirect_uri",i),c.set("code",o),s!==iD&&(nV(s,'"codeVerifier"'),c.set("code_verifier",s)),iS(e,t,r,"authorization_code",c,a)}let iN={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function iL(e,t){for(let r of e)if(void 0===t.claims[r])throw nW(`JWT "${r}" (${iN[r]}) claim missing`,iX,{claims:t.claims});return t}let iM=Symbol(),iH=Symbol();async function iW(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?iK(e,t,r,n.expectedNonce,n.maxAge,{[nU]:n[nU]}):iB(e,t,r,n)}async function iK(e,t,r,n,i,s){let a=[];switch(n){case void 0:n=iM;break;case iM:break;default:nV(n,'"expectedNonce" argument'),a.push("nonce")}switch(i??=t.default_max_age){case void 0:i=iH;break;case iH:break;default:nG(i,!1,'"maxAge" argument'),a.push("auth_time")}let o=await iT(e,t,r,a,s);nV(o.id_token,'"response" body "id_token" property',iX,{body:o});let c=iR(o);if(i!==iH){let e=n5()+n1(t),r=n2(t);if(c.auth_time+i<e-r)throw nW("too much time has elapsed since the last End-User authentication",i1,{claims:c,now:e,tolerance:r,claim:"auth_time"})}if(n===iM){if(void 0!==c.nonce)throw nW('unexpected ID Token "nonce" claim value',i2,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw nW('unexpected ID Token "nonce" claim value',i2,{expected:n,claims:c,claim:"nonce"});return o}async function iB(e,t,r,n){let i=await iT(e,t,r,void 0,n),s=iR(i);if(s){if(void 0!==t.default_max_age){nG(t.default_max_age,!1,'"client.default_max_age"');let e=n5()+n1(t),r=n2(t);if(s.auth_time+t.default_max_age<e-r)throw nW("too much time has elapsed since the last End-User authentication",i1,{claims:s,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==s.nonce)throw nW('unexpected ID Token "nonce" claim value',i2,{expected:void 0,claims:s,claim:"nonce"})}return i}let iz="OAUTH_WWW_AUTHENTICATE_CHALLENGE",iq="OAUTH_RESPONSE_BODY_ERROR",iJ="OAUTH_UNSUPPORTED_OPERATION",iF="OAUTH_AUTHORIZATION_RESPONSE_ERROR",iG="OAUTH_JWT_USERINFO_EXPECTED",iV="OAUTH_PARSE_ERROR",iX="OAUTH_INVALID_RESPONSE",iY="OAUTH_RESPONSE_IS_NOT_JSON",iZ="OAUTH_RESPONSE_IS_NOT_CONFORM",iQ="OAUTH_HTTP_REQUEST_FORBIDDEN",i0="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",i1="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",i2="OAUTH_JWT_CLAIM_COMPARISON_FAILED",i5="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",i6="OAUTH_KEY_SELECTION_FAILED",i3="OAUTH_MISSING_SERVER_METADATA",i8="OAUTH_INVALID_SERVER_METADATA";function i4(e){if(e.bodyUsed)throw nR('"response" body has been used already',nA)}async function i9(e,t){n6(e);let r=ir(e,"jwks_uri",!1,t?.[nT]!==!0),n=nB(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[nC]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:t?.signal?nz(t.signal):void 0})}async function i7(e){if(!nS(e,Response))throw nR('"response" must be an instance of Response',nE);if(200!==e.status)throw nW('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',iZ,e);i4(e);let t=await su(e,e=>(function(e,...t){if(!t.includes(iv(e)))throw nZ(e,...t)})(e,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw nW('"response" body "keys" property must be an array',iX,{body:t});if(!Array.prototype.every.call(t.keys,nK))throw nW('"response" body "keys" property members must be JWK formatted objects',iX,{body:t});return t}function se(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new nM(`unsupported ${t.name} modulusLength`,{cause:e})}function st(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new nM("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(se(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new nM("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return se(e),e.algorithm.name;case"Ed25519":return e.algorithm.name}throw new nM("unsupported CryptoKey algorithm name",{cause:e})}async function sr(e,t,r,n,i){let s,a,{0:o,1:c,length:l}=e.split(".");if(5===l){if(void 0!==i)e=await i(e),{0:o,1:c,length:l}=e.split(".");else throw new nM("JWE decryption is not configured",{cause:e})}if(3!==l)throw nW("Invalid JWT",iX,e);try{s=JSON.parse(nN(nL(o)))}catch(e){throw nW("failed to parse JWT Header body as base64url encoded JSON",iV,e)}if(!nK(s))throw nW("JWT Header must be a top level object",iX,e);if(t(s),void 0!==s.crit)throw new nM('no JWT "crit" header parameter extensions are supported',{cause:{header:s}});try{a=JSON.parse(nN(nL(c)))}catch(e){throw nW("failed to parse JWT Payload body as base64url encoded JSON",iV,e)}if(!nK(a))throw nW("JWT Payload must be a top level object",iX,e);let u=n5()+r;if(void 0!==a.exp){if("number"!=typeof a.exp)throw nW('unexpected JWT "exp" (expiration time) claim type',iX,{claims:a});if(a.exp<=u-n)throw nW('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',i1,{claims:a,now:u,tolerance:n,claim:"exp"})}if(void 0!==a.iat&&"number"!=typeof a.iat)throw nW('unexpected JWT "iat" (issued at) claim type',iX,{claims:a});if(void 0!==a.iss&&"string"!=typeof a.iss)throw nW('unexpected JWT "iss" (issuer) claim type',iX,{claims:a});if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw nW('unexpected JWT "nbf" (not before) claim type',iX,{claims:a});if(a.nbf>u+n)throw nW('unexpected JWT "nbf" (not before) claim value',i1,{claims:a,now:u,tolerance:n,claim:"nbf"})}if(void 0!==a.aud&&"string"!=typeof a.aud&&!Array.isArray(a.aud))throw nW('unexpected JWT "aud" (audience) claim type',iX,{claims:a});return{header:s,claims:a,jwt:e}}async function sn(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;default:throw new nM(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,nN(e));return nL(i.slice(0,i.byteLength/2))}async function si(e){if(e.bodyUsed)throw nR("form_post Request instances must contain a readable body",nA,{cause:e});return e.text()}function ss(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw nW('unexpected JWT "alg" header parameter',iX,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw nW('unexpected JWT "alg" header parameter',iX,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw nW('unexpected JWT "alg" header parameter',iX,{header:n,expected:r,reason:"default value"});return}throw nW('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function sa(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw nW(`"${t}" parameter must be provided only once`,iX);return r}let so=Symbol(),sc=Symbol();async function sl(e,t){let{ext:r,key_ops:n,use:i,...s}=t;return crypto.subtle.importKey("jwk",s,function(e){switch(e){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${e.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"Ed25519":case"EdDSA":return"Ed25519";default:throw new nM("unsupported JWS algorithm",{cause:{alg:e}})}}(e),!0,["verify"])}async function su(e,t=nY){let r;try{r=await e.json()}catch(r){throw t(e),nW('failed to parse "response" body as JSON',iV,r)}if(!nK(r))throw nW('"response" body must be a top level object',iX,{body:r});return r}let sd=Symbol(),sh=Symbol();async function sp(e,t,r){let{cookies:n,logger:i}=r,s=n[e],a=new Date;a.setTime(a.getTime()+9e5),i.debug(`CREATE_${e.toUpperCase()}`,{name:s.name,payload:t,COOKIE_TTL:900,expires:a});let o=await t0({...r.jwt,maxAge:900,token:{value:t},salt:s.name}),c={...s.options,expires:a};return{name:s.name,value:o,options:c}}async function sf(e,t,r){try{let{logger:n,cookies:i,jwt:s}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new A(`${e} cookie was missing`);let a=await t1({...s,token:t,salt:i[e].name});if(a?.value)return a.value;throw Error("Invalid cookie")}catch(t){throw new A(`${e} value could not be parsed`,{cause:t})}}function sm(e,t,r){let{logger:n,cookies:i}=t,s=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:s}),r.push({name:s.name,value:"",options:{...i[e].options,maxAge:0}})}function sy(e,t){return async function(r,n,i){let{provider:s,logger:a}=i;if(!s?.checks?.includes(e))return;let o=r?.[i.cookies[t].name];a.debug(`USE_${t.toUpperCase()}`,{value:o});let c=await sf(t,o,i);return sm(t,i,n),c}}let sb={async create(e){let t=nQ(),r=await n0(t);return{cookie:await sp("pkceCodeVerifier",t,e),value:r}},use:sy("pkce","pkceCodeVerifier")},sw="encodedState",sg={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new A("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:nQ()},i=await t0({secret:e.jwt.secret,token:n,salt:sw,maxAge:900});return{cookie:await sp("state",i,e),value:i}},use:sy("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await t1({secret:t.jwt.secret,token:e,salt:sw});if(r)return r;throw Error("Invalid state")}catch(e){throw new A("State could not be decoded",{cause:e})}}},sx={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=nQ();return{cookie:await sp("nonce",t,e),value:t}},use:sy("nonce","nonce")},sv="encodedWebauthnChallenge",s_={create:async(e,t,r)=>({cookie:await sp("webauthnChallenge",await t0({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:sv,maxAge:900}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await sf("webauthnChallenge",n,e),s=await t1({secret:e.jwt.secret,token:i,salt:sv});if(sm("webauthnChallenge",e,r),!s)throw new A("WebAuthn challenge was missing");return s}};function sk(e){return encodeURIComponent(e).replace(/%20/g,"+")}async function sS(e,t,r){let n,i,s;let{logger:a,provider:o}=r,{token:c,userinfo:l}=o;if(c?.url&&"authjs.dev"!==c.url.host||l?.url&&"authjs.dev"!==l.url.host)n={issuer:o.issuer??"https://authjs.dev",token_endpoint:c?.url.toString(),userinfo_endpoint:l?.url.toString()};else{let e=new URL(o.issuer),t=await nF(e,{[nT]:!0,[nC]:o[rh]});if(!(n=await nX(e,t)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!n.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let u={client_id:o.clientId,...o.client};switch(u.token_endpoint_auth_method){case void 0:case"client_secret_basic":i=(e,t,r,n)=>{n.set("authorization",function(e,t){let r=sk(e),n=sk(t),i=btoa(`${r}:${n}`);return`Basic ${i}`}(o.clientId,o.clientSecret))};break;case"client_secret_post":var d;nV(d=o.clientSecret,'"clientSecret"'),i=(e,t,r,n)=>{r.set("client_id",t.client_id),r.set("client_secret",d)};break;case"client_secret_jwt":i=function(e,t){let r;nV(e,'"clientSecret"');let n=void 0;return async(t,i,s,a)=>{r||=await crypto.subtle.importKey("raw",nN(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let o={alg:"HS256"},c=n8(t,i);n?.(o,c);let l=`${nL(nN(JSON.stringify(o)))}.${nL(nN(JSON.stringify(c)))}`,u=await crypto.subtle.sign(r.algorithm,r,nN(l));s.set("client_id",i.client_id),s.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),s.set("client_assertion",`${l}.${nL(new Uint8Array(u))}`)}}(o.clientSecret);break;case"private_key_jwt":i=function(e,t){let{key:r,kid:n}=e instanceof CryptoKey?{key:e}:e?.key instanceof CryptoKey?(void 0!==e.kid&&nV(e.kid,'"kid"'),{key:e.key,kid:e.kid}):{};return function(e,t){if(function(e,t){if(!(e instanceof CryptoKey))throw nR(`${t} must be a CryptoKey`,nE)}(e,t),"private"!==e.type)throw nR(`${t} must be a private CryptoKey`,nA)}(r,'"clientPrivateKey.key"'),async(e,i,s,a)=>{let o={alg:function(e){switch(e.algorithm.name){case"RSA-PSS":return function(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new nM("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}(e);case"RSASSA-PKCS1-v1_5":return function(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new nM("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}(e);case"ECDSA":return function(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new nM("unsupported EcKeyAlgorithm namedCurve",{cause:e})}}(e);case"Ed25519":case"EdDSA":return"Ed25519";default:throw new nM("unsupported CryptoKey algorithm name",{cause:e})}}(r),kid:n},c=n8(e,i);t?.[nI]?.(o,c),s.set("client_id",i.client_id),s.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),s.set("client_assertion",await n4(o,c,r))}}(o.token.clientPrivateKey,{[nI](e,t){t.aud=[n.issuer,n.token_endpoint]}});break;case"none":i=(e,t,r,n)=>{r.set("client_id",t.client_id)};break;default:throw Error("unsupported client authentication method")}let h=[],p=await sg.use(t,h,r);try{s=function(e,t,r,n){var i;if(n6(e),n3(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw nR('"parameters" must be an instance of URLSearchParams, or URL',nE);if(sa(r,"response"))throw nW('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',iX,{parameters:r});let s=sa(r,"iss"),a=sa(r,"state");if(!s&&e.authorization_response_iss_parameter_supported)throw nW('response parameter "iss" (issuer) missing',iX,{parameters:r});if(s&&s!==e.issuer)throw nW('unexpected "iss" (issuer) response parameter value',iX,{expected:e.issuer,parameters:r});switch(n){case void 0:case sc:if(void 0!==a)throw nW('unexpected "state" response parameter encountered',iX,{expected:void 0,parameters:r});break;case so:break;default:if(nV(n,'"expectedState" argument'),a!==n)throw nW(void 0===a?'response parameter "state" missing':'unexpected "state" response parameter value',iX,{expected:n,parameters:r})}if(sa(r,"error"))throw new is("authorization response from the server is an error",{cause:r});let o=sa(r,"id_token"),c=sa(r,"token");if(void 0!==o||void 0!==c)throw new nM("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),ij.add(i),i}(n,u,new URLSearchParams(e),o.checks.includes("state")?p:so)}catch(e){if(e instanceof is){let t={providerId:o.id,...Object.fromEntries(e.cause.entries())};throw a.debug("OAuthCallbackError",t),new I("OAuth Provider returned an error",t)}throw e}let f=await sb.use(t,h,r),m=o.callbackUrl;!r.isOnRedirectProxy&&o.redirectProxyUrl&&(m=o.redirectProxyUrl);let y=await i$(n,u,i,s,m,f??"decoy",{[nT]:!0,[nC]:(...e)=>(o.checks.includes("pkce")||e[1].body.delete("code_verifier"),(o[rh]??fetch)(...e))});o.token?.conform&&(y=await o.token.conform(y.clone())??y);let b={},w="oidc"===o.type;if(o[rp])switch(o.id){case"microsoft-entra-id":case"azure-ad":{let e=await y.clone().json();if(e.error){let t={providerId:o.id,...e};throw new I(`OAuth Provider returned an error: ${e.error}`,t)}let{tid:t}=function(e){let t,r;if("string"!=typeof e)throw new eA("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new eA("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new eA("Invalid JWT");if(!n)throw new eA("JWTs must contain a payload");try{t=ey(n)}catch{throw new eA("Failed to base64url decode the payload")}try{r=JSON.parse(ed.decode(t))}catch{throw new eA("Failed to parse the decoded payload as JSON")}if(!eI(r))throw new eA("Invalid JWT Claims Set");return r}(e.id_token);if("string"==typeof t){let e=n.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",r=new URL(n.issuer.replace(e,t)),i=await nF(r,{[nC]:o[rh]});n=await nX(r,i)}}}let g=await iW(n,u,y,{expectedNonce:await sx.use(t,h,r),requireIdToken:w});if(w){let t=iR(g);if(b=t,o[rp]&&"apple"===o.id)try{b.user=JSON.parse(e?.user)}catch{}if(!1===o.idToken){let e=await ib(n,u,g.access_token,{[nC]:o[rh],[nT]:!0});b=await i_(n,u,t.sub,e)}}else if(l?.request){let e=await l.request({tokens:g,provider:o});e instanceof Object&&(b=e)}else if(l?.url){let e=await ib(n,u,g.access_token,{[nC]:o[rh],[nT]:!0});b=await e.json()}else throw TypeError("No userinfo endpoint configured");return g.expires_in&&(g.expires_at=Math.floor(Date.now()/1e3)+Number(g.expires_in)),{...await sA(b,o,g,a),profile:b,cookies:h}}async function sA(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new U(r,{provider:t.id}))}}async function sE(e,t,r,n){let i=await sC(e,t,r),{cookie:s}=await s_.create(e,i.challenge,r);return{status:200,cookies:[...n??[],s],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function sR(e,t,r,n){let i=await sP(e,t,r),{cookie:s}=await s_.create(e,i.challenge);return{status:200,cookies:[...n??[],s],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function sT(e,t,r){let n;let{adapter:i,provider:s}=e,a=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!a||"object"!=typeof a||!("id"in a)||"string"!=typeof a.id)throw new m("Invalid WebAuthn Authentication response");let o=sj(sU(a.id)),c=await i.getAuthenticator(o);if(!c)throw new m(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:o})}`);let{challenge:l}=await s_.use(e,t.cookies,r);try{let r=s.getRelayingParty(e,t);n=await s.simpleWebAuthn.verifyAuthenticationResponse({...s.verifyAuthenticationOptions,expectedChallenge:l,response:a,authenticator:{...c,credentialDeviceType:c.credentialDeviceType,transports:sD(c.transports),credentialID:sU(c.credentialID),credentialPublicKey:sU(c.credentialPublicKey)},expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new F(e)}let{verified:u,authenticationInfo:d}=n;if(!u)throw new F("WebAuthn authentication response could not be verified");try{let{newCounter:e}=d;await i.updateAuthenticatorCounter(c.credentialID,e)}catch(e){throw new b(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:o,oldCounter:c.counter,newCounter:d.newCounter})}`,e)}let h=await i.getAccount(c.providerAccountId,s.id);if(!h)throw new m(`WebAuthn account not found in database: ${JSON.stringify({credentialID:o,providerAccountId:c.providerAccountId})}`);let p=await i.getUser(h.userId);if(!p)throw new m(`WebAuthn user not found in database: ${JSON.stringify({credentialID:o,providerAccountId:c.providerAccountId,userID:h.userId})}`);return{account:h,user:p}}async function sO(e,t,r){var n;let i;let{provider:s}=e,a=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!a||"object"!=typeof a||!("id"in a)||"string"!=typeof a.id)throw new m("Invalid WebAuthn Registration response");let{challenge:o,registerData:c}=await s_.use(e,t.cookies,r);if(!c)throw new m("Missing user registration data in WebAuthn challenge cookie");try{let r=s.getRelayingParty(e,t);i=await s.simpleWebAuthn.verifyRegistrationResponse({...s.verifyRegistrationOptions,expectedChallenge:o,response:a,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new F(e)}if(!i.verified||!i.registrationInfo)throw new F("WebAuthn registration response could not be verified");let l={providerAccountId:sj(i.registrationInfo.credentialID),provider:e.provider.id,type:s.type},u={providerAccountId:l.providerAccountId,counter:i.registrationInfo.counter,credentialID:sj(i.registrationInfo.credentialID),credentialPublicKey:sj(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=a.response.transports,n?.join(","))};return{user:c,account:l,authenticator:u}}async function sP(e,t,r){let{provider:n,adapter:i}=e,s=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,a=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:a.id,allowCredentials:s?.map(e=>({id:sU(e.credentialID),type:"public-key",transports:sD(e.transports)}))})}async function sC(e,t,r){let{provider:n,adapter:i}=e,s=r.id?await i.listAuthenticatorsByUserId(r.id):null,a=rs(32),o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:a,userName:r.email,userDisplayName:r.name??void 0,rpID:o.id,rpName:o.name,excludeCredentials:s?.map(e=>({id:sU(e.credentialID),type:"public-key",transports:sD(e.transports)}))})}function sI(e){let{provider:t,adapter:r}=e;if(!r)throw new R("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new H("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function sU(e){return new Uint8Array(Buffer.from(e,"base64"))}function sj(e){return Buffer.from(e).toString("base64")}function sD(e){return e?e.split(","):void 0}async function s$(e,t,r,n){if(!t.provider)throw new H("Callback route called without provider");let{query:i,body:s,method:a,headers:o}=e,{provider:c,adapter:l,url:u,callbackUrl:d,pages:h,jwt:p,events:f,callbacks:y,session:{strategy:b,maxAge:w},logger:x}=t,v="jwt"===b;try{if("oauth"===c.type||"oidc"===c.type){let a;let o=c.authorization?.url.searchParams.get("response_mode")==="form_post"?s:i;if(t.isOnRedirectProxy&&o?.state){let e=await sg.decode(o.state,t);if(e?.origin&&new URL(e.origin).origin!==t.url.origin){let t=`${e.origin}?${new URLSearchParams(o)}`;return x.debug("Proxy redirecting to",t),{redirect:t,cookies:n}}}let m=await sS(o,e.cookies,t);m.cookies.length&&n.push(...m.cookies),x.debug("authorization result",m);let{user:b,account:g,profile:_}=m;if(!b||!g||!_)return{redirect:`${u}/signin`,cookies:n};if(l){let{getUserByAccount:e}=l;a=await e({providerAccountId:g.providerAccountId,provider:c.id})}let k=await sN({user:a??b,account:g,profile:_},t);if(k)return{redirect:k,cookies:n};let{user:S,session:A,isNewUser:E}=await nk(r.value,b,g,t);if(v){let e={name:S.name,email:S.email,picture:S.image,sub:S.id?.toString()},i=await y.jwt({token:e,user:S,account:g,profile:_,isNewUser:E,trigger:E?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,s=await p.encode({...p,token:i,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*w);let o=r.chunk(s,{expires:a});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:A.sessionToken,options:{...t.cookies.sessionToken.options,expires:A.expires}});if(await f.signIn?.({user:S,account:g,profile:_,isNewUser:E}),E&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("email"===c.type){let e=i?.token,s=i?.email;if(!e){let t=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!e}});throw t.name="Configuration",t}let a=c.secret??t.secret,o=await l.useVerificationToken({identifier:s,token:await ri(`${e}${a}`)}),u=!!o,m=u&&o.expires.valueOf()<Date.now();if(!u||m||s&&o.identifier!==s)throw new K({hasInvite:u,expired:m});let{identifier:b}=o,g=await l.getUserByEmail(b)??{id:crypto.randomUUID(),email:b,emailVerified:null},x={providerAccountId:g.email,userId:g.id,type:"email",provider:c.id},_=await sN({user:g,account:x},t);if(_)return{redirect:_,cookies:n};let{user:k,session:S,isNewUser:A}=await nk(r.value,g,x,t);if(v){let e={name:k.name,email:k.email,picture:k.image,sub:k.id?.toString()},i=await y.jwt({token:e,user:k,account:x,isNewUser:A,trigger:A?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,s=await p.encode({...p,token:i,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*w);let o=r.chunk(s,{expires:a});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:S.sessionToken,options:{...t.cookies.sessionToken.options,expires:S.expires}});if(await f.signIn?.({user:k,account:x,isNewUser:A}),A&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("credentials"===c.type&&"POST"===a){let e=s??{};Object.entries(i??{}).forEach(([e,t])=>u.searchParams.set(e,t));let l=await c.authorize(e,new Request(u,{headers:o,method:a,body:JSON.stringify(s)}));if(l)l.id=l.id?.toString()??crypto.randomUUID();else throw new k;let h={providerAccountId:l.id,type:"credentials",provider:c.id},m=await sN({user:l,account:h,credentials:e},t);if(m)return{redirect:m,cookies:n};let b={name:l.name,email:l.email,picture:l.image,sub:l.id},g=await y.jwt({token:b,user:l,account:h,isNewUser:!1,trigger:"signIn"});if(null===g)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await p.encode({...p,token:g,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*w);let a=r.chunk(i,{expires:s});n.push(...a)}return await f.signIn?.({user:l,account:h}),{redirect:d,cookies:n}}if("webauthn"===c.type&&"POST"===a){let i,s,a;let o=e.body?.action;if("string"!=typeof o||"authenticate"!==o&&"register"!==o)throw new m("Invalid action parameter");let c=sI(t);switch(o){case"authenticate":{let t=await sT(c,e,n);i=t.user,s=t.account;break}case"register":{let r=await sO(t,e,n);i=r.user,s=r.account,a=r.authenticator}}await sN({user:i,account:s},t);let{user:l,isNewUser:u,session:b,account:g}=await nk(r.value,i,s,t);if(!g)throw new m("Error creating or finding account");if(a&&l.id&&await c.adapter.createAuthenticator({...a,userId:l.id}),v){let e={name:l.name,email:l.email,picture:l.image,sub:l.id?.toString()},i=await y.jwt({token:e,user:l,account:g,isNewUser:u,trigger:u?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,s=await p.encode({...p,token:i,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*w);let o=r.chunk(s,{expires:a});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:b.sessionToken,options:{...t.cookies.sessionToken.options,expires:b.expires}});if(await f.signIn?.({user:l,account:g,isNewUser:u}),u&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}throw new H(`Callback for provider type (${c.type}) is not supported`)}catch(t){if(t instanceof m)throw t;let e=new g(t,{provider:c.id});throw x.debug("callback route error details",{method:a,query:i,body:s}),e}}async function sN(e,t){let r;let{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof m)throw e;throw new w(e)}if(!r)throw new w("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function sL(e,t,r,n,i){let{adapter:s,jwt:a,events:o,callbacks:c,logger:l,session:{strategy:u,maxAge:d}}=e,h={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},p=t.value;if(!p)return h;if("jwt"===u){try{let r=e.cookies.sessionToken.name,s=await a.decode({...a,token:p,salt:r});if(!s)throw Error("Invalid JWT");let l=await c.jwt({token:s,...n&&{trigger:"update"},session:i}),u=n_(d);if(null!==l){let e={user:{name:l.name,email:l.email,image:l.picture},expires:u.toISOString()},n=await c.session({session:e,token:l});h.body=n;let i=await a.encode({...a,token:l,salt:r}),s=t.chunk(i,{expires:u});h.cookies?.push(...s),await o.session?.({session:n,token:l})}else h.cookies?.push(...t.clean())}catch(e){l.error(new E(e)),h.cookies?.push(...t.clean())}return h}try{let{getSessionAndUser:r,deleteSession:a,updateSession:l}=s,u=await r(p);if(u&&u.session.expires.valueOf()<Date.now()&&(await a(p),u=null),u){let{user:t,session:r}=u,s=e.session.updateAge,a=r.expires.valueOf()-1e3*d+1e3*s,f=n_(d);a<=Date.now()&&await l({sessionToken:p,expires:f});let m=await c.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});h.body=m,h.cookies?.push({name:e.cookies.sessionToken.name,value:p,options:{...e.cookies.sessionToken.options,expires:f}}),await o.session?.({session:m})}else p&&h.cookies?.push(...t.clean())}catch(e){l.error(new j(e))}return h}async function sM(e,t){let r,n;let{logger:i,provider:s}=t,a=s.authorization?.url;if(!a||"authjs.dev"===a.host){let e=new URL(s.issuer),t=await nF(e,{[nC]:s[rh],[nT]:!0}),r=await nX(e,t).catch(t=>{if(!(t instanceof TypeError)||"Invalid URL"!==t.message)throw t;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${e}`)});if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");a=new URL(r.authorization_endpoint)}let o=a.searchParams,c=s.callbackUrl;!t.isOnRedirectProxy&&s.redirectProxyUrl&&(c=s.redirectProxyUrl,n=s.callbackUrl,i.debug("using redirect proxy",{redirect_uri:c,data:n}));let l=Object.assign({response_type:"code",client_id:s.clientId,redirect_uri:c,...s.authorization?.params},Object.fromEntries(s.authorization?.url.searchParams??[]),e);for(let e in l)o.set(e,l[e]);let u=[];s.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let d=await sg.create(t,n);if(d&&(o.set("state",d.value),u.push(d.cookie)),s.checks?.includes("pkce")){if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===s.type&&(s.checks=["nonce"]);else{let{value:e,cookie:r}=await sb.create(t);o.set("code_challenge",e),o.set("code_challenge_method","S256"),u.push(r)}}let h=await sx.create(t);return h&&(o.set("nonce",h.value),u.push(h.cookie)),"oidc"!==s.type||a.searchParams.has("scope")||a.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:a,cookies:u,provider:s}),{redirect:a.toString(),cookies:u}}async function sH(e,t){let r;let{body:n}=e,{provider:i,callbacks:s,adapter:a}=t,o=(i.normalizeIdentifier??function(e){if(!e)throw Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`})(n?.email),c={id:crypto.randomUUID(),email:o,emailVerified:null},l=await a.getUserByEmail(o)??c,u={providerAccountId:o,userId:l.id,type:"email",provider:i.id};try{r=await s.signIn({user:l,account:u,email:{verificationRequest:!0}})}catch(e){throw new w(e)}if(!r)throw new w("AccessDenied");if("string"==typeof r)return{redirect:await s.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:d,theme:h}=t,p=await i.generateVerificationToken?.()??rs(32),f=new Date(Date.now()+(i.maxAge??86400)*1e3),m=i.secret??t.secret,y=new URL(t.basePath,t.url.origin),b=i.sendVerificationRequest({identifier:o,token:p,expires:f,url:`${y}/callback/${i.id}?${new URLSearchParams({callbackUrl:d,token:p,email:o})}`,provider:i,theme:h,request:new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}),g=a.createVerificationToken?.({identifier:o,token:await ri(`${p}${m}`),expires:f});return await Promise.all([b,g]),{redirect:`${y}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function sW(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await sM(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await sH(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function sK(e,t,r){let{jwt:n,events:i,callbackUrl:s,logger:a,session:o}=r,c=t.value;if(!c)return{redirect:s,cookies:e};try{if("jwt"===o.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:c,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(c);await i.signOut?.({session:e})}}catch(e){a.error(new N(e))}return e.push(...t.clean()),{redirect:s,cookies:e}}async function sB(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,s=t.value;if(!s)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:s,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(s);if(e)return e.user}return null}async function sz(e,t,r,n){let i=sI(t),{provider:s}=i,{action:a}=e.query??{};if("register"!==a&&"authenticate"!==a&&void 0!==a)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let o=await sB(t,r),c=o?{user:o,exists:!0}:await s.getUserInfo(t,e),l=c?.user;switch(function(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t){if(!n||i)return"authenticate";return"register"}}return null}(a,!!o,c)){case"authenticate":return sR(i,e,l,n);case"register":if("string"==typeof l?.email)return sE(i,e,l,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function sq(e,t){let{action:r,providerId:n,error:i,method:s}=e,a=t.skipCSRFCheck===ru,{options:o,cookies:c}=await rg({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===s,csrfDisabled:a}),l=new f(o.cookies.sessionToken,e.cookies,o.logger);if("GET"===s){let t=nv({...o,query:e.query,cookies:c});switch(r){case"callback":return await s$(e,o,l,c);case"csrf":return t.csrf(a,o,c);case"error":return t.error(i);case"providers":return t.providers(o.providers);case"session":return await sL(o,l,c);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await sz(e,o,l,c)}}else{let{csrfTokenVerified:t}=o;switch(r){case"callback":return"credentials"===o.provider.type&&ro(r,t),await s$(e,o,l,c);case"session":return ro(r,t),await sL(o,l,c,!0,e.body?.data);case"signin":return ro(r,t),await sW(e,c,o);case"signout":return ro(r,t),await sK(c,l,o)}}throw new L(`Cannot handle action: ${r}`)}function sJ(e,t,r,n,i){let s;let a=i?.basePath,o=n.AUTH_URL??n.NEXTAUTH_URL;if(o)s=new URL(o),a&&"/"!==a&&"/"!==s.pathname&&(s.pathname!==a&&t4(i).warn("env-url-basepath-mismatch"),s.pathname="/");else{let e=r.get("x-forwarded-host")??r.get("host"),n=r.get("x-forwarded-proto")??t??"https",i=n.endsWith(":")?n:n+":";s=new URL(`${i}//${e}`)}let c=s.toString().replace(/\/$/,"");if(a){let t=a?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${c}/${t}/${e}`)}return new URL(`${c}/${e}`)}async function sF(e,t){let r=t4(t),n=await rr(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=function(e,t){let{url:r}=e,n=[];if(!X&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new W(`Host must be trusted. URL was: ${e.url}`);if(!t.secret?.length)return new P("Please define a `secret`");let i=e.query?.callbackUrl;if(i&&!Y(i,r.origin))return new _(`Invalid callback URL. Received: ${i}`);let{callbackUrl:s}=p(t.useSecureCookies??"https:"===r.protocol),a=e.cookies?.[t.cookies?.callbackUrl?.name??s.name];if(a&&!Y(a,r.origin))return new _(`Invalid callback URL. Received: ${a}`);let o=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e;let{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new S(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required`)}if("credentials"===t.type)Z=!0;else if("email"===t.type)Q=!0;else if("webauthn"===t.type){var c;if(ee=!0,t.simpleWebAuthnBrowserVersion&&(c=t.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(c)))return new m(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(o)return new q("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(o=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new J(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(Z){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new M("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new O("Must define an authorize() handler to use credentials authentication provider")}let{adapter:l,session:u}=t,d=[];if(Q||u?.strategy==="database"||!u?.strategy&&l){if(Q){if(!l)return new R("Email login requires an adapter");d.push(...et)}else{if(!l)return new R("Database session requires an adapter");d.push(...er)}}if(ee){if(!t.experimental?.enableWebAuthn)return new V("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(n.push("experimental-webauthn"),!l)return new R("WebAuthn requires an adapter");d.push(...en)}if(l){let e=d.filter(e=>!(e in l));if(e.length)return new T(`Required adapter methods were missing: ${e.join(", ")}`)}return X||(X=!0),n}(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||"GET"!==n.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:e,theme:s}=t,a=e?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||a)return a&&r.error(new x(`The error page ${e?.error} should not require authentication`)),rn(nv({theme:s}).error("Configuration"));let o=`${n.url.origin}${e.error}?error=Configuration`;return Response.redirect(o)}let s=e.headers?.has("X-Auth-Return-Redirect"),a=t.raw===rd;try{let e=await sq(n,t);if(a)return e;let r=rn(e),i=r.headers.get("Location");if(!s||!i)return r;return Response.json({url:i},{headers:r.headers})}catch(d){r.error(d);let i=d instanceof m;if(i&&a&&!s)throw d;if("POST"===e.method&&"session"===n.action)return Response.json(null,{status:400});let o=new URLSearchParams({error:d instanceof m&&z.has(d.type)?d.type:"Configuration"});d instanceof k&&o.set("code",d.code);let c=i&&d.kind||"error",l=t.pages?.[c]??`${t.basePath}/${c.toLowerCase()}`,u=`${n.url.origin}${l}?${o}`;if(s)return Response.json({url:u});return Response.redirect(u)}}var sG=r(49217);function sV(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new sG.NextRequest(n.replace(i,r),e)}function sX(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(e,t,r=!1){try{let n=e.AUTH_URL;n&&(t.basePath?r||t4(t).warn("env-url-basepath-redundant"):t.basePath=new URL(n).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let{id:r}="function"==typeof t?t({}):t,n=r.toUpperCase().replace(/-/g,"_"),i=e[`AUTH_${n}_ID`],s=e[`AUTH_${n}_SECRET`],a=e[`AUTH_${n}_ISSUER`],o=e[`AUTH_${n}_KEY`],c="function"==typeof t?t({clientId:i,clientSecret:s,issuer:a,apiKey:o}):t;return"oauth"===c.type||"oidc"===c.type?(c.clientId??(c.clientId=i),c.clientSecret??(c.clientSecret=s),c.issuer??(c.issuer=a)):"email"===c.type&&(c.apiKey??(c.apiKey=o)),c})}(process.env,e,!0)}}var sY=r(42385);async function sZ(e,t){return sF(new Request(sJ("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function sQ(e){return"function"==typeof e}function s0(e,t){return"function"==typeof e?async(...r)=>{if(!r.length){let r=await (0,sY.b3)(),n=await e(void 0);return t?.(n),sZ(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],s=await e(n);return t?.(s),s1([n,i],s)}if(sQ(r[0])){let n=r[0];return async(...r)=>{let i=await e(r[0]);return t?.(i),s1(r,i,n)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],s=await e(n);return t?.(s),sZ(new Headers(n.headers),s).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return Promise.resolve((0,sY.b3)()).then(t=>sZ(t,e).then(e=>e.json()));if(t[0]instanceof Request)return s1([t[0],t[1]],e);if(sQ(t[0])){let r=t[0];return async(...t)=>s1(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return sZ(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function s1(e,t,r){let n=sV(e[0]),i=await sZ(n.headers,t),s=await i.json(),a=!0;t.callbacks?.authorized&&(a=await t.callbacks.authorized({request:n,auth:s}));let o=sG.NextResponse.next?.();if(a instanceof Response){o=a;let e=a.headers.get("Location"),{pathname:r}=n.nextUrl;e&&function(e,t,r){let n=t.replace(`${e}/`,""),i=Object.values(r.pages??{});return(s2.has(n)||i.includes(t))&&t===e}(r,new URL(e).pathname,t)&&(a=!0)}else if(r)n.auth=s,o=await r(n,e[1])??sG.NextResponse.next();else if(!a){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),o=sG.NextResponse.redirect(t)}}let c=new Response(o?.body,o);for(let e of i.headers.getSetCookie())c.headers.append("set-cookie",e);return c}let s2=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var s5=r(99184);async function s6(e,t={},r,n){let i=new Headers(await (0,sY.b3)()),{redirect:s=!0,redirectTo:a,...o}=t instanceof FormData?Object.fromEntries(t):t,c=a?.toString()??i.get("Referer")??"/",l=sJ("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return l.searchParams.append("callbackUrl",c),s&&(0,s5.redirect)(l.toString()),l.toString();let u=`${l}/${e}?${new URLSearchParams(r)}`,d={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){d={id:i,type:r?.type??n.type};break}}if(!d.id){let e=`${l}?${new URLSearchParams({callbackUrl:c})}`;return s&&(0,s5.redirect)(e),e}"credentials"===d.type&&(u=u.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let h=new Request(u,{method:"POST",headers:i,body:new URLSearchParams({...o,callbackUrl:c})}),p=await sF(h,{...n,raw:rd,skipCSRFCheck:ru}),f=await (0,sY.UL)();for(let e of p?.cookies??[])f.set(e.name,e.value,e.options);let m=(p instanceof Response?p.headers.get("Location"):p.redirect)??u;return s?(0,s5.redirect)(m):m}async function s3(e,t){let r=new Headers(await (0,sY.b3)());r.set("Content-Type","application/x-www-form-urlencoded");let n=sJ("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),s=new Request(n,{method:"POST",headers:r,body:i}),a=await sF(s,{...t,raw:rd,skipCSRFCheck:ru}),o=await (0,sY.UL)();for(let e of a?.cookies??[])o.set(e.name,e.value,e.options);return e?.redirect??!0?(0,s5.redirect)(a.redirect):a}async function s8(e,t){let r=new Headers(await (0,sY.b3)());r.set("Content-Type","application/json");let n=new Request(sJ("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await sF(n,{...t,raw:rd,skipCSRFCheck:ru}),s=await (0,sY.UL)();for(let e of i?.cookies??[])s.set(e.name,e.value,e.options);return i.body}function s4(e){if("function"==typeof e){let t=async t=>{let r=await e(t);return sX(r),sF(sV(t),r)};return{handlers:{GET:t,POST:t},auth:s0(e,e=>sX(e)),signIn:async(t,r,n)=>{let i=await e(void 0);return sX(i),s6(t,r,n,i)},signOut:async t=>{let r=await e(void 0);return sX(r),s3(t,r)},unstable_update:async t=>{let r=await e(void 0);return sX(r),s8(t,r)}}}sX(e);let t=t=>sF(sV(t),e);return{handlers:{GET:t,POST:t},auth:s0(e),signIn:(t,r,n)=>s6(t,r,n,e),signOut:t=>s3(t,e),unstable_update:t=>s8(t,e)}}}};