module.exports = {

"[project]/components/BookCoverSvg.tsx [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
;
const BookCoverSvg = ({ coverColor })=>{
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("svg", {
        preserveAspectRatio: "none",
        fill: "none",
        width: "100%",
        height: "100%",
        viewBox: "0 0 143 199",
        xmlns: "http://www.w3.org/2000/svg",
        className: "absolute inset-0",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M141.851 196.481H140.652V174.61C141.39 173.885 141.851 172.876 141.851 171.763V4.26316C141.851 2.07107 140.068 0.277516 137.889 0.277516H16.7824C16.7824 0.277516 3.06348 -0.381156 0 11.5424V183.921C0 199.797 9.59001 198.993 9.59001 198.993H141.851C142.497 198.886 142.991 198.655 143 197.938C143.018 196.582 141.851 196.481 141.851 196.481Z",
                fill: "#CAD7DB"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 12,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M141.851 196.481H140.652V194.036H4.79924C2.20563 190.492 2.50324 184.366 2.50324 184.366C2.76966 174.251 16.7824 175.749 16.7824 175.749H137.888C138.961 175.749 139.937 175.313 140.652 174.61C141.39 173.885 141.851 172.876 141.851 171.763V4.26316C141.851 2.07107 140.068 0.277516 137.888 0.277516H16.7824C16.7824 0.277516 3.06348 -0.381156 0 11.5424V183.921C0 199.797 9.59001 198.993 9.59001 198.993H141.851C142.497 198.886 142.991 198.655 143 197.938C143.018 196.582 141.851 196.481 141.851 196.481Z",
                fill: coverColor
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 16,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M16.7824 173.873V0.277516C16.7824 0.277516 3.06348 -0.381156 0 11.5424V183.921C0 183.921 1.70019e-06 173.27 16.7824 173.873Z",
                fill: coverColor
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 20,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M118.676 34.8091H33.5649V72.9915H118.676V34.8091Z",
                fill: coverColor
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 24,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M6.3468 19.8239C8.70341 18.7114 11.202 18.121 13.1615 17.8225C15.1211 17.5225 16.5391 17.5098 16.7401 17.51H16.7607H16.761L16.7689 17.5102H16.7823V14.0939L16.7402 14.0938C16.1538 14.0991 11.6323 14.136 6.74782 15.955C4.44814 16.8161 2.05989 18.0912 0 19.9928V25.3396C0.569709 24.3755 1.24048 23.5291 1.99482 22.7842C3.26784 21.5331 4.77417 20.5647 6.3468 19.8239Z",
                fill: "white"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 28,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M7.17491 29.1211C9.53787 27.7332 11.9814 26.9986 13.8218 26.6228C14.7415 26.4345 15.5093 26.3349 16.0373 26.283C16.3014 26.257 16.5054 26.243 16.6387 26.2354C16.7046 26.2317 16.7524 26.2298 16.7823 26.2286V22.8115H16.7666L16.7495 22.8119C16.6123 22.8205 12.2181 22.8977 7.31586 25.1949C4.86821 26.3461 2.28842 28.0692 0.124461 30.6432C0.0818969 30.6937 0.0422296 30.75 0 30.8013V37.431C0.727262 35.6175 1.6601 34.1105 2.71796 32.849C4.05638 31.2571 5.59793 30.0464 7.17491 29.1211Z",
                fill: "white"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 32,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M6.34702 153.638C8.70375 152.525 11.2022 151.935 13.1617 151.636C15.1213 151.336 16.5393 151.324 16.7403 151.324H16.7587H16.7588L16.7667 151.324H16.7823V147.908L16.7402 147.908C16.1538 147.913 11.6324 147.95 6.74782 149.769C4.44826 150.63 2.06 151.905 0 153.807V159.154C0.569709 158.189 1.2407 157.343 1.99504 156.598C3.26806 155.347 4.77439 154.379 6.34702 153.638Z",
                fill: "white"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 36,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M7.17491 162.935C9.53787 161.547 11.9814 160.813 13.8218 160.437C14.7415 160.249 15.5093 160.149 16.0373 160.097C16.3014 160.071 16.5054 160.057 16.6387 160.05C16.7046 160.046 16.7524 160.044 16.7823 160.043V156.625H16.7666L16.7495 156.626C16.6123 156.634 12.2181 156.712 7.31586 159.009C4.86821 160.16 2.28842 161.883 0.124461 164.457C0.0818969 164.508 0.0422296 164.564 0 164.615V171.245C0.727262 169.432 1.6601 167.925 2.71796 166.663C4.05638 165.071 5.59793 163.86 7.17491 162.935Z",
                fill: "white"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 40,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M141.851 196.481H9.19034C7.1895 196.361 5.78601 195.384 4.79924 194.036C2.20563 190.492 2.50324 184.366 2.50324 184.366C2.76966 174.251 16.7824 175.749 16.7824 175.749H137.888C138.961 175.749 139.937 175.312 140.652 174.61C141.39 173.885 141.851 172.876 141.851 171.763V169.887C141.851 172.079 140.068 173.873 137.888 173.873H16.7824C1.70019e-06 173.27 0 183.921 0 183.921C0 199.797 9.59001 198.993 9.59001 198.993H141.851C142.497 198.885 142.991 198.654 143 197.938C143.018 196.581 141.851 196.481 141.851 196.481Z",
                fill: "#03030B"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 44,
                columnNumber: 13
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("path", {
                d: "M13.9253 184.443C23.7659 181.368 34.4608 180.461 44.7071 180.008C55.8062 179.517 66.919 179.88 78.0178 180.19C89.0344 180.499 99.9894 180.437 111.004 180.14C116.509 179.992 122.108 179.803 127.587 180.459C131.917 180.977 136.279 181.915 140.652 181.968V174.61C139.937 175.313 138.961 175.749 137.888 175.749H16.7822C16.7822 175.749 2.76943 174.252 2.50302 184.367C2.50302 184.367 2.38736 186.75 2.92955 189.403C6.35961 187.354 10.0113 185.666 13.9253 184.443Z",
                fill: "#AAB8BC"
            }, void 0, false, {
                fileName: "[project]/components/BookCoverSvg.tsx",
                lineNumber: 48,
                columnNumber: 13
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/BookCoverSvg.tsx",
        lineNumber: 3,
        columnNumber: 9
    }, this);
};
const __TURBOPACK__default__export__ = BookCoverSvg;
}}),
"[project]/lib/config.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "default": (()=>__TURBOPACK__default__export__)
});
const config = {
    env: {
        apiEndpoint: ("TURBOPACK compile-time value", "HTTP://LOCALHOST:3000"),
        prodApiEndpoint: ("TURBOPACK compile-time value", "https://new-creation-c4ymwrcj4-fareians-projects.vercel.app/"),
        imagekit: {
            publicKey: ("TURBOPACK compile-time value", "public_BtS+r9Vnb8MycIO2ZwDml3Hga3s="),
            urlEndpoint: ("TURBOPACK compile-time value", "https://ik.imagekit.io/newCreation"),
            privateKey: process.env.IMAGEKIT_PRIVATE_KEY
        },
        databaseUrl: process.env.DATABASE_URL,
        upstash: {
            redisUrl: process.env.UPSTASH_REDIS_URL,
            redisToken: process.env.UPSTASH_REDIS_TOKEN,
            qstashUrl: process.env.QSTASH_URL,
            qstashToken: process.env.QSTASH_TOKEN
        },
        resendToken: process.env.RESEND_TOKEN
    }
};
const __TURBOPACK__default__export__ = config;
}}),
"[project]/components/BookCover.tsx [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/lib/utils.ts [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$BookCoverSvg$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/components/BookCoverSvg.tsx [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$imagekitio$2d$next$2f$dist$2f$imagekit$2d$next$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/imagekitio-next/dist/imagekit-next.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$config$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/lib/config.ts [app-ssr] (ecmascript)");
"use client";
;
;
;
;
;
const variantStyles = {
    extraSmall: "book-cover_extra_small",
    small: "book-cover_small",
    medium: "book-cover_medium",
    regular: "book-cover_regular",
    wide: "book-cover_wide"
};
const BookCover = ({ className, variant = "regular", coverColor = "#012B48", coverImage = "https://placehold.co/400x600.png", width, height })=>{
    // Custom style for width/height
    const customStyle = width || height ? {
        width,
        height
    } : undefined;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cn"])("relative transition-all duration-300", variantStyles[variant], className),
        style: customStyle,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$BookCoverSvg$2e$tsx__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"], {
                coverColor: coverColor
            }, void 0, false, {
                fileName: "[project]/components/BookCover.tsx",
                lineNumber: 50,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "absolute z-10",
                style: {
                    left: "12%",
                    width: "87.5%",
                    height: "88%"
                },
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$imagekitio$2d$next$2f$dist$2f$imagekit$2d$next$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["IKImage"], {
                    path: coverImage,
                    urlEndpoint: __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$config$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].env.imagekit.urlEndpoint,
                    alt: "Book cover",
                    fill: true,
                    className: "rounded-sm object-fill",
                    loading: "lazy",
                    lqip: {
                        active: true
                    }
                }, void 0, false, {
                    fileName: "[project]/components/BookCover.tsx",
                    lineNumber: 55,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/components/BookCover.tsx",
                lineNumber: 51,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/BookCover.tsx",
        lineNumber: 42,
        columnNumber: 5
    }, this);
};
const __TURBOPACK__default__export__ = BookCover;
}}),
"[project]/hooks/useFileSize.ts [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "useFileSize": (()=>useFileSize)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
;
function useFileSize(fileUrl) {
    const [fileSize, setFileSize] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        async function fetchFileSize() {
            try {
                const response = await fetch(fileUrl, {
                    method: "HEAD"
                });
                const size = response.headers.get("content-length");
                if (size) setFileSize(formatBytes(Number(size)));
            } catch  {
                setFileSize(null);
            }
        }
        if (fileUrl) fetchFileSize();
    }, [
        fileUrl
    ]);
    return fileSize;
}
function formatBytes(bytes) {
    if (bytes === 0) return "0 Bytes";
    const k = 1024;
    const sizes = [
        "Bytes",
        "KB",
        "MB",
        "GB"
    ];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
}
}}),
"[project]/components/books/DownloadButton.tsx [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "default": (()=>DownloadButton)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/image.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$use$2d$toast$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/hooks/use-toast.ts [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$useFileSize$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/hooks/useFileSize.ts [app-ssr] (ecmascript)");
"use client";
;
;
;
;
function DownloadButton({ bookId, fileUrl, fileType }) {
    const fileSize = (0, __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$useFileSize$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useFileSize"])(fileUrl);
    const handleClick = async (e)=>{
        e.preventDefault();
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$use$2d$toast$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"])({
            title: "Download started",
            description: "Your book is downloading."
        });
        try {
            const response = await fetch(`/api/download/${bookId}`);
            if (!response.ok) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$use$2d$toast$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"])({
                    title: "Download failed",
                    description: "Could not download the file."
                });
                return;
            }
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.href = url;
            link.setAttribute("download", "book.pdf"); // Optionally set a better filename
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
        } catch (error) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$use$2d$toast$2e$ts__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["toast"])({
                title: "Download failed",
                description: "An error occurred."
            });
        }
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
        type: "button",
        className: "flex justify-center items-center gap-2 bg-blue-900 text-white px-4 py-2 rounded-md",
        onClick: handleClick,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"], {
                src: "/icons/download.svg",
                alt: "download",
                width: 20,
                height: 20
            }, void 0, false, {
                fileName: "[project]/components/books/DownloadButton.tsx",
                lineNumber: 45,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: "font-bebas-neue text-xl text-white",
                children: "Download Book"
            }, void 0, false, {
                fileName: "[project]/components/books/DownloadButton.tsx",
                lineNumber: 46,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/books/DownloadButton.tsx",
        lineNumber: 40,
        columnNumber: 5
    }, this);
}
}}),
"[project]/app/(root)/all-books/page.tsx [app-rsc] (ecmascript, Next.js server component, client modules ssr)": ((__turbopack_context__) => {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, t: __turbopack_require_real__ } = __turbopack_context__;
{
}}),
"[project]/node_modules/imagekitio-next/dist/imagekit-next.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "IKImage": (()=>IKImage),
    "IKUpload": (()=>IKUpload),
    "IKVideo": (()=>IKVideo),
    "ImageKitClient": (()=>ImageKit),
    "ImageKitContext": (()=>ImageKitContext),
    "ImageKitProvider": (()=>ImageKitProvider)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/next/image.js [app-ssr] (ecmascript)");
;
;
function _typeof(obj) {
    "@babel/helpers - typeof";
    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
        _typeof = function(obj) {
            return typeof obj;
        };
    } else {
        _typeof = function(obj) {
            return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
        };
    }
    return _typeof(obj);
}
function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
    }
}
function _defineProperties(target, props) {
    for(var i = 0; i < props.length; i++){
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
    }
}
function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
}
function _defineProperty(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly) symbols = symbols.filter(function(sym) {
            return Object.getOwnPropertyDescriptor(object, sym).enumerable;
        });
        keys.push.apply(keys, symbols);
    }
    return keys;
}
function _objectSpread2(target) {
    for(var i = 1; i < arguments.length; i++){
        var source = arguments[i] != null ? arguments[i] : {};
        if (i % 2) {
            ownKeys(Object(source), true).forEach(function(key) {
                _defineProperty(target, key, source[key]);
            });
        } else if (Object.getOwnPropertyDescriptors) {
            Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
        } else {
            ownKeys(Object(source)).forEach(function(key) {
                Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
            });
        }
    }
    return target;
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(o);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _createForOfIteratorHelper(o, allowArrayLike) {
    var it;
    if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
        if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
            if (it) o = it;
            var i = 0;
            var F = function() {};
            return {
                s: F,
                n: function() {
                    if (i >= o.length) return {
                        done: true
                    };
                    return {
                        done: false,
                        value: o[i++]
                    };
                },
                e: function(e) {
                    throw e;
                },
                f: F
            };
        }
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var normalCompletion = true, didErr = false, err;
    return {
        s: function() {
            it = o[Symbol.iterator]();
        },
        n: function() {
            var step = it.next();
            normalCompletion = step.done;
            return step;
        },
        e: function(e) {
            didErr = true;
            err = e;
        },
        f: function() {
            try {
                if (!normalCompletion && it.return != null) it.return();
            } finally{
                if (didErr) throw err;
            }
        }
    };
}
var version = "3.0.2";
var errorMessages = {
    MANDATORY_INITIALIZATION_MISSING: {
        message: "Missing urlEndpoint during SDK initialization",
        help: ""
    },
    INVALID_TRANSFORMATION_POSITION: {
        message: "Invalid transformationPosition parameter",
        help: ""
    },
    PRIVATE_KEY_CLIENT_SIDE: {
        message: "privateKey should not be passed on the client side",
        help: ""
    },
    MISSING_UPLOAD_DATA: {
        message: "Missing data for upload",
        help: ""
    },
    MISSING_UPLOAD_FILE_PARAMETER: {
        message: "Missing file parameter for upload",
        help: ""
    },
    MISSING_UPLOAD_FILENAME_PARAMETER: {
        message: "Missing fileName parameter for upload",
        help: ""
    },
    MISSING_AUTHENTICATION_ENDPOINT: {
        message: "Missing authentication endpoint for upload",
        help: ""
    },
    MISSING_PUBLIC_KEY: {
        message: "Missing public key for upload",
        help: ""
    },
    AUTH_ENDPOINT_TIMEOUT: {
        message: "The authenticationEndpoint you provided timed out in 60 seconds",
        help: ""
    },
    AUTH_ENDPOINT_NETWORK_ERROR: {
        message: "Request to authenticationEndpoint failed due to network error",
        help: ""
    },
    AUTH_INVALID_RESPONSE: {
        message: "Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.",
        help: ""
    },
    UPLOAD_ENDPOINT_NETWORK_ERROR: {
        message: "Request to ImageKit upload endpoint failed due to network error",
        help: ""
    },
    INVALID_UPLOAD_OPTIONS: {
        message: "Invalid uploadOptions parameter",
        help: ""
    },
    MISSING_SIGNATURE: {
        message: "Missing signature for upload. The SDK expects token, signature and expire for authentication.",
        help: ""
    },
    MISSING_TOKEN: {
        message: "Missing token for upload. The SDK expects token, signature and expire for authentication.",
        help: ""
    },
    MISSING_EXPIRE: {
        message: "Missing expire for upload. The SDK expects token, signature and expire for authentication.",
        help: ""
    },
    INVALID_TRANSFORMATION: {
        message: "Invalid transformation parameter. Please include at least pre, post, or both.",
        help: ""
    },
    INVALID_PRE_TRANSFORMATION: {
        message: "Invalid pre transformation parameter.",
        help: ""
    },
    INVALID_POST_TRANSFORMATION: {
        message: "Invalid post transformation parameter.",
        help: ""
    }
};
function respond(isError, response, callback) {
    if (typeof callback == "function") {
        if (isError) {
            callback(response, null);
        } else {
            callback(null, response);
        }
    }
}
function getResponseHeaderMap(xhr) {
    var headers = {};
    var responseHeaders = xhr.getAllResponseHeaders();
    if (Object.keys(responseHeaders).length) {
        responseHeaders.trim().split(/[\r\n]+/).map(function(value) {
            return value.split(/: /);
        }).forEach(function(keyValue) {
            headers[keyValue[0].trim()] = keyValue[1].trim();
        });
    }
    return headers;
}
var addResponseHeadersAndBody = function addResponseHeadersAndBody(body, xhr) {
    var response = _objectSpread2({}, body);
    var responseMetadata = {
        statusCode: xhr.status,
        headers: getResponseHeaderMap(xhr)
    };
    Object.defineProperty(response, "$ResponseMetadata", {
        value: responseMetadata,
        enumerable: false,
        writable: false
    });
    return response;
};
var request = function request(uploadFileXHR, formData, callback) {
    uploadFile(uploadFileXHR, formData).then(function(result) {
        return respond(false, result, callback);
    }, function(ex) {
        return respond(true, ex, callback);
    });
};
var uploadFile = function uploadFile(uploadFileXHR, formData) {
    return new Promise(function(resolve, reject) {
        uploadFileXHR.open('POST', 'https://upload.imagekit.io/api/v1/files/upload');
        uploadFileXHR.onerror = function(e) {
            return reject(errorMessages.UPLOAD_ENDPOINT_NETWORK_ERROR);
        };
        uploadFileXHR.onload = function() {
            if (uploadFileXHR.status === 200) {
                try {
                    var body = JSON.parse(uploadFileXHR.responseText);
                    var uploadResponse = addResponseHeadersAndBody(body, uploadFileXHR);
                    return resolve(uploadResponse);
                } catch (ex) {
                    return reject(ex);
                }
            } else {
                try {
                    var body = JSON.parse(uploadFileXHR.responseText);
                    var uploadError = addResponseHeadersAndBody(body, uploadFileXHR);
                    return reject(uploadError);
                } catch (ex) {
                    return reject(ex);
                }
            }
        };
        uploadFileXHR.send(formData);
    });
};
var upload = function upload(xhr, uploadOptions, options, callback) {
    if (!uploadOptions.file) {
        respond(true, errorMessages.MISSING_UPLOAD_FILE_PARAMETER, callback);
        return;
    }
    if (!uploadOptions.fileName) {
        respond(true, errorMessages.MISSING_UPLOAD_FILENAME_PARAMETER, callback);
        return;
    }
    if (!options.publicKey) {
        respond(true, errorMessages.MISSING_PUBLIC_KEY, callback);
        return;
    }
    if (!uploadOptions.token) {
        respond(true, errorMessages.MISSING_TOKEN, callback);
        return;
    }
    if (!uploadOptions.signature) {
        respond(true, errorMessages.MISSING_SIGNATURE, callback);
        return;
    }
    if (!uploadOptions.expire) {
        respond(true, errorMessages.MISSING_EXPIRE, callback);
        return;
    }
    if (uploadOptions.transformation) {
        if (!(Object.keys(uploadOptions.transformation).includes("pre") || Object.keys(uploadOptions.transformation).includes("post"))) {
            respond(true, errorMessages.INVALID_TRANSFORMATION, callback);
            return;
        }
        if (Object.keys(uploadOptions.transformation).includes("pre") && !uploadOptions.transformation.pre) {
            respond(true, errorMessages.INVALID_PRE_TRANSFORMATION, callback);
            return;
        }
        if (Object.keys(uploadOptions.transformation).includes("post")) {
            if (Array.isArray(uploadOptions.transformation.post)) {
                var _iterator = _createForOfIteratorHelper(uploadOptions.transformation.post), _step;
                try {
                    for(_iterator.s(); !(_step = _iterator.n()).done;){
                        var transformation = _step.value;
                        if (transformation.type === "abs" && !(transformation.protocol || transformation.value)) {
                            respond(true, errorMessages.INVALID_POST_TRANSFORMATION, callback);
                            return;
                        } else if (transformation.type === "transformation" && !transformation.value) {
                            respond(true, errorMessages.INVALID_POST_TRANSFORMATION, callback);
                            return;
                        }
                    }
                } catch (err) {
                    _iterator.e(err);
                } finally{
                    _iterator.f();
                }
            } else {
                respond(true, errorMessages.INVALID_POST_TRANSFORMATION, callback);
                return;
            }
        }
    }
    var formData = new FormData();
    var key;
    for(key in uploadOptions){
        if (key) {
            if (key === "file" && typeof uploadOptions.file != "string") {
                formData.append('file', uploadOptions.file, String(uploadOptions.fileName));
            } else if (key === "tags" && Array.isArray(uploadOptions.tags)) {
                formData.append('tags', uploadOptions.tags.join(","));
            } else if (key === 'signature') {
                formData.append("signature", uploadOptions.signature);
            } else if (key === 'expire') {
                formData.append("expire", String(uploadOptions.expire));
            } else if (key === 'token') {
                formData.append("token", uploadOptions.token);
            } else if (key === "responseFields" && Array.isArray(uploadOptions.responseFields)) {
                formData.append('responseFields', uploadOptions.responseFields.join(","));
            } else if (key === "extensions" && Array.isArray(uploadOptions.extensions)) {
                formData.append('extensions', JSON.stringify(uploadOptions.extensions));
            } else if (key === "customMetadata" && _typeof(uploadOptions.customMetadata) === "object" && !Array.isArray(uploadOptions.customMetadata) && uploadOptions.customMetadata !== null) {
                formData.append('customMetadata', JSON.stringify(uploadOptions.customMetadata));
            } else if (key === "transformation" && _typeof(uploadOptions.transformation) === "object" && uploadOptions.transformation !== null) {
                formData.append(key, JSON.stringify(uploadOptions.transformation));
            } else if (key === 'checks' && uploadOptions.checks) {
                formData.append("checks", uploadOptions.checks);
            } else if (uploadOptions[key] !== undefined) {
                formData.append(key, String(uploadOptions[key]));
            }
        }
    }
    formData.append("publicKey", options.publicKey);
    request(xhr, formData, callback);
};
var supportedTransforms = {
    width: "w",
    height: "h",
    aspectRatio: "ar",
    quality: "q",
    crop: "c",
    cropMode: "cm",
    focus: "fo",
    x: "x",
    y: "y",
    format: "f",
    radius: "r",
    background: "bg",
    border: "b",
    rotation: "rt",
    rotate: "rt",
    blur: "bl",
    named: "n",
    progressive: "pr",
    lossless: "lo",
    trim: "t",
    metadata: "md",
    colorProfile: "cp",
    defaultImage: "di",
    dpr: "dpr",
    effectSharpen: "e-sharpen",
    effectUSM: "e-usm",
    effectContrast: "e-contrast",
    effectGray: "e-grayscale",
    original: "orig",
    effectShadow: "e-shadow",
    effectGradient: "e-gradient",
    raw: "raw"
};
var DEFAULT_TRANSFORMATION_POSITION = "path";
var QUERY_TRANSFORMATION_POSITION = "query";
var VALID_TRANSFORMATION_POSITIONS = [
    DEFAULT_TRANSFORMATION_POSITION,
    QUERY_TRANSFORMATION_POSITION
];
var CHAIN_TRANSFORM_DELIMITER = ":";
var TRANSFORM_DELIMITER = ",";
var TRANSFORM_KEY_VALUE_DELIMITER = "-";
var transformationUtils = {
    getDefault: function getDefault() {
        return DEFAULT_TRANSFORMATION_POSITION;
    },
    addAsQueryParameter: function addAsQueryParameter(options) {
        return options.transformationPosition === QUERY_TRANSFORMATION_POSITION;
    },
    validParameters: function validParameters(options) {
        if (typeof options.transformationPosition == "undefined") return false;
        return VALID_TRANSFORMATION_POSITIONS.indexOf(options.transformationPosition) != -1;
    },
    getTransformKey: function getTransformKey(transform) {
        if (!transform) {
            return "";
        }
        return supportedTransforms[transform] || supportedTransforms[transform.toLowerCase()] || "";
    },
    getChainTransformDelimiter: function getChainTransformDelimiter() {
        return CHAIN_TRANSFORM_DELIMITER;
    },
    getTransformDelimiter: function getTransformDelimiter() {
        return TRANSFORM_DELIMITER;
    },
    getTransformKeyValueDelimiter: function getTransformKeyValueDelimiter() {
        return TRANSFORM_KEY_VALUE_DELIMITER;
    }
};
var TRANSFORMATION_PARAMETER = "tr";
function removeTrailingSlash(str) {
    if (typeof str == "string" && str[str.length - 1] == "/") {
        str = str.substring(0, str.length - 1);
    }
    return str;
}
function removeLeadingSlash(str) {
    if (typeof str == "string" && str[0] == "/") {
        str = str.slice(1);
    }
    return str;
}
function pathJoin(parts, sep) {
    var separator = sep || "/";
    var replace = new RegExp(separator + "{1,}", "g");
    return parts.join(separator).replace(replace, separator);
}
var buildURL = function buildURL(opts) {
    if (!opts.path && !opts.src) {
        return "";
    }
    var urlObj, isSrcParameterUsedForURL, urlEndpointPattern;
    try {
        if (opts.path) {
            urlEndpointPattern = new URL(opts.urlEndpoint).pathname;
            urlObj = new URL(pathJoin([
                opts.urlEndpoint.replace(urlEndpointPattern, ""),
                opts.path
            ]));
        } else {
            urlObj = new URL(opts.src);
            isSrcParameterUsedForURL = true;
        }
    } catch (e) {
        console.error(e);
        return "";
    }
    for(var i in opts.queryParameters){
        urlObj.searchParams.append(i, String(opts.queryParameters[i]));
    }
    var transformationString = constructTransformationString(opts.transformation);
    if (transformationString && transformationString.length) {
        if (transformationUtils.addAsQueryParameter(opts) || isSrcParameterUsedForURL) {
            urlObj.searchParams.append(TRANSFORMATION_PARAMETER, transformationString);
        } else {
            urlObj.pathname = pathJoin([
                TRANSFORMATION_PARAMETER + transformationUtils.getChainTransformDelimiter() + transformationString,
                urlObj.pathname
            ]);
        }
    }
    if (urlEndpointPattern) {
        urlObj.pathname = pathJoin([
            urlEndpointPattern,
            urlObj.pathname
        ]);
    } else {
        urlObj.pathname = pathJoin([
            urlObj.pathname
        ]);
    }
    return urlObj.href;
};
function constructTransformationString(transformation) {
    if (!Array.isArray(transformation)) {
        return "";
    }
    var parsedTransforms = [];
    for(var i = 0, l = transformation.length; i < l; i++){
        var parsedTransformStep = [];
        for(var key in transformation[i]){
            if (transformation[i][key] === undefined || transformation[i][key] === null) continue;
            var transformKey = transformationUtils.getTransformKey(key);
            if (!transformKey) {
                transformKey = key;
            }
            if (transformation[i][key] === "-") {
                parsedTransformStep.push(transformKey);
            } else if (key === "raw") {
                parsedTransformStep.push(transformation[i][key]);
            } else {
                var value = transformation[i][key];
                if (transformKey === "di") {
                    value = removeTrailingSlash(removeLeadingSlash(value || ""));
                    value = value.replace(/\//g, "@@");
                }
                parsedTransformStep.push([
                    transformKey,
                    value
                ].join(transformationUtils.getTransformKeyValueDelimiter()));
            }
        }
        parsedTransforms.push(parsedTransformStep.join(transformationUtils.getTransformDelimiter()));
    }
    return parsedTransforms.join(transformationUtils.getChainTransformDelimiter());
}
var url = function url(urlOpts, defaultOptions) {
    return buildURL(_objectSpread2(_objectSpread2({}, defaultOptions), urlOpts));
};
function mandatoryParametersAvailable(options) {
    return options.urlEndpoint;
}
var promisify = function promisify(thisContext, fn) {
    return function() {
        for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++){
            args[_key] = arguments[_key];
        }
        if (args.length === fn.length && typeof args[args.length - 1] !== "undefined") {
            if (typeof args[args.length - 1] !== "function") {
                throw new Error("Callback must be a function.");
            }
            fn.call.apply(fn, [
                thisContext
            ].concat(args));
        } else {
            return new Promise(function(resolve, reject) {
                var callback = function callback(err) {
                    if (err) {
                        return reject(err);
                    } else {
                        for(var _len2 = arguments.length, results = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++){
                            results[_key2 - 1] = arguments[_key2];
                        }
                        resolve(results.length > 1 ? results : results[0]);
                    }
                };
                args.pop();
                args.push(callback);
                fn.call.apply(fn, [
                    thisContext
                ].concat(args));
            });
        }
    };
};
var ImageKit = function() {
    function ImageKit(opts) {
        _classCallCheck(this, ImageKit);
        _defineProperty(this, "options", {
            sdkVersion: "javascript-".concat(version),
            publicKey: "",
            urlEndpoint: "",
            transformationPosition: transformationUtils.getDefault()
        });
        this.options = _objectSpread2(_objectSpread2({}, this.options), opts || {});
        if (!mandatoryParametersAvailable(this.options)) {
            throw errorMessages.MANDATORY_INITIALIZATION_MISSING;
        }
        if (!transformationUtils.validParameters(this.options)) {
            throw errorMessages.INVALID_TRANSFORMATION_POSITION;
        }
    }
    _createClass(ImageKit, [
        {
            key: "url",
            value: function url$1(urlOptions) {
                return url(urlOptions, this.options);
            }
        },
        {
            key: "upload",
            value: function upload$1(uploadOptions, callbackOrOptions, options) {
                var callback;
                if (typeof callbackOrOptions === 'function') {
                    callback = callbackOrOptions;
                } else {
                    options = callbackOrOptions || {};
                }
                if (!uploadOptions || _typeof(uploadOptions) !== "object") {
                    return respond(true, errorMessages.INVALID_UPLOAD_OPTIONS, callback);
                }
                var mergedOptions = _objectSpread2(_objectSpread2({}, this.options), options);
                var _ref = uploadOptions || {}, userProvidedXHR = _ref.xhr;
                delete uploadOptions.xhr;
                var xhr = userProvidedXHR || new XMLHttpRequest();
                return promisify(this, upload)(xhr, uploadOptions, mergedOptions, callback);
            }
        }
    ]);
    return ImageKit;
}();
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function __rest(s, e) {
    var t = {};
    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function") for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++){
        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
    }
    return t;
}
function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) {
        return value instanceof P ? value : new P(function(resolve) {
            resolve(value);
        });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
        function fulfilled(value) {
            try {
                step(generator.next(value));
            } catch (e) {
                reject(e);
            }
        }
        function rejected(value) {
            try {
                step(generator["throw"](value));
            } catch (e) {
                reject(e);
            }
        }
        function step(result) {
            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}
typeof SuppressedError === "function" ? SuppressedError : function(error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};
// Create the context
const ImageKitContext = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])({});
/**
 * Provides a container for ImageKit components. Any option set in ImageKitProvider will be passed to the children.
 *
 * @example
 *<ImageKitProvider  publicKey="<public key>" urlEndpoint="url link">
 *    <!-- other tags -->
 *    <Image src={link}/>
 *</ImageKitProvider>
 */ const ImageKitProvider = (props)=>{
    const extractContextOptions = (mergedOptions)=>{
        const propKeys = [
            "publicKey",
            "urlEndpoint",
            "authenticator",
            "transformationPosition",
            "ikClient"
        ];
        for(const key in mergedOptions){
            if (!propKeys.includes(key)) {
                delete mergedOptions[key];
            }
        }
        return mergedOptions;
    };
    const mergedOptions = Object.assign({}, props);
    const contextOptionsExtracted = extractContextOptions(mergedOptions);
    if (contextOptionsExtracted.urlEndpoint && contextOptionsExtracted.urlEndpoint.trim() !== "") {
        contextOptionsExtracted.ikClient = new ImageKit({
            urlEndpoint: contextOptionsExtracted.urlEndpoint,
            // @ts-ignore
            sdkVersion: ""
        });
    }
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].createElement(ImageKitContext.Provider, {
        value: contextOptionsExtracted
    }, props.children);
};
const useImageKitComponent = (props)=>{
    const contextOptions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(ImageKitContext);
    const getIKClient = ()=>{
        if (contextOptions && contextOptions.ikClient) {
            return contextOptions.ikClient;
        }
        let { urlEndpoint } = props;
        urlEndpoint = urlEndpoint || contextOptions && contextOptions.urlEndpoint;
        if (!urlEndpoint || urlEndpoint.trim() === "") {
            throw new Error("Missing urlEndpoint during initialization");
        }
        const ikClient = new ImageKit({
            urlEndpoint: urlEndpoint,
            // @ts-ignore
            sdkVersion: ""
        });
        return ikClient;
    };
    return {
        getIKClient
    };
};
const fetchEffectiveConnection = ()=>{
    try {
        return navigator.connection.effectiveType;
    } catch (ex) {
        return "4g";
    }
};
const getSrc = ({ urlEndpoint, lqip, src, path, transformation, transformationPosition, queryParameters }, ikClient, contextOptions)=>{
    let options;
    if (src) {
        options = {
            urlEndpoint: urlEndpoint || contextOptions.urlEndpoint,
            src,
            transformation: transformation || undefined,
            transformationPosition: transformationPosition || contextOptions.transformationPosition || undefined,
            queryParameters: queryParameters || {}
        };
    } else if (path) {
        options = {
            urlEndpoint: urlEndpoint || contextOptions.urlEndpoint,
            path,
            transformation: transformation || undefined,
            transformationPosition: transformationPosition || contextOptions.transformationPosition || undefined,
            queryParameters: queryParameters || {}
        };
    } else return {
        originalSrc: ""
    };
    const result = {
        originalSrc: ikClient.url(options)
    };
    if (lqip && lqip.active) {
        var quality = Math.round(lqip.quality || lqip.threshold || 20);
        var blur = Math.round(lqip.blur || 6);
        var newTransformation = options.transformation ? [
            ...options.transformation
        ] : [];
        if (lqip.raw && typeof lqip.raw === "string" && lqip.raw.trim() !== "") {
            newTransformation.push({
                raw: lqip.raw.trim()
            });
        } else {
            newTransformation.push({
                quality: String(quality),
                blur: String(blur)
            });
        }
        result.lqipSrc = ikClient.url(Object.assign(Object.assign({}, options), {
            transformation: newTransformation
        }));
    }
    return result;
};
const getIKElementsUrl = ({ lqip = null, loading }, { intersected, originalSrcLoaded, originalSrc, lqipSrc })=>{
    /*
      No lazy loading no lqip
        src=originalImage
      No lazy loading lqip
        src=lqip
        src=originalImage (when loaded)
      lazy loading and no lqip
        src=''
        onIntersect:
        src=originalImage
      lazy loading and lqip
        src=lqip
        onIntersect:
        src=originalImage (when loaded)
    */ const isLqipActive = (lqip)=>lqip && lqip.active;
    if (loading !== "lazy" && !isLqipActive(lqip)) {
        return originalSrc;
    } else if (loading !== "lazy" && isLqipActive(lqip)) {
        if (originalSrcLoaded) {
            return originalSrc;
        } else {
            return lqipSrc;
        }
    } else if (loading === "lazy" && !isLqipActive(lqip)) {
        if (intersected) {
            return originalSrc;
        } else {
            return "";
        }
    } else {
        if (intersected && originalSrcLoaded) {
            return originalSrc;
        } else {
            return lqipSrc;
        }
    }
};
function hasProperty(array, property) {
    return array.some((obj)=>obj.hasOwnProperty(property));
}
const updateTransformation = ({ width, height, transformation, src, path, quality })=>{
    //if height and width are there in props and absent in transformation then add it to the transformatiion
    if ((src || path) && (width || quality || height)) {
        let transformationObject = {};
        if (!((transformation === null || transformation === void 0 ? void 0 : transformation.length) && (hasProperty(transformation, "height") || hasProperty(transformation, "width")))) {
            if (height) transformationObject["height"] = String(height);
            if (width) transformationObject["width"] = String(width);
        }
        if (!((transformation === null || transformation === void 0 ? void 0 : transformation.length) && hasProperty(transformation, "quality")) && quality) transformationObject["quality"] = String(quality);
        if (Object.keys(transformationObject).length) {
            if (transformation === null || transformation === void 0 ? void 0 : transformation.length) transformation = [
                ...transformation,
                transformationObject
            ];
            else transformation = [
                transformationObject
            ];
        }
    }
    return transformation;
};
const IKImage = (props)=>{
    const [currentUrl, setCurrentUrl] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(undefined);
    const [imageProps, setImageProps] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])({});
    const [originalSrc, setOriginalSrc] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])("");
    const [lqipSrc, setLqipSrc] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])("");
    const [originalSrcLoaded, setOriginalSrcLoaded] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const [observe, setObserve] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(undefined);
    const [initialized, setInitialized] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const [intersected, setIntersected] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const imageRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const { getIKClient } = useImageKitComponent(Object.assign({}, props));
    const contextOptions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(ImageKitContext);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const { originalSrc: newOriginalSrc, lqipSrc: newLqipSrc } = getSrc(Object.assign(Object.assign({}, props), {
            transformation: updateTransformation(props)
        }), getIKClient(), contextOptions);
        setOriginalSrc(newOriginalSrc);
        setLqipSrc(newLqipSrc ? newLqipSrc : "");
        setInitialized(true);
    }, [
        contextOptions,
        props
    ]);
    const updateImageUrl = ()=>__awaiter(void 0, void 0, void 0, function*() {
            const url = yield getIKElementsUrl(props, {
                originalSrc,
                lqipSrc,
                intersected,
                contextOptions,
                initialzeState: initialized,
                originalSrcLoaded,
                observe
            }); // Include intersected state
            if (url) {
                setCurrentUrl(url);
            }
        });
    const triggerOriginalImageLoad = ()=>{
        var img = new Image();
        img.onload = ()=>{
            setOriginalSrcLoaded(true);
        };
        img.src = originalSrc;
    };
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (originalSrcLoaded) updateImageUrl();
    }, [
        originalSrcLoaded
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const image = imageRef.current;
        const { loading } = props;
        if (initialized) {
            if (window && "IntersectionObserver" in window && loading === "lazy" && lqip) {
                const connectionType = fetchEffectiveConnection();
                let rootMargin = "1250px";
                if (connectionType !== "4g") rootMargin = "2500px";
                const imageObserver = new IntersectionObserver((entries)=>{
                    const el = entries[0];
                    if (el && el.isIntersecting && !intersected) {
                        setIntersected(true);
                        setObserve((prevObserver)=>{
                            if (prevObserver) {
                                prevObserver.disconnect();
                            }
                            return undefined;
                        });
                        triggerOriginalImageLoad();
                        updateImageUrl();
                    }
                }, {
                    rootMargin: `${rootMargin} 0px ${rootMargin} 0px`
                });
                if (image) {
                    imageObserver.observe(image);
                    setObserve(imageObserver);
                }
            } else {
                setIntersected(true);
                triggerOriginalImageLoad();
                updateImageUrl();
            }
        }
        return ()=>{
            if (observe) {
                observe.disconnect();
            }
        };
    }, [
        props,
        originalSrc,
        lqipSrc
    ]);
    const { urlEndpoint, authenticator, publicKey, loading, lqip, path, src, transformation, transformationPosition, queryParameters, alt } = props, restProps = __rest(props, [
        "urlEndpoint",
        "authenticator",
        "publicKey",
        "loading",
        "lqip",
        "path",
        "src",
        "transformation",
        "transformationPosition",
        "queryParameters",
        "alt"
    ]);
    const restPropsWithoutImageProps = __rest(restProps, [
        "fill",
        "quality",
        "priority",
        "placeholder",
        "blurDataURL",
        "unoptimized",
        "overrideSrc",
        "onLoadingComplete",
        "layout",
        "objectFit",
        "objectPosition",
        "lazyBoundary",
        "lazyRoot"
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // if height and width are there in transformation skip props height and width and add fill =true
        const updatedRestProps = restProps;
        if ((transformation === null || transformation === void 0 ? void 0 : transformation.length) && transformation.some((obj)=>obj.hasOwnProperty("height") || obj.hasOwnProperty("width"))) {
            if (updatedRestProps.height) delete updatedRestProps["height"];
            if (updatedRestProps.width) delete updatedRestProps["width"];
            updatedRestProps["fill"] = true;
        }
        setImageProps(updatedRestProps);
    }, []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        if (lqip === null || lqip === void 0 ? void 0 : lqip.active) console.warn("In [imagekitio-next], loading is set to eager when LQIP is used.");
    }, [
        lqip
    ]);
    return currentUrl != undefined && Object.keys(imageProps).length ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].createElement(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"], Object.assign({
        loader: ({ src })=>src,
        alt: alt,
        src: currentUrl ? currentUrl : "",
        ref: imageRef,
        unoptimized: true,
        loading: (lqip === null || lqip === void 0 ? void 0 : lqip.active) ? "eager" : loading
    }, imageProps)) : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].createElement("img", Object.assign({
        src: currentUrl ? currentUrl : undefined,
        ref: imageRef
    }, restPropsWithoutImageProps));
};
const IKUpload = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["forwardRef"])((props, ref)=>{
    const [state, setState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])({});
    const contextOptions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(ImageKitContext);
    const { getIKClient } = useImageKitComponent(Object.assign({}, props));
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const abort = ()=>{
            if (state.xhr) {
                state.xhr.abort();
            }
        };
        if (ref && typeof ref === "object" && ref.hasOwnProperty("current")) {
            const refObject = ref;
            refObject.current.abort = abort;
        }
    }, [
        state.xhr,
        ref
    ]);
    const { publicKey, urlEndpoint, authenticator, fileName, useUniqueFileName, tags, folder, isPrivateFile, customCoordinates, responseFields, onError, onSuccess, onUploadStart, onUploadProgress, validateFile, webhookUrl, overwriteFile, overwriteAITags, overwriteTags, overwriteCustomMetadata, extensions, customMetadata, transformation, overrideParameters, checks } = props, restProps = __rest(props, [
        "publicKey",
        "urlEndpoint",
        "authenticator",
        "fileName",
        "useUniqueFileName",
        "tags",
        "folder",
        "isPrivateFile",
        "customCoordinates",
        "responseFields",
        "onError",
        "onSuccess",
        "onUploadStart",
        "onUploadProgress",
        "validateFile",
        "webhookUrl",
        "overwriteFile",
        "overwriteAITags",
        "overwriteTags",
        "overwriteCustomMetadata",
        "extensions",
        "customMetadata",
        "transformation",
        "overrideParameters",
        "checks"
    ]);
    const uploadFile = (e)=>{
        var _a;
        const publicKey = props.publicKey || contextOptions.publicKey;
        const authenticator = props.authenticator || contextOptions.authenticator;
        const urlEndpoint = props.urlEndpoint || contextOptions.urlEndpoint;
        if (!publicKey || publicKey.trim() === "") {
            if (onError && typeof onError === "function") {
                onError({
                    message: "Missing publicKey"
                });
            }
            return;
        }
        if (!authenticator) {
            if (onError && typeof onError === "function") {
                onError({
                    message: "The authenticator function is not provided."
                });
            }
            return;
        }
        if (typeof authenticator !== "function") {
            if (onError && typeof onError === "function") {
                onError({
                    message: "The provided authenticator is not a function."
                });
            }
            return;
        }
        if (!urlEndpoint || urlEndpoint.trim() === "") {
            if (onError && typeof onError === "function") {
                onError({
                    message: "Missing urlEndpoint"
                });
            }
            return;
        }
        var ikClient = getIKClient();
        const file = (_a = e.target.files) === null || _a === void 0 ? void 0 : _a[0];
        if (!file) {
            return;
        }
        if (props.validateFile && !props.validateFile(file)) {
            return;
        }
        if (props.onUploadStart && typeof props.onUploadStart === "function") {
            props.onUploadStart(e);
        }
        let overrideValues = {};
        if (props.overrideParameters && typeof props.overrideParameters === "function") {
            overrideValues = props.overrideParameters(file) || {};
        }
        const xhr = new XMLHttpRequest();
        const progressCb = (e)=>{
            if (props.onUploadProgress && typeof props.onUploadProgress === "function") {
                props.onUploadProgress(e);
            }
        };
        xhr.upload.addEventListener("progress", progressCb);
        var params = {
            file: file,
            fileName: overrideValues.fileName || fileName || file.name,
            useUniqueFileName: overrideValues.useUniqueFileName || useUniqueFileName,
            tags: overrideValues.tags || tags,
            folder: overrideValues.folder || folder,
            isPrivateFile: overrideValues.isPrivateFile || isPrivateFile,
            customCoordinates: overrideValues.customCoordinates || customCoordinates,
            responseFields,
            extensions: overrideValues.extensions || extensions,
            webhookUrl: overrideValues.webhookUrl || webhookUrl,
            overwriteFile: overrideValues.overwriteFile || overwriteFile,
            overwriteAITags: overrideValues.overwriteAITags || overwriteAITags,
            overwriteTags: overrideValues.overwriteTags || overwriteTags,
            overwriteCustomMetadata: overrideValues.overwriteCustomMetadata || overwriteCustomMetadata,
            customMetadata: overrideValues.customMetadata || customMetadata,
            signature: "",
            expire: 0,
            token: "",
            xhr,
            transformation: overrideValues.transformation || transformation,
            checks: overrideValues.checks || checks
        };
        const authPromise = authenticator();
        if (!(authPromise instanceof Promise)) {
            if (onError && typeof onError === "function") {
                onError({
                    message: "The authenticator function is expected to return a Promise instance."
                });
            }
            return;
        }
        authPromise.then(({ signature, token, expire })=>{
            params["signature"] = signature;
            params["expire"] = expire;
            params["token"] = token;
            ikClient.upload(params, (err, result)=>{
                if (err) {
                    if (onError && typeof onError === "function") {
                        onError(err);
                    }
                } else {
                    if (onSuccess && typeof onSuccess === "function") {
                        onSuccess(result);
                    }
                }
                xhr.upload.removeEventListener("progress", progressCb);
            }, {
                publicKey
            });
            setState({
                xhr
            });
        }).catch((data)=>{
            var error;
            if (data instanceof Array) {
                error = data[0];
            } else {
                error = data;
            }
            if (onError && typeof onError === "function") {
                onError({
                    message: String(error)
                });
            }
            return;
        });
    };
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].createElement("input", Object.assign({}, restProps, {
        ref: ref,
        type: "file",
        onChange: (e)=>{
            if (props.onChange && typeof props.onChange === "function") {
                props.onChange(e);
            }
            uploadFile(e);
        }
    }));
});
const IKVideo = (props)=>{
    const videoRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const [state, setState] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])({
        currentUrl: "",
        contextOptions: {}
    });
    const { getIKClient } = useImageKitComponent(Object.assign({}, props));
    const contextItems = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(ImageKitContext);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const { originalSrc } = getSrc(props, getIKClient(), contextItems);
        setState((prevState)=>Object.assign(Object.assign({}, prevState), {
                currentUrl: originalSrc,
                contextOptions: contextItems
            }));
    }, [
        contextItems,
        props
    ]);
    const { currentUrl } = state;
    const restProps = __rest(props, [
        "urlEndpoint",
        "publicKey",
        "authenticator",
        "path",
        "src",
        "transformation",
        "transformationPosition",
        "queryParameters"
    ]);
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].createElement("video", Object.assign({}, restProps, {
        ref: videoRef,
        key: currentUrl
    }), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"].createElement("source", {
        src: currentUrl || undefined,
        type: "video/mp4"
    }));
};
;
 //# sourceMappingURL=imagekit-next.esm.js.map
}}),

};

//# sourceMappingURL=_8355f1._.js.map