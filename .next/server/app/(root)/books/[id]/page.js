(()=>{var e={};e.id=817,e.ids=[817],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},11067:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var n=r(70260),s=r(28203),o=r(25155),a=r.n(o),i=r(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(root)",{children:["books",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,78203,23)),"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\app\\(root)\\books\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99616)),"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\USER\\Desktop\\WORK\\new_creation\\app\\(root)\\books\\[id]\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(root)/books/[id]/page",pathname:"/books/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16840:(e,t,r)=>{Promise.resolve().then(r.bind(r,11563)),Promise.resolve().then(r.bind(r,22994)),Promise.resolve().then(r.t.bind(r,59607,23)),Promise.resolve().then(r.t.bind(r,71066,23))},3688:(e,t,r)=>{Promise.resolve().then(r.bind(r,9668)),Promise.resolve().then(r.bind(r,81846)),Promise.resolve().then(r.t.bind(r,28531,23)),Promise.resolve().then(r.t.bind(r,41902,23))},96487:()=>{},78335:()=>{},9668:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(45512),s=r(45103),o=r(98805);let a=()=>{let e=async()=>{await (0,o.CI)({callbackUrl:"/sign-in"})};return(0,n.jsxs)("button",{onClick:e,className:"flex items-center gap-2 text-light-100 hover:text-white transition-colors",children:[(0,n.jsx)(s.default,{src:"/icons/logout.svg",alt:"logout",width:20,height:20}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})}},45103:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var n=r(73864),s=r.n(n)},73864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let n=r(25488),s=r(42034),o=r(41902),a=n._(r(21628));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=o.Image},10681:(e,t,r)=>{"use strict";var n=r(58009),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,a=n.useEffect,i=n.useLayoutEffect,l=n.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),s=n[0].inst,c=n[1];return i(function(){s.value=r,s.getSnapshot=t,d(s)&&c({inst:s})},[e,r,t]),a(function(){return d(s)&&c({inst:s}),e(function(){d(s)&&c({inst:s})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},94924:(e,t,r)=>{"use strict";e.exports=r(10681)},78203:()=>{},99616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(62740),s=r(59607),o=r.n(s),a=r(35635),i=r(22994),l=r(11563);let d=({session:e})=>(console.log("Header session:",e),console.log("Session user:",e?.user),(0,n.jsxs)("header",{className:"my-10 flex justify-between gap-5",children:[(0,n.jsx)(o(),{href:"/",children:(0,n.jsx)(a.default,{src:"/icons/logo.svg",alt:"logo",width:40,height:40})}),(0,n.jsx)("ul",{className:"flex flex-row items-center gap-8",children:e?.user?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,n.jsxs)(o(),{href:"/my-profile",className:"flex items-center gap-2 text-primary hover:text-primary/80",children:[(0,n.jsxs)(i.Avatar,{className:"h-8 w-8",children:[(0,n.jsx)(i.AvatarImage,{src:"",alt:e.user.name||"User"}),(0,n.jsx)(i.AvatarFallback,{className:"bg-primary text-dark-100 text-sm font-semibold",children:e.user.name?e.user.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U"})]}),(0,n.jsx)("span",{className:"hidden sm:inline",children:e.user.name})]})}),(0,n.jsx)("li",{children:(0,n.jsx)(l.default,{})})]}):(0,n.jsx)("li",{children:(0,n.jsx)(o(),{href:"/sign-in",className:"text-primary hover:text-primary/80",children:"Sign In"})})})]}));var c=r(67905),u=r(31831),p=r(39187),m=r(17611),f=r(16726),v=r(47579);let h=async({children:e})=>{let t=await (0,c.j2)();return console.log("Root layout session:",t),console.log("Session user:",t?.user),t||(0,u.redirect)("/sign-in"),(0,p.after)(async()=>{t?.user?.id&&(await m.db.select().from(f.VV).where((0,v.eq)(f.VV.id,t?.user?.id)).limit(1))[0].lastActivityDate!==new Date().toISOString().slice(0,10)&&await m.db.update(f.VV).set({lastActivityDate:new Date().toISOString().slice(0,10)}).where((0,v.eq)(f.VV.id,t?.user?.id))}),(0,n.jsx)("main",{className:"root-container",children:(0,n.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,n.jsx)(d,{session:t}),(0,n.jsx)("div",{className:"mt-20 pb-20",children:e})]})})}},11563:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Desktop\\\\WORK\\\\new_creation\\\\components\\\\LogoutButton.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\components\\LogoutButton.tsx","default")},22994:(e,t,r)=>{"use strict";r.d(t,{Avatar:()=>s,AvatarFallback:()=>a,AvatarImage:()=>o});var n=r(46760);let s=(0,n.registerClientReference)(function(){throw Error("Attempted to call Avatar() from the server but Avatar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\components\\ui\\avatar.tsx","Avatar"),o=(0,n.registerClientReference)(function(){throw Error("Attempted to call AvatarImage() from the server but AvatarImage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\components\\ui\\avatar.tsx","AvatarImage"),a=(0,n.registerClientReference)(function(){throw Error("Attempted to call AvatarFallback() from the server but AvatarFallback is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\components\\ui\\avatar.tsx","AvatarFallback")},59607:(e,t,r)=>{let{createProxy:n}=r(73439);e.exports=n("C:\\Users\\USER\\Desktop\\WORK\\new_creation\\node_modules\\next\\dist\\client\\app-dir\\link.js")},54412:(e,t,r)=>{"use strict";r.d(t,{H4:()=>k,_V:()=>S,bL:()=>j});var n=r(58009),s=r(6004),o=r(92828),a=r(49397),i=r(30830),l=r(94924);function d(){return()=>{}}var c=r(45512),u="Avatar",[p,m]=(0,s.A)(u),[f,v]=p(u),h=n.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[o,a]=n.useState("idle");return(0,c.jsx)(f,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:(0,c.jsx)(i.sG.span,{...s,ref:t})})});h.displayName=u;var x="AvatarImage",g=n.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:u=()=>{},...p}=e,m=v(x,r),f=function(e,{referrerPolicy:t,crossOrigin:r}){let s=(0,l.useSyncExternalStore)(d,()=>!0,()=>!1),o=n.useRef(null),i=s?(o.current||(o.current=new window.Image),o.current):null,[c,u]=n.useState(()=>y(i,e));return(0,a.N)(()=>{u(y(i,e))},[i,e]),(0,a.N)(()=>{let e=e=>()=>{u(e)};if(!i)return;let n=e("loaded"),s=e("error");return i.addEventListener("load",n),i.addEventListener("error",s),t&&(i.referrerPolicy=t),"string"==typeof r&&(i.crossOrigin=r),()=>{i.removeEventListener("load",n),i.removeEventListener("error",s)}},[i,r,t]),c}(s,p),h=(0,o.c)(e=>{u(e),m.onImageLoadingStatusChange(e)});return(0,a.N)(()=>{"idle"!==f&&h(f)},[f,h]),"loaded"===f?(0,c.jsx)(i.sG.img,{...p,ref:t,src:s}):null});g.displayName=x;var b="AvatarFallback",w=n.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...o}=e,a=v(b,r),[l,d]=n.useState(void 0===s);return n.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>d(!0),s);return()=>window.clearTimeout(e)}},[s]),l&&"loaded"!==a.imageLoadingStatus?(0,c.jsx)(i.sG.span,{...o,ref:t}):null});function y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}w.displayName=b;var j=h,S=g,k=w}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[994,980,187,988,844,340,635,864],()=>r(11067));module.exports=n})();