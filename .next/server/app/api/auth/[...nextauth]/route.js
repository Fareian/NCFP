(()=>{var e={};e.id=14,e.ids=[14],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},79077:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>l,serverHooks:()=>c,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>p});var s={};r.r(s),r.d(s,{GET:()=>i,POST:()=>u});var a=r(42706),o=r(28203),n=r(45994);let{GET:i,POST:u}=r(67905).Y9,l=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"C:\\Users\\USER\\Desktop\\WORK\\new_creation\\app\\api\\auth\\[...nextauth]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:p,serverHooks:c}=l;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:p})}},96487:()=>{},78335:()=>{},67905:(e,t,r)=>{"use strict";r.d(t,{CI:()=>p,Y9:()=>l,j2:()=>c});var s=r(8542),a=r(58964),o=r(31648),n=r(17611),i=r(16726),u=r(47579);let{handlers:l,signIn:d,signOut:p,auth:c}=(0,s.Ay)({session:{strategy:"jwt"},providers:[(0,o.A)({async authorize(e){if(!e?.email||!e?.password)return null;let t=await n.db.select().from(i.VV).where((0,u.eq)(i.VV.email,e.email.toString())).limit(1);return 0===t.length?null:"APPROVED"!==t[0].status?(console.log("User status is not APPROVED:",t[0].status),null):await (0,a.compare)(e.password.toString(),t[0].password)?{id:t[0].id.toString(),email:t[0].email,name:t[0].fullName}:null}})],pages:{signIn:"/sign-in"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.name=t.name),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.name=t.name),e)}})},17611:(e,t,r)=>{"use strict";r.d(t,{db:()=>n});var s=r(96725),a=r(57980);let o=(0,r(12042).lw)(s.A.env.databaseUrl),n=(0,a.fd)(o)},16726:(e,t,r)=>{"use strict";r.d(t,{VV:()=>v,b7:()=>N});var s=r(19357),a=r(86556),o=r(60011),n=r(99063),i=r(44799),u=r(46964),l=r(32590),d=r(9848);let p=(0,s.rL)("status",["PENDING","APPROVED","REJECTED"]),c=(0,s.rL)("role",["USER","ADMIN"]),m=(0,s.rL)("borrow_status",["BORROWED","RETURNED"]),v=(0,a.cJ)("users",{id:(0,o.uR)("id").notNull().primaryKey().defaultRandom().unique(),fullName:(0,n.yf)("full_name",{length:255}).notNull(),email:(0,i.Qq)("email").notNull().unique(),password:(0,i.Qq)("password").notNull(),status:p("status").default("PENDING"),role:c("role").default("USER"),lastActivityDate:(0,u.p6)("last_activity_date").defaultNow(),createdAt:(0,l.vE)("created_at",{withTimezone:!0}).defaultNow()}),N=(0,a.cJ)("books",{id:(0,o.uR)("id").notNull().primaryKey().defaultRandom().unique(),title:(0,n.yf)("title",{length:255}).notNull(),author:(0,n.yf)("author",{length:255}).notNull(),genre:(0,i.Qq)("genre").notNull(),rating:(0,d.nd)("rating").notNull(),coverUrl:(0,i.Qq)("cover_url").notNull(),coverColor:(0,n.yf)("cover_color",{length:7}).notNull(),description:(0,i.Qq)("description").notNull(),totalCopies:(0,d.nd)("total_copies").notNull().default(1),availableCopies:(0,d.nd)("available_copies").notNull().default(0),videoUrl:(0,i.Qq)("video_url").notNull(),summary:(0,n.yf)("summary").notNull(),createdAt:(0,l.vE)("created_at",{withTimezone:!0}).defaultNow()});(0,a.cJ)("borrow_records",{id:(0,o.uR)("id").notNull().primaryKey().defaultRandom().unique(),userId:(0,o.uR)("user_id").references(()=>v.id).notNull(),bookId:(0,o.uR)("book_id").references(()=>N.id).notNull(),borrowDate:(0,l.vE)("borrow_date",{withTimezone:!0}).defaultNow().notNull(),dueDate:(0,u.p6)("due_date").notNull(),returnDate:(0,u.p6)("return_date"),status:m("status").default("BORROWED").notNull(),createdAt:(0,l.vE)("created_at",{withTimezone:!0}).defaultNow()})},96725:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={env:{apiEndpoint:"HTTP://LOCALHOST:3000",prodApiEndpoint:process.env.NEXT_PUBLIC_PROD_API_ENDPOINT,imagekit:{publicKey:"public_BtS+r9Vnb8MycIO2ZwDml3Hga3s=",urlEndpoint:"https://ik.imagekit.io/newCreation",privateKey:process.env.IMAGEKIT_PRIVATE_KEY},databaseUrl:process.env.DATABASE_URL,upstash:{redisUrl:process.env.UPSTASH_REDIS_URL,redisToken:process.env.UPSTASH_REDIS_TOKEN,qstashUrl:process.env.QSTASH_URL,qstashToken:process.env.QSTASH_TOKEN},resendToken:process.env.RESEND_TOKEN}}},42706:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994,980,187,988],()=>r(79077));module.exports=s})();